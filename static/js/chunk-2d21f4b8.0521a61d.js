(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d21f4b8"],{d8e3:function(e,t,l){"use strict";l.r(t);var a=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",[l("el-card",{attrs:{shadow:"never"}},[l("el-select",{attrs:{filterable:"",placeholder:e.$t("please_select_namespace")},on:{change:e.selectedNamespace},nativeOn:{click:function(t){return e.getNamespace(t)}},model:{value:e.namespace,callback:function(t){e.namespace=t},expression:"namespace"}},e._l(e.namespaces,(function(e){return l("el-option",{key:e,attrs:{label:e,value:e}})})),1),e._v(" "),l("el-select",{attrs:{placeholder:e.$t("please_select_deployment"),multiple:""},on:{change:e.selecteddeployment},model:{value:e.deployment,callback:function(t){e.deployment=t},expression:"deployment"}},[l("el-option",{attrs:{label:e.$t("check_all"),value:"all"}}),e._l(e.deployments,(function(e){return l("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],2),e._v(" "),l("el-button",{nativeOn:{click:function(t){return e.getStatus(t)}}},[e._v(e._s(e.$t("enter")))]),l("br"),l("el-table",{staticClass:"app-table",attrs:{size:"medium",data:e.tableData}},[l("el-table-column",{attrs:{prop:"Pods",label:e.$t("name")}}),l("el-table-column",{attrs:{prop:"Container",label:e.$t("container")}}),l("el-table-column",{attrs:{prop:"Image",label:e.$t("image")}}),l("el-table-column",{attrs:{prop:"Tag",label:e.$t("tag")}}),l("el-table-column",{attrs:{prop:"ImagePullSecrets",label:e.$t("image_pull_secrets")}}),l("el-table-column",{attrs:{prop:"State",label:e.$t("state")}}),l("el-table-column",{attrs:{prop:"CPU",label:e.$t("cpu")}}),l("el-table-column",{attrs:{prop:"RAM",label:e.$t("ram")}}),l("el-table-column",{attrs:{prop:"OS",label:e.$t("os")}}),l("el-table-column",{attrs:{prop:"Operate",label:e.$t("operate"),width:"160",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return["unix"===t.row.OS?l("el-button",{nativeOn:{click:function(l){return e.openTerminal(t.row,"sh")}}},[e._v(e._s(e.$t("sh")))]):e._e(),"windows"===t.row.OS?l("el-button",{nativeOn:{click:function(l){return e.openTerminal(t.row,"cmd")}}},[e._v(e._s(e.$t("cmd")))]):e._e(),l("span"),l("el-button",{nativeOn:{click:function(l){return e.openFilebrowser(t.row)}}},[e._v(e._s(e.$t("filebrowser")))])]}}])})],1)],1),l("el-dialog",{attrs:{title:e.$t("terminal"),visible:e.dialogTerminalVisible,"before-close":e.handleClose},on:{"update:visible":function(t){e.dialogTerminalVisible=t},close:function(t){e.dialogTerminalVisible=!1}}},[l("div",[l("span",[e._v("前端实现中")]),l("div",{attrs:{id:"terminal-container"}})])]),l("el-dialog",{attrs:{title:e.$t("filebrowser"),visible:e.dialogFileBrowserVisible,"before-close":e.handleClose},on:{"update:visible":function(t){e.dialogFileBrowserVisible=t},close:function(t){e.dialogFileBrowserVisible=!1}}},[l("div",[l("span",[e._v("前端实现中")]),l("div",{attrs:{id:"filebrowser-container"}})])])],1)},n=[],s=l("ead3");function o(e){return Object(s["a"])("/k8s/status",e)}var i=l("1764");function r(e){return Object(s["a"])("/k8s/deployment",e)}var c={data(){return{namespace:"",deployment:[],namespaces:[],tableLoading:!1,tableData:[],deployments:[],dialogTerminalVisible:!1,dialogFileBrowserVisible:!1}},methods:{getNamespace(){Object(i["a"])().then(e=>{if(e){this.namespaces=[],this.deployment=[],this.deployments=[],this.tableData=[];const l=e.items;for(var t in l)this.namespaces.push(l[t].metadata.name);console.log(this.namespaces)}})},selectedNamespace(e){console.log(e),r({namespace:e}).then(e=>{if(e){const t=[];this.deployments=[],this.tableData=[];const l=e.items;for(const e in l){const a={label:l[e].metadata.name,value:l[e].metadata.name};t.push(a)}this.deployments=t,console.log(this.deployments)}})},selecteddeployment(e){console.log(e)},getStatus(){console.log(this.deployment[0],this.namespace);let e=this.deployment[0];if("all"===this.deployment[0]){e="";for(const t in this.deployments)e.push(this.deployments[t].value)}o({namespace:this.namespace,deployment:e}).then(e=>{if(e){console.log(e),this.tableData=[];for(const t in e){const l=e[t].pod_name,a=e[t].containers;for(const e in a){let t={Pods:"",Container:a[e].name,Image:a[e].image,Tag:a[e].version,ImagePullSecrets:a[e].image_pull_policy,State:a[e].state,CPU:a[e].cpu,RAM:a[e].ram,OS:a[e].os};"0"===e&&(t={Pods:l,Container:a[e].name,Image:a[e].image,Tag:a[e].version,ImagePullSecrets:a[e].image_pull_policy,State:a[e].state,CPU:a[e].cpu,RAM:a[e].ram,OS:a[e].os}),this.tableData.push(t)}}}})},openTerminal(e,t){this.dialogTerminalVisible=!0,console.log(e,this.namespace,t)},openFilebrowser(e){this.dialogFileBrowserVisible=!0,console.log(e)},handleClose(e){this.$confirm("确认关闭？").then(t=>{e()}).catch(e=>{})}},watch:{deployment:function(e,t){let l=e.indexOf("all"),a=t.indexOf("all");-1!==l&&-1===a&&e.length>1?this.deployment=["all"]:-1!==l&&-1!==a&&e.length>1&&this.deployment.splice(e.indexOf("all"),1)}}},p=c,m=l("2877"),d=Object(m["a"])(p,a,n,!1,null,null,null);t["default"]=d.exports}}]);
//# sourceMappingURL=chunk-2d21f4b8.0521a61d.js.map