{"version":3,"sources":["webpack:///./node_modules/xterm/lib/renderer/CharacterJoinerRegistry.js","webpack:///./node_modules/xterm/lib/utils/Clone.js","webpack:///./node_modules/xterm/lib/renderer/dom/DomRendererRowFactory.js","webpack:///./node_modules/xterm/lib/renderer/BaseRenderLayer.js","webpack:///./node_modules/xterm/lib/BufferLine.js","webpack:///./node_modules/xterm/lib/AccessibilityManager.js","webpack:///./node_modules/xterm/lib/renderer/SelectionRenderLayer.js","webpack:///./node_modules/xterm/lib/addons/winptyCompat/winptyCompat.js","webpack:///./node_modules/xterm/lib/ui/RenderDebouncer.js","webpack:///./node_modules/xterm/lib/renderer/dom/DomRenderer.js","webpack:///./node_modules/xterm/lib/ui/MouseZoneManager.js","webpack:///./node_modules/xterm/lib/Buffer.js","webpack:///./node_modules/xterm/lib/ui/Lifecycle.js","webpack:///./node_modules/xterm/lib/renderer/Renderer.js","webpack:///./node_modules/xterm/lib/core/input/Keyboard.js","webpack:///./node_modules/xterm/lib/renderer/atlas/CharAtlasCache.js","webpack:///./node_modules/xterm/lib/SoundManager.js","webpack:///./node_modules/xterm/lib/renderer/atlas/DynamicCharAtlas.js","webpack:///./node_modules/xterm/lib/public/Terminal.js","webpack:///./node_modules/xterm/lib/ui/CharMeasure.js","webpack:///./node_modules/xterm/lib/ui/Clipboard.js","webpack:///./node_modules/xterm/lib/core/Platform.js","webpack:///./node_modules/xterm/lib/common/TypedArrayUtils.js","webpack:///./node_modules/xterm/lib/common/data/EscapeSequences.js","webpack:///./node_modules/xterm/lib/renderer/atlas/NoneCharAtlas.js","webpack:///./node_modules/xterm/lib/renderer/atlas/BaseCharAtlas.js","webpack:///./node_modules/xterm/lib/Strings.js","webpack:///./node_modules/xterm/lib/common/EventEmitter.js","webpack:///./node_modules/xterm/lib/SelectionManager.js","webpack:///./node_modules/xterm/lib/renderer/atlas/StaticCharAtlas.js","webpack:///./node_modules/xterm/lib/renderer/TextRenderLayer.js","webpack:///./node_modules/xterm/lib/renderer/atlas/CharAtlasUtils.js","webpack:///./node_modules/xterm/lib/utils/MouseHelper.js","webpack:///./node_modules/xterm/lib/addons/webLinks/webLinks.js","webpack:///./node_modules/xterm/lib/renderer/CursorRenderLayer.js","webpack:///./node_modules/xterm/lib/renderer/atlas/CharAtlasGenerator.js","webpack:///./node_modules/xterm/lib/CompositionHelper.js","webpack:///./node_modules/xterm/lib/CharWidth.js","webpack:///./node_modules/xterm/lib/core/data/Charsets.js","webpack:///./node_modules/xterm/lib/Terminal.js","webpack:///./node_modules/xterm/lib/handlers/AltClickHandler.js","webpack:///./node_modules/xterm/lib/EscapeSequenceParser.js","webpack:///./node_modules/xterm/lib/renderer/atlas/LRUMap.js","webpack:///./node_modules/xterm/lib/Linkifier.js","webpack:///./node_modules/xterm/lib/addons/fit/fit.js","webpack:///./node_modules/xterm/lib/renderer/atlas/Types.js","webpack:///./node_modules/xterm/lib/common/CircularList.js","webpack:///./node_modules/xterm/lib/SelectionModel.js","webpack:///./node_modules/xterm/lib/renderer/ColorManager.js","webpack:///./node_modules/xterm/lib/renderer/LinkRenderLayer.js","webpack:///./node_modules/xterm/lib/InputHandler.js","webpack:///./node_modules/xterm/lib/common/Lifecycle.js","webpack:///./node_modules/xterm/lib/renderer/GridCache.js","webpack:///./node_modules/xterm/lib/addons/attach/attach.js","webpack:///./src/api/pods.js","webpack:///./node_modules/xterm/lib/BufferSet.js","webpack:///./node_modules/xterm/lib/ui/ScreenDprMonitor.js","webpack:///./node_modules/xterm/lib/Viewport.js","webpack:///./src/view/terminal.vue?c7a4","webpack:///src/view/terminal.vue","webpack:///./src/view/terminal.vue?928b","webpack:///./src/view/terminal.vue"],"names":["Object","defineProperty","exports","value","Buffer_1","CharacterJoinerRegistry","_terminal","this","_characterJoiners","_nextCharacterJoinerId","prototype","registerCharacterJoiner","handler","joiner","id","push","deregisterCharacterJoiner","joinerId","i","length","splice","getJoinedCharacters","row","line","buffer","lines","get","ranges","lineStr","translateBufferLineToString","rangeStartColumn","currentStringIndex","rangeStartStringIndex","rangeAttr","CHAR_DATA_ATTR_INDEX","x","cols","charData","chars","CHAR_DATA_CHAR_INDEX","width","CHAR_DATA_WIDTH_INDEX","attr","joinedRanges","_getJoinedRanges","startIndex","endIndex","lineData","startCol","text","substring","joinerRanges","j","_mergeRanges","_stringRangesToCellRanges","currentRangeIndex","currentRangeStarted","currentRange","length_1","newRange","inRange","range","Math","max","min","clone","val","depth","clonedObject","Array","isArray","key","Types_1","BOLD_CLASS","ITALIC_CLASS","CURSOR_CLASS","CURSOR_STYLE_BLOCK_CLASS","CURSOR_STYLE_BAR_CLASS","CURSOR_STYLE_UNDERLINE_CLASS","DomRendererRowFactory","_document","createRow","isCursorRow","cursorStyle","cursorX","cellWidth","fragment","createDocumentFragment","lineLength","code","CHAR_DATA_CODE_INDEX","NULL_CELL_CODE","char","charElement","createElement","style","flags","bg","fg","classList","add","temp","DEFAULT_COLOR","INVERTED_DEFAULT_COLOR","textContent","appendChild","CharAtlasCache_1","CharAtlasUtils_1","BaseRenderLayer","_container","zIndex","_alpha","_colors","_scaledCharWidth","_scaledCharHeight","_scaledCellWidth","_scaledCellHeight","_scaledCharLeft","_scaledCharTop","_currentGlyphIdentifier","bold","dim","italic","_canvas","document","toString","_initCanvas","dispose","removeChild","_charAtlas","_ctx","getContext","alpha","clearAll","onOptionsChanged","terminal","onBlur","onFocus","onCursorMove","onGridChanged","startRow","endRow","onSelectionChanged","start","end","columnSelectMode","onThemeChanged","colorSet","_refreshCharAtlas","setTransparency","oldCanvas","cloneNode","replaceChild","rows","acquireCharAtlas","warmUp","resize","scaledCellWidth","scaledCellHeight","scaledCharWidth","scaledCharHeight","scaledCharLeft","scaledCharTop","scaledCanvasWidth","height","scaledCanvasHeight","canvasWidth","canvasHeight","fillCells","y","fillRect","fillBottomLineAtCells","window","devicePixelRatio","fillLeftLineAtCell","strokeRectAtCell","lineWidth","strokeRect","clearRect","fillStyle","background","css","clearCells","fillCharTrueColor","font","_getFont","textBaseline","_clipRow","fillText","drawChars","drawInBrightColor","options","drawBoldTextInBrightColors","enableBold","atlasDidDraw","draw","_drawUncachedChars","save","is256Color","ansi","foreground","globalAlpha","DIM_OPACITY","restore","beginPath","rect","clip","isBold","isItalic","fontWeight","fontWeightBold","fontStyle","fontSize","fontFamily","BufferLineJSArray","fillCharData","isWrapped","_data","NULL_CELL_CHAR","NULL_CELL_WIDTH","_push","_pop","data","pop","_splice","deleteCount","_a","items","_i","arguments","removed","apply","concat","index","set","insertCells","pos","n","ch","deleteCells","replaceCells","shrink","fill","copyFrom","slice","newLine","CELL_SIZE","BufferLine","_combined","Uint32Array","stringData","String","fromCharCode","charCodeAt","subarray","el","__extends","extendStatics","d","b","setPrototypeOf","__proto__","p","hasOwnProperty","__","constructor","create","Strings","Platform_1","RenderDebouncer_1","Lifecycle_1","Lifecycle_2","MAX_ROWS_TO_READ","AccessibilityManager","_super","_this","call","_liveRegionLineCount","_charsToConsume","_accessibilityTreeRoot","_rowContainer","_rowElements","_createAccessibilityTreeNode","_topBoundaryFocusListener","e","_onBoundaryFocus","_bottomBoundaryFocusListener","addEventListener","_refreshRowsDimensions","_renderRowsDebouncer","RenderDebouncer","_renderRows","bind","_refreshRows","_liveRegion","setAttribute","element","insertAdjacentElement","register","addDisposableListener","_onResize","_onChar","spaceCount","_onTab","keyChar","_onKey","_clearLiveRegion","renderer","addDisposableDomListener","position","boundaryElement","target","beforeBoundaryElement","posInSet","getAttribute","lastRowPos","relatedTarget","topBoundaryElement","bottomBoundaryElement","shift","removeEventListener","newElement","unshift","scrollLines","focus","preventDefault","stopImmediatePropagation","children","tabIndex","_refreshRowDimensions","shiftedChar","_announceCharacter","tooMuchOutput","isMac","parentNode","setTimeout","refresh","setSize","ydisp","blankLine","dimensions","actualCellHeight","innerHTML","Disposable","BaseRenderLayer_1","SelectionRenderLayer","container","colors","_clearState","_state","reset","_didStateChange","viewportStartRow","viewportEndRow","viewportCappedStartRow","viewportCappedEndRow","selection","startRowEndCol","middleRowsCount","endCol","_areCoordinatesEqual","coord1","coord2","winptyCompatInit","addonTerminal","isWindows","indexOf","navigator","platform","on","_core","ybase","lastChar","nextLine","terminalConstructor","_callback","_animationFrame","cancelAnimationFrame","rowStart","rowEnd","undefined","isRowStartSet","_rowStart","isRowEndSet","_rowEnd","requestAnimationFrame","_innerRefresh","EventEmitter_1","ColorManager_1","DomRendererRowFactory_1","TERMINAL_CLASS_PREFIX","ROW_CONTAINER_CLASS","FG_CLASS_PREFIX","BG_CLASS_PREFIX","FOCUS_CLASS","SELECTION_CLASS","nextTerminalId","DomRenderer","theme","_terminalClass","allowTransparency","colorManager","ColorManager","setTheme","lineHeight","_refreshRowElements","_selectionContainer","actualCellWidth","_updateDimensions","_renderDebouncer","_rowFactory","screenElement","linkifier","_onLinkHover","_onLinkLeave","remove","_themeStyleElement","_dimensionsStyleElement","floor","charMeasure","ceil","round","letterSpacing","forEach","overflow","styles","_terminalSelector","_viewportElement","getOption","cursor","cursorAccent","c","onWindowResize","onResize","onCharSizeChanged","documentFragment","_createSelectionElement","endCol_1","colStart","colEnd","rowCount","top","left","clear","refreshRows","cursorAbsoluteY","rowElement","emit","enumerable","configurable","_setCellUnderline","x1","x2","y1","y2","enabled","span","textDecoration","EventEmitter","HOVER_DURATION","MouseZoneManager","_zones","_areZonesActive","_tooltipTimeout","_currentZone","_lastHoverCoords","_onMouseDown","_mouseMoveListener","_onMouseMove","_clickListener","_onClick","_deactivate","zone","_activate","leaveCallback","pageX","pageY","_onHover","_findZoneEventAt","clearTimeout","hoverCallback","_onTooltip","tooltipCallback","willLinkActivate","clickCallback","coords","mouseHelper","getCoords","MouseZone","CircularList_1","BufferLine_1","DEFAULT_ATTR","MAX_BUFFER_SIZE","Buffer","_hasScrollback","markers","setBufferLineFactory","type","_bufferLineConstructor","_recreateLines","oldLine","getBlankLine","maxLength","absoluteY","relativeY","_getCorrectBufferLength","correctBufferLength","scrollback","fillViewportRows","fillAttr","experimentalBufferLineImpl","CircularList","scrollTop","scrollBottom","setupTabStops","newCols","newRows","newMaxLength","addToY","amountToTrim","trimStart","savedY","savedX","stringIndexToBufferIndex","lineIndex","stringIndex","trimRight","lineString","rightWhitespaceIndex","search","getWrappedRangeForLine","first","last","tabs","prevStop","tabStopWidth","nextStop","addMarker","marker","Marker","amount","_removeMarker","iterator","startOverscan","endOverscan","BufferStringIterator","_id","_nextId","isDisposed","_buffer","_trimRight","_startIndex","_endIndex","_startOverscan","_endOverscan","_current","hasNext","next","result","content","node","useCapture","TextRenderLayer_1","SelectionRenderLayer_1","CursorRenderLayer_1","LinkRenderLayer_1","ScreenDprMonitor_1","CharacterJoinerRegistry_1","Renderer","_isPaused","_needsFullRefresh","_characterJoinerRegistry","_renderLayers","TextRenderLayer","LinkRenderLayer","CursorRenderLayer","_devicePixelRatio","_screenDprMonitor","ScreenDprMonitor","setListener","observer_1","IntersectionObserver","onIntersectionChange","threshold","observe","disconnect","l","entry","intersectionRatio","_runOperation","operation","EscapeSequences_1","KEYCODE_KEY_MAPPINGS","48","49","50","51","52","53","54","55","56","57","186","187","188","189","190","191","192","219","220","221","222","evaluateKeyboardEvent","ev","applicationCursorMode","macOptionIsMeta","cancel","modifiers","shiftKey","altKey","ctrlKey","metaKey","keyCode","C0","ESC","BS","DEL","HT","CR","keyMapping","DynamicCharAtlas_1","NoneCharAtlas_1","StaticCharAtlas_1","charAtlasImplementations","default","charAtlasCache","newConfig","generateConfig","ownedByIndex","ownedBy","configEquals","config","atlas","newEntry","experimentalCharAtlas","removeTerminalFromCache","DEFAULT_BELL_SOUND","SoundManager","_audioContext","audioContextCtor","AudioContext","webkitAudioContext","console","warn","playBellSound","ctx","audioContext","bellAudioSource","createBufferSource","decodeAudioData","_base64ToArrayBuffer","_removeMimeType","bellSound","connect","destination","base64","binaryString","atob","len","bytes","Uint8Array","dataURI","splitUri","split","BaseCharAtlas_1","CharAtlasGenerator_1","LRUMap_1","TEXTURE_WIDTH","TEXTURE_HEIGHT","TRANSPARENT_COLOR","rgba","FRAME_CACHE_DRAW_LIMIT","GLYPH_BITMAP_COMMIT_DELAY","getGlyphCacheKey","glyph","DynamicCharAtlas","_config","_drawToCacheCount","_glyphsWaitingOnBitmap","_bitmapCommitTimeout","_bitmap","_cacheCanvas","_cacheCtx","tmpCanvas","_tmpCtx","_width","_height","capacity","_cacheMap","prealloc","beginFrame","_canCache","glyphKey","cacheValue","_drawFromCache","size","peek","cacheValue_1","_drawToCache","_toCoordinateX","_toCoordinateY","isEmpty","cacheX","cacheY","drawImage","inBitmap","_getColorFromAnsiIndex","idx","DEFAULT_ANSI_COLORS","_getBackgroundColor","_getForegroundColor","backgroundColor","globalCompositeOperation","imageData","getImageData","clearColor","putImageData","_addGlyphToBitmap","isFirefox","isSafari","_generateBitmap","glyphsMovingToBitmap","createImageBitmap","then","bitmap","Terminal_1","Terminal","textarea","blur","listener","off","columns","writeln","open","parent","attachCustomKeyEventHandler","customKeyEventHandler","registerLinkMatcher","regex","deregisterLinkMatcher","matcherId","cursorYOffset","hasSelection","getSelection","clearSelection","selectAll","selectLines","destroy","scrollPages","pageCount","scrollToTop","scrollToBottom","scrollToLine","write","setOption","applyAddon","addon","CharMeasure","parentElement","_parentElement","_measureElement","measure","geometry","getBoundingClientRect","prepareTextForTerminal","replace","bracketTextForPaste","bracketedPasteMode","copyHandler","term","selectionManager","browser","isMSIE","clipboardData","setData","selectionText","pasteHandler","stopPropagation","dispatchPaste","getData","moveTextAreaUnderMouseCursor","clientX","clientY","rightClickHandler","shouldSelectWord","isClickInSelection","selectWordAtCursor","select","isNode","userAgent","contains","arr","test","isIpad","isIphone","isMSWindows","isLinux","array","fillFallback","NUL","SOH","STX","ETX","EOT","ENQ","ACK","BEL","LF","VT","FF","SO","SI","DLE","DC1","DC2","DC3","DC4","NAK","SYN","ETB","CAN","EM","SUB","FS","GS","RS","US","SP","C1","PAD","HOP","BPH","NBH","IND","NEL","SSA","ESA","HTS","HTJ","VTS","PLD","PLU","RI","SS2","SS3","DCS","PU1","PU2","STS","CCH","MW","SPA","EPA","SOS","SGCI","SCI","CSI","ST","OSC","PM","APC","NoneCharAtlas","BaseCharAtlas","_didWarmUp","_doWarmUp","promptLabel","_events","disposed","obj","removeAllListeners","args","listeners","MouseHelper_1","Browser","SelectionModel_1","AltClickHandler_1","DRAG_SCROLL_MAX_THRESHOLD","DRAG_SCROLL_MAX_SPEED","DRAG_SCROLL_INTERVAL","ALT_CLICK_MOVE_CURSOR_TIME","WORD_SEPARATORS","NON_BREAKING_SPACE_CHAR","ALL_NON_BREAKING_SPACE_REGEX","RegExp","SelectionManager","_charMeasure","_enabled","_initListeners","enable","_model","SelectionModel","_activeSelectionMode","_removeMouseDownListeners","buffers","active","event","_mouseUpListener","_onMouseUp","_trimListener","_onTrim","initBuffersListeners","_onBufferActivate","disable","finalSelectionStart","finalSelectionEnd","lineText","bufferLine","formattedResult","map","join","isNewSelection","_refreshAnimationFrame","_refresh","_getMouseBufferCoords","_areCoordsInSelection","_selectWordAt","selectionEnd","isSelectAllActive","selectionStart","needsRefresh","onTrim","_getMouseEventScrollAmount","offset","MouseHelper","getCoordsRelativeToElement","terminalHeight","abs","shouldForceSelection","macOptionClickForcesSelection","onMouseDown","_mouseDownTimeStamp","timeStamp","button","_dragScrollAmount","_onIncrementalClick","detail","_onSingleClick","_onDoubleClick","_onTripleClick","_addMouseDownListeners","ownerDocument","_dragScrollIntervalTimer","setInterval","_dragScroll","clearInterval","selectionStartLength","shouldColumnSelect","_selectLineAt","previousSelectionEnd","_selectToWordAt","timeElapsed","AltClickHandler","move","inactiveBuffer","activeBuffer","_convertViewportColToCharacterIndex","charIndex","setSelection","col","_getWordAt","allowWhitespaceOnlySelection","followWrappedLinesAbove","followWrappedLinesBelow","charOffset","leftWideCharCount","rightWideCharCount","leftLongCharOffset","rightLongCharOffset","charAt","_isCharWordSeparator","trim","previousBufferLine","previousLineWordPosition","nextBufferLine","nextLineWordPosition","wordPosition","areSelectionValuesReversed","wrappedRange","StaticCharAtlas","_canvasFactory","canvas","generateStaticCharAtlasTexture","HTMLCanvasElement","_texture","texture","_isCached","colorIndex","isAscii","isBasicColor","isDefaultColor","isDefaultBackground","charAtlasCellWidth","CHAR_ATLAS_CELL_SPACING","charAtlasCellHeight","GridCache_1","characterJoinerRegistry","_characterOverlapCache","GridCache","terminalFont","_characterWidth","_characterFont","_forEachCell","firstRow","lastRow","joinerRegistry","callback","isJoined","lastCharX","Infinity","_isOverlapping","_drawBackground","startX","startY","prevFillStyle","nextFillStyle","_drawForeground","cache","overlaps","measureText","clonedColors","a","colorCode","_renderer","setRenderer","originalElement","offsetLeft","offsetTop","offsetParent","body","scrollLeft","colCount","isSelection","getRawByteCoords","protocolClause","domainCharacterSet","negatedDomainCharacterSet","domainBodyClause","tldClause","ipClause","localHostClause","portClause","hostClause","pathClause","queryStringHashFragmentCharacterSet","queryStringClause","hashFragmentClause","negatedPathCharacterSet","bodyClause","strictUrlRegex","handleLink","uri","webLinksInit","matchIndex","BLINK_INTERVAL","isFocused","_cursorRenderers","_renderBarCursor","_renderBlockCursor","_renderUnderlineCursor","_clearCursor","_cursorBlinkStateManager","pause","resume","cursorBlink","CursorBlinkStateManager","_render","restartBlinkAnimation","isPaused","triggeredByAnimationFrame","cursorState","cursorHidden","cursorY","viewportRelativeCursorY","_renderBlurCursor","isCursorVisible","strokeStyle","_renderCallback","_restartInterval","_blinkStartTimeout","_blinkInterval","_animationTimeRestarted","Date","now","timeToStart","time","context","canvasFactory","cellHeight","getFont","charAtlasImageData","color","r","g","CompositionHelper","_textarea","_compositionView","_isComposing","_isSendingComposition","_compositionPosition","compositionstart","compositionupdate","updateCompositionElements","compositionend","_finalizeComposition","keydown","_handleAnyTextareaChanges","waitForPropogation","_clearTextareaPosition","currentCompositionPosition_1","input","oldValue","newValue","diff","dontRecurse","isCursorInViewport","cursorTop","cursorLeft","compositionViewBounds","TypedArrayUtils_1","getStringCellWidth","s","wcwidth","second","opts","COMBINING_BMP","COMBINING_HIGH","bisearch","ucs","mid","wcwidthHigh","control","table","nul","num","CHARSETS","DEFAULT_CHARSET","BufferSet_1","CompositionHelper_1","Viewport_1","Clipboard_1","InputHandler_1","Renderer_1","Linkifier_1","SelectionManager_1","CharMeasure_1","Clone_1","SoundManager_1","MouseZoneManager_1","AccessibilityManager_1","DomRenderer_1","Keyboard_1","WRITE_BUFFER_PAUSE_THRESHOLD","WRITE_BATCH_SIZE","CONSTRUCTOR_ONLY_OPTIONS","DEFAULT_OPTIONS","convertEol","termName","bellStyle","screenKeys","screenReaderMode","debug","cancelEvents","disableStdin","useFlowControl","rightClickSelectsWord","rendererType","_blankLine","_setup","_customKeyEventHandler","keys","_parent","applicationKeypad","applicationCursor","originMode","insertMode","wraparoundMode","charset","gcharset","glevel","charsets","curAttr","params","currentParam","writeBuffer","_writeInProgress","_xoffSentToCatchUp","_userScrolling","_inputHandler","InputHandler","Linkifier","_mouseZoneManager","soundManager","BufferSet","eraseAttr","activeElement","hasFocus","Error","error","_setTheme","newBufferLength","unregister","_setupRenderer","_theme","viewport","syncScrollArea","_accessibilityManager","normal","alt","_onTextAreaFocus","sendFocus","updateCursorStyle","showCursor","_onTextAreaBlur","_initGlobal","_bindKeys","pasteHandlerWrapper","self","_keyDown","_keyPress","wasModifierKeyOnlyEvent","_keyUp","_compositionHelper","_queueLinkification","_context","defaultView","dir","_viewportScrollArea","_helperContainer","attachToDom","Viewport","bindMouse","pressed","sendButton","getButton","sendEvent","overrideType","sendMove","encode","utfMouse","_vt300Mouse","data_1","_decLocator","page","urxvtMouse","sgrMouse","meta","ctrl","mod","which","deltaY","vt200Mouse","normalMouse","mouseEvents","moveHandler","x10Mouse","hasScrollback","getLinesScrolled","sequence","onWheel","onTouchStart","onTouchMove","linkifyRows","scroll","useRecycling","topRow","bottomRow","willBufferBeTrimmed","isFull","recycle","scrollRegionHeight","shiftElements","updateRange","disp","suppressScrollEvent","oldYdisp","scrollAmount","_isDisposed","_innerWrite","writeBatch","_refreshStart","_refreshEnd","parse","scrollCount","_isThirdLevelShift","thirdLevelKey","setgLevel","setgCharset","charCode","bell","_soundBell","_visualBell","_visualBellTimer","log","isNaN","maxRange","cur","is","handleTitle","title","reverseIndex","inputHandler","tabSet","force","matchColor","r1","g1","b1","hash","matchColorCache","r2","g2","b2","ldiff","li","matchColorDistance","pow","_mouseEvent","_lines","_startCol","_startRow","coordinates","coordinate","_endCol","_endRow","_arrowSequences","_moveHorizontallyOnly","_resetStartingRow","_moveToRequestedRow","_moveToRequestedCol","repeat","_bufferLine","_wrappedRowsForRow","_sequence","rowsToMove","_wrappedRowsCount","_verticalDirection","direction","_horizontalDirection","wrappedRows","currentRow","lineWraps","forward","currentCol","bufferStr","count","str","rpt","low","high","TransitionTable","state","action","addMany","codes","PRINTABLES","EXECUTABLES","DEFAULT_TRANSITION","VT500_TRANSITION_TABLE","states","DcsDummy","hook","collect","flag","put","unhook","EscapeSequenceParser","TRANSITIONS","initialState","currentState","_osc","_params","_collect","_printHandlerFb","_executeHandlerFb","_csiHandlerFb","_escHandlerFb","_oscHandlerFb","identifier","_dcsHandlerFb","_errorHandlerFb","_printHandler","_executeHandlers","_csiHandlers","_escHandlers","_oscHandlers","_dcsHandlers","_activeDcsHandler","_errorHandler","setEscHandler","setPrintHandler","clearPrintHandler","setExecuteHandler","clearExecuteHandler","setExecuteHandlerFallback","setCsiHandler","clearCsiHandler","setCsiHandlerFallback","collectAndFlag","clearEscHandler","setEscHandlerFallback","setOscHandler","ident","clearOscHandler","setOscHandlerFallback","setDcsHandler","clearDcsHandler","setDcsHandlerFallback","setErrorHandler","clearErrorHandler","transition","print","dcs","osc","dcsHandler","inject","abort","parseInt","LRUMap","_map","_head","_tail","_nodePool","_unlinkNode","prev","_appendNode","tail","nodePool","peekValue","head","CharWidth_1","_linkMatchers","_nextLinkMatcherId","_rowsToLinkify","mouseZoneManager","_rowsTimeoutId","_linkifyRows","TIME_BEFORE_LINKIFY","absoluteRowIndexStart","absoluteRowIndexEnd","overscanLineLimit","OVERSCAN_CHAR_LIMIT","_doLinkifyRow","matcher","validationCallback","hoverTooltipCallback","hoverLeaveCallback","priority","_addLinkMatcherToList","rowIndex","match","rex","source","_loop_1","this_1","lastIndex","bufferIndex","isValid","_addLink","exec","state_1","_createLinkHoverEvent","proposeGeometry","parentElementStyle","getComputedStyle","parentElementHeight","getPropertyValue","parentElementWidth","elementStyle","elementPadding","bottom","right","elementPaddingVer","elementPaddingHor","availableHeight","availableWidth","scrollBarWidth","fit","_maxLength","_array","_length","newArray","_getCyclicIndex","newLength","countToTrim","expandListBy","startPlusLength","DEFAULT_FOREGROUND","fromHex","DEFAULT_BACKGROUND","DEFAULT_CURSOR","DEFAULT_CURSOR_ACCENT","DEFAULT_SELECTION","toPaddedHex","v","_litmusColor","createLinearGradient","_parseColor","black","red","green","yellow","blue","magenta","cyan","white","brightBlack","brightRed","brightGreen","brightYellow","brightBlue","brightMagenta","brightCyan","brightWhite","fallback","_clearCurrentLink","middleRowCount","Charsets_1","EscapeSequenceParser_1","GLEVEL","RequestTerminfo","DECRQSS","pt","STYLES","_parser","_surrogateFirst","insertChars","cursorUp","cursorDown","cursorForward","cursorBackward","cursorNextLine","cursorPrecedingLine","cursorCharAbsolute","cursorPosition","cursorForwardTab","eraseInDisplay","eraseInLine","insertLines","deleteLines","deleteChars","scrollUp","scrollDown","eraseChars","cursorBackwardTab","charPosAbsolute","hPositionRelative","repeatPrecedingCharacter","sendDeviceAttributes","linePosAbsolute","vPositionRelative","hVPosition","tabClear","setMode","resetMode","charAttributes","deviceStatus","softReset","setCursorStyle","setScrollRegion","saveCursor","restoreCursor","lineFeed","carriageReturn","backspace","tab","shiftOut","shiftIn","setTitle","keypadApplicationMode","keypadNumericMode","selectDefaultCharset","selectCharset","cursorStartX","cursorStartY","chWidth","bufferRow","stringPosition","lastCell","chMinusOne","chMinusTwo","originalX","param","_eraseInBufferLine","clearWrap","_resetBufferLine","scrollBackSize","scrollBottomRowsOffset","scrollBottomAbsolute","savedCols","activateAltBuffer","activateNormalBuffer","isBlinking","savedCurAttr","level","_disposables","attach","socket","bidirectional","buffered","myTextDecoder","displayData","__pushToBuffer","__socket","__flushBuffer","__attachSocketBuffer","__getMessage","TextDecoder","ArrayBuffer","decode","fileReader_1","FileReader","readAsArrayBuffer","__sendData","readyState","send","addSocketListener","detach","GetPods","_normal","_alt","_activeBuffer","_listener","clearListener","_outerListener","_currentDevicePixelRatio","_updateDpr","_resolutionMediaMatchList","removeListener","matchMedia","addListener","FALLBACK_SCROLL_BAR_WIDTH","_scrollArea","_currentRowHeight","_lastRecordedBufferLength","_lastRecordedViewportHeight","_lastRecordedBufferHeight","_lastScrollTop","_wheelPartialScroll","_ignoreNextScrollEvent","offsetWidth","_onScroll","offsetHeight","newBufferHeight","newScrollTop","newRow","_getPixelsScrolled","deltaMode","WheelEvent","DOM_DELTA_LINE","DOM_DELTA_PAGE","DOM_DELTA_PIXEL","_lastTouchY","touches","render","_vm","_h","$createElement","_c","_self","attrs","$t","selectedNamespace","nativeOn","$event","getNamespace","model","$$v","namespace","expression","_l","item","_v","selectedPod","pod","label","shell","openTerminal","_s","staticStyle","staticRenderFns","namespaces","pods","containers","order","shells","methods","res","metadata","name","_d","spec","ws","getElementById","innerHeight","innerWidth","url","WebSocket","onopen","onclose","onmessage","onerror","msg","JSON","stringify","component"],"mappings":"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AAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,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","file":"js/chunk-100baf8e.32e2c8bf.js","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Buffer_1 = require(\"../Buffer\");\nvar CharacterJoinerRegistry = (function () {\n    function CharacterJoinerRegistry(_terminal) {\n        this._terminal = _terminal;\n        this._characterJoiners = [];\n        this._nextCharacterJoinerId = 0;\n    }\n    CharacterJoinerRegistry.prototype.registerCharacterJoiner = function (handler) {\n        var joiner = {\n            id: this._nextCharacterJoinerId++,\n            handler: handler\n        };\n        this._characterJoiners.push(joiner);\n        return joiner.id;\n    };\n    CharacterJoinerRegistry.prototype.deregisterCharacterJoiner = function (joinerId) {\n        for (var i = 0; i < this._characterJoiners.length; i++) {\n            if (this._characterJoiners[i].id === joinerId) {\n                this._characterJoiners.splice(i, 1);\n                return true;\n            }\n        }\n        return false;\n    };\n    CharacterJoinerRegistry.prototype.getJoinedCharacters = function (row) {\n        if (this._characterJoiners.length === 0) {\n            return [];\n        }\n        var line = this._terminal.buffer.lines.get(row);\n        if (line.length === 0) {\n            return [];\n        }\n        var ranges = [];\n        var lineStr = this._terminal.buffer.translateBufferLineToString(row, true);\n        var rangeStartColumn = 0;\n        var currentStringIndex = 0;\n        var rangeStartStringIndex = 0;\n        var rangeAttr = line.get(0)[Buffer_1.CHAR_DATA_ATTR_INDEX] >> 9;\n        for (var x = 0; x < this._terminal.cols; x++) {\n            var charData = line.get(x);\n            var chars = charData[Buffer_1.CHAR_DATA_CHAR_INDEX];\n            var width = charData[Buffer_1.CHAR_DATA_WIDTH_INDEX];\n            var attr = charData[Buffer_1.CHAR_DATA_ATTR_INDEX] >> 9;\n            if (width === 0) {\n                continue;\n            }\n            if (attr !== rangeAttr) {\n                if (x - rangeStartColumn > 1) {\n                    var joinedRanges = this._getJoinedRanges(lineStr, rangeStartStringIndex, currentStringIndex, line, rangeStartColumn);\n                    for (var i = 0; i < joinedRanges.length; i++) {\n                        ranges.push(joinedRanges[i]);\n                    }\n                }\n                rangeStartColumn = x;\n                rangeStartStringIndex = currentStringIndex;\n                rangeAttr = attr;\n            }\n            currentStringIndex += chars.length;\n        }\n        if (this._terminal.cols - rangeStartColumn > 1) {\n            var joinedRanges = this._getJoinedRanges(lineStr, rangeStartStringIndex, currentStringIndex, line, rangeStartColumn);\n            for (var i = 0; i < joinedRanges.length; i++) {\n                ranges.push(joinedRanges[i]);\n            }\n        }\n        return ranges;\n    };\n    CharacterJoinerRegistry.prototype._getJoinedRanges = function (line, startIndex, endIndex, lineData, startCol) {\n        var text = line.substring(startIndex, endIndex);\n        var joinedRanges = this._characterJoiners[0].handler(text);\n        for (var i = 1; i < this._characterJoiners.length; i++) {\n            var joinerRanges = this._characterJoiners[i].handler(text);\n            for (var j = 0; j < joinerRanges.length; j++) {\n                CharacterJoinerRegistry._mergeRanges(joinedRanges, joinerRanges[j]);\n            }\n        }\n        this._stringRangesToCellRanges(joinedRanges, lineData, startCol);\n        return joinedRanges;\n    };\n    CharacterJoinerRegistry.prototype._stringRangesToCellRanges = function (ranges, line, startCol) {\n        var currentRangeIndex = 0;\n        var currentRangeStarted = false;\n        var currentStringIndex = 0;\n        var currentRange = ranges[currentRangeIndex];\n        if (!currentRange) {\n            return;\n        }\n        for (var x = startCol; x < this._terminal.cols; x++) {\n            var charData = line.get(x);\n            var width = charData[Buffer_1.CHAR_DATA_WIDTH_INDEX];\n            var length_1 = charData[Buffer_1.CHAR_DATA_CHAR_INDEX].length;\n            if (width === 0) {\n                continue;\n            }\n            if (!currentRangeStarted && currentRange[0] <= currentStringIndex) {\n                currentRange[0] = x;\n                currentRangeStarted = true;\n            }\n            if (currentRange[1] <= currentStringIndex) {\n                currentRange[1] = x;\n                currentRange = ranges[++currentRangeIndex];\n                if (!currentRange) {\n                    break;\n                }\n                if (currentRange[0] <= currentStringIndex) {\n                    currentRange[0] = x;\n                    currentRangeStarted = true;\n                }\n                else {\n                    currentRangeStarted = false;\n                }\n            }\n            currentStringIndex += length_1;\n        }\n        if (currentRange) {\n            currentRange[1] = this._terminal.cols;\n        }\n    };\n    CharacterJoinerRegistry._mergeRanges = function (ranges, newRange) {\n        var inRange = false;\n        for (var i = 0; i < ranges.length; i++) {\n            var range = ranges[i];\n            if (!inRange) {\n                if (newRange[1] <= range[0]) {\n                    ranges.splice(i, 0, newRange);\n                    return ranges;\n                }\n                if (newRange[1] <= range[1]) {\n                    range[0] = Math.min(newRange[0], range[0]);\n                    return ranges;\n                }\n                if (newRange[0] < range[1]) {\n                    range[0] = Math.min(newRange[0], range[0]);\n                    inRange = true;\n                }\n                continue;\n            }\n            else {\n                if (newRange[1] <= range[0]) {\n                    ranges[i - 1][1] = newRange[1];\n                    return ranges;\n                }\n                if (newRange[1] <= range[1]) {\n                    ranges[i - 1][1] = Math.max(newRange[1], range[1]);\n                    ranges.splice(i, 1);\n                    inRange = false;\n                    return ranges;\n                }\n                ranges.splice(i, 1);\n                i--;\n            }\n        }\n        if (inRange) {\n            ranges[ranges.length - 1][1] = newRange[1];\n        }\n        else {\n            ranges.push(newRange);\n        }\n        return ranges;\n    };\n    return CharacterJoinerRegistry;\n}());\nexports.CharacterJoinerRegistry = CharacterJoinerRegistry;\n//# sourceMappingURL=CharacterJoinerRegistry.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.clone = function (val, depth) {\n    if (depth === void 0) { depth = 5; }\n    if (typeof val !== 'object') {\n        return val;\n    }\n    if (val === null) {\n        return null;\n    }\n    var clonedObject = Array.isArray(val) ? [] : {};\n    for (var key in val) {\n        clonedObject[key] = depth <= 1 ? val[key] : exports.clone(val[key], depth - 1);\n    }\n    return clonedObject;\n};\n//# sourceMappingURL=Clone.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Buffer_1 = require(\"../../Buffer\");\nvar Types_1 = require(\"../atlas/Types\");\nexports.BOLD_CLASS = 'xterm-bold';\nexports.ITALIC_CLASS = 'xterm-italic';\nexports.CURSOR_CLASS = 'xterm-cursor';\nexports.CURSOR_STYLE_BLOCK_CLASS = 'xterm-cursor-block';\nexports.CURSOR_STYLE_BAR_CLASS = 'xterm-cursor-bar';\nexports.CURSOR_STYLE_UNDERLINE_CLASS = 'xterm-cursor-underline';\nvar DomRendererRowFactory = (function () {\n    function DomRendererRowFactory(_document) {\n        this._document = _document;\n    }\n    DomRendererRowFactory.prototype.createRow = function (lineData, isCursorRow, cursorStyle, cursorX, cellWidth, cols) {\n        var fragment = this._document.createDocumentFragment();\n        var lineLength = 0;\n        for (var x = Math.min(lineData.length, cols) - 1; x >= 0; x--) {\n            var charData = lineData.get(x);\n            var code = charData[Buffer_1.CHAR_DATA_CODE_INDEX];\n            if (code !== Buffer_1.NULL_CELL_CODE || (isCursorRow && x === cursorX)) {\n                lineLength = x + 1;\n                break;\n            }\n        }\n        for (var x = 0; x < lineLength; x++) {\n            var charData = lineData.get(x);\n            var char = charData[Buffer_1.CHAR_DATA_CHAR_INDEX];\n            var attr = charData[Buffer_1.CHAR_DATA_ATTR_INDEX];\n            var width = charData[Buffer_1.CHAR_DATA_WIDTH_INDEX];\n            if (width === 0) {\n                continue;\n            }\n            var charElement = this._document.createElement('span');\n            if (width > 1) {\n                charElement.style.width = cellWidth * width + \"px\";\n            }\n            var flags = attr >> 18;\n            var bg = attr & 0x1ff;\n            var fg = (attr >> 9) & 0x1ff;\n            if (isCursorRow && x === cursorX) {\n                charElement.classList.add(exports.CURSOR_CLASS);\n                switch (cursorStyle) {\n                    case 'bar':\n                        charElement.classList.add(exports.CURSOR_STYLE_BAR_CLASS);\n                        break;\n                    case 'underline':\n                        charElement.classList.add(exports.CURSOR_STYLE_UNDERLINE_CLASS);\n                        break;\n                    default:\n                        charElement.classList.add(exports.CURSOR_STYLE_BLOCK_CLASS);\n                        break;\n                }\n            }\n            if (flags & 8) {\n                var temp = bg;\n                bg = fg;\n                fg = temp;\n                if (fg === Types_1.DEFAULT_COLOR) {\n                    fg = Types_1.INVERTED_DEFAULT_COLOR;\n                }\n                if (bg === Types_1.DEFAULT_COLOR) {\n                    bg = Types_1.INVERTED_DEFAULT_COLOR;\n                }\n            }\n            if (flags & 1) {\n                if (fg < 8) {\n                    fg += 8;\n                }\n                charElement.classList.add(exports.BOLD_CLASS);\n            }\n            if (flags & 64) {\n                charElement.classList.add(exports.ITALIC_CLASS);\n            }\n            charElement.textContent = char;\n            if (fg !== Types_1.DEFAULT_COLOR) {\n                charElement.classList.add(\"xterm-fg-\" + fg);\n            }\n            if (bg !== Types_1.DEFAULT_COLOR) {\n                charElement.classList.add(\"xterm-bg-\" + bg);\n            }\n            fragment.appendChild(charElement);\n        }\n        return fragment;\n    };\n    return DomRendererRowFactory;\n}());\nexports.DomRendererRowFactory = DomRendererRowFactory;\n//# sourceMappingURL=DomRendererRowFactory.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Types_1 = require(\"./atlas/Types\");\nvar CharAtlasCache_1 = require(\"./atlas/CharAtlasCache\");\nvar Buffer_1 = require(\"../Buffer\");\nvar CharAtlasUtils_1 = require(\"./atlas/CharAtlasUtils\");\nvar BaseRenderLayer = (function () {\n    function BaseRenderLayer(_container, id, zIndex, _alpha, _colors) {\n        this._container = _container;\n        this._alpha = _alpha;\n        this._colors = _colors;\n        this._scaledCharWidth = 0;\n        this._scaledCharHeight = 0;\n        this._scaledCellWidth = 0;\n        this._scaledCellHeight = 0;\n        this._scaledCharLeft = 0;\n        this._scaledCharTop = 0;\n        this._currentGlyphIdentifier = {\n            chars: '',\n            code: 0,\n            bg: 0,\n            fg: 0,\n            bold: false,\n            dim: false,\n            italic: false\n        };\n        this._canvas = document.createElement('canvas');\n        this._canvas.classList.add(\"xterm-\" + id + \"-layer\");\n        this._canvas.style.zIndex = zIndex.toString();\n        this._initCanvas();\n        this._container.appendChild(this._canvas);\n    }\n    BaseRenderLayer.prototype.dispose = function () {\n        this._container.removeChild(this._canvas);\n        if (this._charAtlas) {\n            this._charAtlas.dispose();\n        }\n    };\n    BaseRenderLayer.prototype._initCanvas = function () {\n        this._ctx = this._canvas.getContext('2d', { alpha: this._alpha });\n        if (!this._alpha) {\n            this.clearAll();\n        }\n    };\n    BaseRenderLayer.prototype.onOptionsChanged = function (terminal) { };\n    BaseRenderLayer.prototype.onBlur = function (terminal) { };\n    BaseRenderLayer.prototype.onFocus = function (terminal) { };\n    BaseRenderLayer.prototype.onCursorMove = function (terminal) { };\n    BaseRenderLayer.prototype.onGridChanged = function (terminal, startRow, endRow) { };\n    BaseRenderLayer.prototype.onSelectionChanged = function (terminal, start, end, columnSelectMode) {\n        if (columnSelectMode === void 0) { columnSelectMode = false; }\n    };\n    BaseRenderLayer.prototype.onThemeChanged = function (terminal, colorSet) {\n        this._refreshCharAtlas(terminal, colorSet);\n    };\n    BaseRenderLayer.prototype.setTransparency = function (terminal, alpha) {\n        if (alpha === this._alpha) {\n            return;\n        }\n        var oldCanvas = this._canvas;\n        this._alpha = alpha;\n        this._canvas = this._canvas.cloneNode();\n        this._initCanvas();\n        this._container.replaceChild(this._canvas, oldCanvas);\n        this._refreshCharAtlas(terminal, this._colors);\n        this.onGridChanged(terminal, 0, terminal.rows - 1);\n    };\n    BaseRenderLayer.prototype._refreshCharAtlas = function (terminal, colorSet) {\n        if (this._scaledCharWidth <= 0 && this._scaledCharHeight <= 0) {\n            return;\n        }\n        this._charAtlas = CharAtlasCache_1.acquireCharAtlas(terminal, colorSet, this._scaledCharWidth, this._scaledCharHeight);\n        this._charAtlas.warmUp();\n    };\n    BaseRenderLayer.prototype.resize = function (terminal, dim) {\n        this._scaledCellWidth = dim.scaledCellWidth;\n        this._scaledCellHeight = dim.scaledCellHeight;\n        this._scaledCharWidth = dim.scaledCharWidth;\n        this._scaledCharHeight = dim.scaledCharHeight;\n        this._scaledCharLeft = dim.scaledCharLeft;\n        this._scaledCharTop = dim.scaledCharTop;\n        this._canvas.width = dim.scaledCanvasWidth;\n        this._canvas.height = dim.scaledCanvasHeight;\n        this._canvas.style.width = dim.canvasWidth + \"px\";\n        this._canvas.style.height = dim.canvasHeight + \"px\";\n        if (!this._alpha) {\n            this.clearAll();\n        }\n        this._refreshCharAtlas(terminal, this._colors);\n    };\n    BaseRenderLayer.prototype.fillCells = function (x, y, width, height) {\n        this._ctx.fillRect(x * this._scaledCellWidth, y * this._scaledCellHeight, width * this._scaledCellWidth, height * this._scaledCellHeight);\n    };\n    BaseRenderLayer.prototype.fillBottomLineAtCells = function (x, y, width) {\n        if (width === void 0) { width = 1; }\n        this._ctx.fillRect(x * this._scaledCellWidth, (y + 1) * this._scaledCellHeight - window.devicePixelRatio - 1, width * this._scaledCellWidth, window.devicePixelRatio);\n    };\n    BaseRenderLayer.prototype.fillLeftLineAtCell = function (x, y) {\n        this._ctx.fillRect(x * this._scaledCellWidth, y * this._scaledCellHeight, window.devicePixelRatio, this._scaledCellHeight);\n    };\n    BaseRenderLayer.prototype.strokeRectAtCell = function (x, y, width, height) {\n        this._ctx.lineWidth = window.devicePixelRatio;\n        this._ctx.strokeRect(x * this._scaledCellWidth + window.devicePixelRatio / 2, y * this._scaledCellHeight + (window.devicePixelRatio / 2), width * this._scaledCellWidth - window.devicePixelRatio, (height * this._scaledCellHeight) - window.devicePixelRatio);\n    };\n    BaseRenderLayer.prototype.clearAll = function () {\n        if (this._alpha) {\n            this._ctx.clearRect(0, 0, this._canvas.width, this._canvas.height);\n        }\n        else {\n            this._ctx.fillStyle = this._colors.background.css;\n            this._ctx.fillRect(0, 0, this._canvas.width, this._canvas.height);\n        }\n    };\n    BaseRenderLayer.prototype.clearCells = function (x, y, width, height) {\n        if (this._alpha) {\n            this._ctx.clearRect(x * this._scaledCellWidth, y * this._scaledCellHeight, width * this._scaledCellWidth, height * this._scaledCellHeight);\n        }\n        else {\n            this._ctx.fillStyle = this._colors.background.css;\n            this._ctx.fillRect(x * this._scaledCellWidth, y * this._scaledCellHeight, width * this._scaledCellWidth, height * this._scaledCellHeight);\n        }\n    };\n    BaseRenderLayer.prototype.fillCharTrueColor = function (terminal, charData, x, y) {\n        this._ctx.font = this._getFont(terminal, false, false);\n        this._ctx.textBaseline = 'top';\n        this._clipRow(terminal, y);\n        this._ctx.fillText(charData[Buffer_1.CHAR_DATA_CHAR_INDEX], x * this._scaledCellWidth + this._scaledCharLeft, y * this._scaledCellHeight + this._scaledCharTop);\n    };\n    BaseRenderLayer.prototype.drawChars = function (terminal, chars, code, width, x, y, fg, bg, bold, dim, italic) {\n        var drawInBrightColor = terminal.options.drawBoldTextInBrightColors && bold && fg < 8 && fg !== Types_1.INVERTED_DEFAULT_COLOR;\n        fg += drawInBrightColor ? 8 : 0;\n        this._currentGlyphIdentifier.chars = chars;\n        this._currentGlyphIdentifier.code = code;\n        this._currentGlyphIdentifier.bg = bg;\n        this._currentGlyphIdentifier.fg = fg;\n        this._currentGlyphIdentifier.bold = bold && terminal.options.enableBold;\n        this._currentGlyphIdentifier.dim = dim;\n        this._currentGlyphIdentifier.italic = italic;\n        var atlasDidDraw = this._charAtlas && this._charAtlas.draw(this._ctx, this._currentGlyphIdentifier, x * this._scaledCellWidth + this._scaledCharLeft, y * this._scaledCellHeight + this._scaledCharTop);\n        if (!atlasDidDraw) {\n            this._drawUncachedChars(terminal, chars, width, fg, x, y, bold && terminal.options.enableBold, dim, italic);\n        }\n    };\n    BaseRenderLayer.prototype._drawUncachedChars = function (terminal, chars, width, fg, x, y, bold, dim, italic) {\n        this._ctx.save();\n        this._ctx.font = this._getFont(terminal, bold, italic);\n        this._ctx.textBaseline = 'top';\n        if (fg === Types_1.INVERTED_DEFAULT_COLOR) {\n            this._ctx.fillStyle = this._colors.background.css;\n        }\n        else if (CharAtlasUtils_1.is256Color(fg)) {\n            this._ctx.fillStyle = this._colors.ansi[fg].css;\n        }\n        else {\n            this._ctx.fillStyle = this._colors.foreground.css;\n        }\n        this._clipRow(terminal, y);\n        if (dim) {\n            this._ctx.globalAlpha = Types_1.DIM_OPACITY;\n        }\n        this._ctx.fillText(chars, x * this._scaledCellWidth + this._scaledCharLeft, y * this._scaledCellHeight + this._scaledCharTop);\n        this._ctx.restore();\n    };\n    BaseRenderLayer.prototype._clipRow = function (terminal, y) {\n        this._ctx.beginPath();\n        this._ctx.rect(0, y * this._scaledCellHeight, terminal.cols * this._scaledCellWidth, this._scaledCellHeight);\n        this._ctx.clip();\n    };\n    BaseRenderLayer.prototype._getFont = function (terminal, isBold, isItalic) {\n        var fontWeight = isBold ? terminal.options.fontWeightBold : terminal.options.fontWeight;\n        var fontStyle = isItalic ? 'italic' : '';\n        return fontStyle + \" \" + fontWeight + \" \" + terminal.options.fontSize * window.devicePixelRatio + \"px \" + terminal.options.fontFamily;\n    };\n    return BaseRenderLayer;\n}());\nexports.BaseRenderLayer = BaseRenderLayer;\n//# sourceMappingURL=BaseRenderLayer.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Buffer_1 = require(\"./Buffer\");\nvar BufferLineJSArray = (function () {\n    function BufferLineJSArray(cols, fillCharData, isWrapped) {\n        this.isWrapped = false;\n        this._data = [];\n        if (!fillCharData) {\n            fillCharData = [0, Buffer_1.NULL_CELL_CHAR, Buffer_1.NULL_CELL_WIDTH, Buffer_1.NULL_CELL_CODE];\n        }\n        for (var i = 0; i < cols; i++) {\n            this._push(fillCharData);\n        }\n        if (isWrapped) {\n            this.isWrapped = true;\n        }\n        this.length = this._data.length;\n    }\n    BufferLineJSArray.prototype._pop = function () {\n        var data = this._data.pop();\n        this.length = this._data.length;\n        return data;\n    };\n    BufferLineJSArray.prototype._push = function (data) {\n        this._data.push(data);\n        this.length = this._data.length;\n    };\n    BufferLineJSArray.prototype._splice = function (start, deleteCount) {\n        var items = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            items[_i - 2] = arguments[_i];\n        }\n        var _a;\n        var removed = (_a = this._data).splice.apply(_a, [start, deleteCount].concat(items));\n        this.length = this._data.length;\n        return removed;\n    };\n    BufferLineJSArray.prototype.get = function (index) {\n        return this._data[index];\n    };\n    BufferLineJSArray.prototype.set = function (index, data) {\n        this._data[index] = data;\n    };\n    BufferLineJSArray.prototype.insertCells = function (pos, n, ch) {\n        while (n--) {\n            this._splice(pos, 0, ch);\n            this._pop();\n        }\n    };\n    BufferLineJSArray.prototype.deleteCells = function (pos, n, fillCharData) {\n        while (n--) {\n            this._splice(pos, 1);\n            this._push(fillCharData);\n        }\n    };\n    BufferLineJSArray.prototype.replaceCells = function (start, end, fillCharData) {\n        while (start < end && start < this.length) {\n            this.set(start++, fillCharData);\n        }\n    };\n    BufferLineJSArray.prototype.resize = function (cols, fillCharData, shrink) {\n        if (shrink === void 0) { shrink = false; }\n        while (this._data.length < cols) {\n            this._data.push(fillCharData);\n        }\n        if (shrink) {\n            while (this._data.length > cols) {\n                this._data.pop();\n            }\n        }\n        this.length = this._data.length;\n    };\n    BufferLineJSArray.prototype.fill = function (fillCharData) {\n        for (var i = 0; i < this.length; ++i) {\n            this.set(i, fillCharData);\n        }\n    };\n    BufferLineJSArray.prototype.copyFrom = function (line) {\n        this._data = line._data.slice(0);\n        this.length = line.length;\n        this.isWrapped = line.isWrapped;\n    };\n    BufferLineJSArray.prototype.clone = function () {\n        var newLine = new BufferLineJSArray(0);\n        newLine.copyFrom(this);\n        return newLine;\n    };\n    return BufferLineJSArray;\n}());\nexports.BufferLineJSArray = BufferLineJSArray;\nvar CELL_SIZE = 3;\nvar BufferLine = (function () {\n    function BufferLine(cols, fillCharData, isWrapped) {\n        if (isWrapped === void 0) { isWrapped = false; }\n        this.isWrapped = isWrapped;\n        this._data = null;\n        this._combined = {};\n        if (!fillCharData) {\n            fillCharData = [0, Buffer_1.NULL_CELL_CHAR, Buffer_1.NULL_CELL_WIDTH, Buffer_1.NULL_CELL_CODE];\n        }\n        if (cols) {\n            this._data = new Uint32Array(cols * CELL_SIZE);\n            for (var i = 0; i < cols; ++i) {\n                this.set(i, fillCharData);\n            }\n        }\n        this.length = cols;\n    }\n    BufferLine.prototype.get = function (index) {\n        var stringData = this._data[index * CELL_SIZE + 1];\n        return [\n            this._data[index * CELL_SIZE + 0],\n            (stringData & 0x80000000)\n                ? this._combined[index]\n                : (stringData) ? String.fromCharCode(stringData) : '',\n            this._data[index * CELL_SIZE + 2],\n            (stringData & 0x80000000)\n                ? this._combined[index].charCodeAt(this._combined[index].length - 1)\n                : stringData\n        ];\n    };\n    BufferLine.prototype.set = function (index, value) {\n        this._data[index * CELL_SIZE + 0] = value[0];\n        if (value[1].length > 1) {\n            this._combined[index] = value[1];\n            this._data[index * CELL_SIZE + 1] = index | 0x80000000;\n        }\n        else {\n            this._data[index * CELL_SIZE + 1] = value[1].charCodeAt(0);\n        }\n        this._data[index * CELL_SIZE + 2] = value[2];\n    };\n    BufferLine.prototype.insertCells = function (pos, n, fillCharData) {\n        pos %= this.length;\n        if (n < this.length - pos) {\n            for (var i = this.length - pos - n - 1; i >= 0; --i) {\n                this.set(pos + n + i, this.get(pos + i));\n            }\n            for (var i = 0; i < n; ++i) {\n                this.set(pos + i, fillCharData);\n            }\n        }\n        else {\n            for (var i = pos; i < this.length; ++i) {\n                this.set(i, fillCharData);\n            }\n        }\n    };\n    BufferLine.prototype.deleteCells = function (pos, n, fillCharData) {\n        pos %= this.length;\n        if (n < this.length - pos) {\n            for (var i = 0; i < this.length - pos - n; ++i) {\n                this.set(pos + i, this.get(pos + n + i));\n            }\n            for (var i = this.length - n; i < this.length; ++i) {\n                this.set(i, fillCharData);\n            }\n        }\n        else {\n            for (var i = pos; i < this.length; ++i) {\n                this.set(i, fillCharData);\n            }\n        }\n    };\n    BufferLine.prototype.replaceCells = function (start, end, fillCharData) {\n        while (start < end && start < this.length) {\n            this.set(start++, fillCharData);\n        }\n    };\n    BufferLine.prototype.resize = function (cols, fillCharData, shrink) {\n        if (shrink === void 0) { shrink = false; }\n        if (cols === this.length || (!shrink && cols < this.length)) {\n            return;\n        }\n        if (cols > this.length) {\n            var data = new Uint32Array(cols * CELL_SIZE);\n            if (this.length) {\n                if (cols * CELL_SIZE < this._data.length) {\n                    data.set(this._data.subarray(0, cols * CELL_SIZE));\n                }\n                else {\n                    data.set(this._data);\n                }\n            }\n            this._data = data;\n            for (var i = this.length; i < cols; ++i) {\n                this.set(i, fillCharData);\n            }\n        }\n        else if (shrink) {\n            if (cols) {\n                var data = new Uint32Array(cols * CELL_SIZE);\n                data.set(this._data.subarray(0, cols * CELL_SIZE));\n                this._data = data;\n            }\n            else {\n                this._data = null;\n            }\n        }\n        this.length = cols;\n    };\n    BufferLine.prototype.fill = function (fillCharData) {\n        this._combined = {};\n        for (var i = 0; i < this.length; ++i) {\n            this.set(i, fillCharData);\n        }\n    };\n    BufferLine.prototype.copyFrom = function (line) {\n        if (this.length !== line.length) {\n            this._data = new Uint32Array(line._data);\n        }\n        else {\n            this._data.set(line._data);\n        }\n        this.length = line.length;\n        this._combined = {};\n        for (var el in line._combined) {\n            this._combined[el] = line._combined[el];\n        }\n        this.isWrapped = line.isWrapped;\n    };\n    BufferLine.prototype.clone = function () {\n        var newLine = new BufferLine(0);\n        newLine._data = new Uint32Array(this._data);\n        newLine.length = this.length;\n        for (var el in this._combined) {\n            newLine._combined[el] = this._combined[el];\n        }\n        newLine.isWrapped = this.isWrapped;\n        return newLine;\n    };\n    return BufferLine;\n}());\nexports.BufferLine = BufferLine;\n//# sourceMappingURL=BufferLine.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Strings = require(\"./Strings\");\nvar Platform_1 = require(\"./core/Platform\");\nvar RenderDebouncer_1 = require(\"./ui/RenderDebouncer\");\nvar Lifecycle_1 = require(\"./ui/Lifecycle\");\nvar Lifecycle_2 = require(\"./common/Lifecycle\");\nvar MAX_ROWS_TO_READ = 20;\nvar AccessibilityManager = (function (_super) {\n    __extends(AccessibilityManager, _super);\n    function AccessibilityManager(_terminal) {\n        var _this = _super.call(this) || this;\n        _this._terminal = _terminal;\n        _this._liveRegionLineCount = 0;\n        _this._charsToConsume = [];\n        _this._accessibilityTreeRoot = document.createElement('div');\n        _this._accessibilityTreeRoot.classList.add('xterm-accessibility');\n        _this._rowContainer = document.createElement('div');\n        _this._rowContainer.classList.add('xterm-accessibility-tree');\n        _this._rowElements = [];\n        for (var i = 0; i < _this._terminal.rows; i++) {\n            _this._rowElements[i] = _this._createAccessibilityTreeNode();\n            _this._rowContainer.appendChild(_this._rowElements[i]);\n        }\n        _this._topBoundaryFocusListener = function (e) { return _this._onBoundaryFocus(e, 0); };\n        _this._bottomBoundaryFocusListener = function (e) { return _this._onBoundaryFocus(e, 1); };\n        _this._rowElements[0].addEventListener('focus', _this._topBoundaryFocusListener);\n        _this._rowElements[_this._rowElements.length - 1].addEventListener('focus', _this._bottomBoundaryFocusListener);\n        _this._refreshRowsDimensions();\n        _this._accessibilityTreeRoot.appendChild(_this._rowContainer);\n        _this._renderRowsDebouncer = new RenderDebouncer_1.RenderDebouncer(_this._terminal, _this._renderRows.bind(_this));\n        _this._refreshRows();\n        _this._liveRegion = document.createElement('div');\n        _this._liveRegion.classList.add('live-region');\n        _this._liveRegion.setAttribute('aria-live', 'assertive');\n        _this._accessibilityTreeRoot.appendChild(_this._liveRegion);\n        _this._terminal.element.insertAdjacentElement('afterbegin', _this._accessibilityTreeRoot);\n        _this.register(_this._renderRowsDebouncer);\n        _this.register(_this._terminal.addDisposableListener('resize', function (data) { return _this._onResize(data.rows); }));\n        _this.register(_this._terminal.addDisposableListener('refresh', function (data) { return _this._refreshRows(data.start, data.end); }));\n        _this.register(_this._terminal.addDisposableListener('scroll', function (data) { return _this._refreshRows(); }));\n        _this.register(_this._terminal.addDisposableListener('a11y.char', function (char) { return _this._onChar(char); }));\n        _this.register(_this._terminal.addDisposableListener('linefeed', function () { return _this._onChar('\\n'); }));\n        _this.register(_this._terminal.addDisposableListener('a11y.tab', function (spaceCount) { return _this._onTab(spaceCount); }));\n        _this.register(_this._terminal.addDisposableListener('key', function (keyChar) { return _this._onKey(keyChar); }));\n        _this.register(_this._terminal.addDisposableListener('blur', function () { return _this._clearLiveRegion(); }));\n        _this.register(_this._terminal.addDisposableListener('dprchange', function () { return _this._refreshRowsDimensions(); }));\n        _this.register(_this._terminal.renderer.addDisposableListener('resize', function () { return _this._refreshRowsDimensions(); }));\n        _this.register(Lifecycle_1.addDisposableDomListener(window, 'resize', function () { return _this._refreshRowsDimensions(); }));\n        return _this;\n    }\n    AccessibilityManager.prototype.dispose = function () {\n        _super.prototype.dispose.call(this);\n        this._terminal.element.removeChild(this._accessibilityTreeRoot);\n        this._rowElements.length = 0;\n    };\n    AccessibilityManager.prototype._onBoundaryFocus = function (e, position) {\n        var boundaryElement = e.target;\n        var beforeBoundaryElement = this._rowElements[position === 0 ? 1 : this._rowElements.length - 2];\n        var posInSet = boundaryElement.getAttribute('aria-posinset');\n        var lastRowPos = position === 0 ? '1' : \"\" + this._terminal.buffer.lines.length;\n        if (posInSet === lastRowPos) {\n            return;\n        }\n        if (e.relatedTarget !== beforeBoundaryElement) {\n            return;\n        }\n        var topBoundaryElement;\n        var bottomBoundaryElement;\n        if (position === 0) {\n            topBoundaryElement = boundaryElement;\n            bottomBoundaryElement = this._rowElements.pop();\n            this._rowContainer.removeChild(bottomBoundaryElement);\n        }\n        else {\n            topBoundaryElement = this._rowElements.shift();\n            bottomBoundaryElement = boundaryElement;\n            this._rowContainer.removeChild(topBoundaryElement);\n        }\n        topBoundaryElement.removeEventListener('focus', this._topBoundaryFocusListener);\n        bottomBoundaryElement.removeEventListener('focus', this._bottomBoundaryFocusListener);\n        if (position === 0) {\n            var newElement = this._createAccessibilityTreeNode();\n            this._rowElements.unshift(newElement);\n            this._rowContainer.insertAdjacentElement('afterbegin', newElement);\n        }\n        else {\n            var newElement = this._createAccessibilityTreeNode();\n            this._rowElements.push(newElement);\n            this._rowContainer.appendChild(newElement);\n        }\n        this._rowElements[0].addEventListener('focus', this._topBoundaryFocusListener);\n        this._rowElements[this._rowElements.length - 1].addEventListener('focus', this._bottomBoundaryFocusListener);\n        this._terminal.scrollLines(position === 0 ? -1 : 1);\n        this._rowElements[position === 0 ? 1 : this._rowElements.length - 2].focus();\n        e.preventDefault();\n        e.stopImmediatePropagation();\n    };\n    AccessibilityManager.prototype._onResize = function (rows) {\n        this._rowElements[this._rowElements.length - 1].removeEventListener('focus', this._bottomBoundaryFocusListener);\n        for (var i = this._rowContainer.children.length; i < this._terminal.rows; i++) {\n            this._rowElements[i] = this._createAccessibilityTreeNode();\n            this._rowContainer.appendChild(this._rowElements[i]);\n        }\n        while (this._rowElements.length > rows) {\n            this._rowContainer.removeChild(this._rowElements.pop());\n        }\n        this._rowElements[this._rowElements.length - 1].addEventListener('focus', this._bottomBoundaryFocusListener);\n        this._refreshRowsDimensions();\n    };\n    AccessibilityManager.prototype._createAccessibilityTreeNode = function () {\n        var element = document.createElement('div');\n        element.setAttribute('role', 'listitem');\n        element.tabIndex = -1;\n        this._refreshRowDimensions(element);\n        return element;\n    };\n    AccessibilityManager.prototype._onTab = function (spaceCount) {\n        for (var i = 0; i < spaceCount; i++) {\n            this._onChar(' ');\n        }\n    };\n    AccessibilityManager.prototype._onChar = function (char) {\n        var _this = this;\n        if (this._liveRegionLineCount < MAX_ROWS_TO_READ + 1) {\n            if (this._charsToConsume.length > 0) {\n                var shiftedChar = this._charsToConsume.shift();\n                if (shiftedChar !== char) {\n                    this._announceCharacter(char);\n                }\n            }\n            else {\n                this._announceCharacter(char);\n            }\n            if (char === '\\n') {\n                this._liveRegionLineCount++;\n                if (this._liveRegionLineCount === MAX_ROWS_TO_READ + 1) {\n                    this._liveRegion.textContent += Strings.tooMuchOutput;\n                }\n            }\n            if (Platform_1.isMac) {\n                if (this._liveRegion.textContent && this._liveRegion.textContent.length > 0 && !this._liveRegion.parentNode) {\n                    setTimeout(function () {\n                        _this._accessibilityTreeRoot.appendChild(_this._liveRegion);\n                    }, 0);\n                }\n            }\n        }\n    };\n    AccessibilityManager.prototype._clearLiveRegion = function () {\n        this._liveRegion.textContent = '';\n        this._liveRegionLineCount = 0;\n        if (Platform_1.isMac) {\n            if (this._liveRegion.parentNode) {\n                this._accessibilityTreeRoot.removeChild(this._liveRegion);\n            }\n        }\n    };\n    AccessibilityManager.prototype._onKey = function (keyChar) {\n        this._clearLiveRegion();\n        this._charsToConsume.push(keyChar);\n    };\n    AccessibilityManager.prototype._refreshRows = function (start, end) {\n        this._renderRowsDebouncer.refresh(start, end);\n    };\n    AccessibilityManager.prototype._renderRows = function (start, end) {\n        var buffer = this._terminal.buffer;\n        var setSize = buffer.lines.length.toString();\n        for (var i = start; i <= end; i++) {\n            var lineData = buffer.translateBufferLineToString(buffer.ydisp + i, true);\n            var posInSet = (buffer.ydisp + i + 1).toString();\n            var element = this._rowElements[i];\n            element.textContent = lineData.length === 0 ? Strings.blankLine : lineData;\n            element.setAttribute('aria-posinset', posInSet);\n            element.setAttribute('aria-setsize', setSize);\n        }\n    };\n    AccessibilityManager.prototype._refreshRowsDimensions = function () {\n        if (!this._terminal.renderer.dimensions.actualCellHeight) {\n            return;\n        }\n        if (this._rowElements.length !== this._terminal.rows) {\n            this._onResize(this._terminal.rows);\n        }\n        for (var i = 0; i < this._terminal.rows; i++) {\n            this._refreshRowDimensions(this._rowElements[i]);\n        }\n    };\n    AccessibilityManager.prototype._refreshRowDimensions = function (element) {\n        element.style.height = this._terminal.renderer.dimensions.actualCellHeight + \"px\";\n    };\n    AccessibilityManager.prototype._announceCharacter = function (char) {\n        if (char === ' ') {\n            this._liveRegion.innerHTML += '&nbsp;';\n        }\n        else {\n            this._liveRegion.textContent += char;\n        }\n    };\n    return AccessibilityManager;\n}(Lifecycle_2.Disposable));\nexports.AccessibilityManager = AccessibilityManager;\n//# sourceMappingURL=AccessibilityManager.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar BaseRenderLayer_1 = require(\"./BaseRenderLayer\");\nvar SelectionRenderLayer = (function (_super) {\n    __extends(SelectionRenderLayer, _super);\n    function SelectionRenderLayer(container, zIndex, colors) {\n        var _this = _super.call(this, container, 'selection', zIndex, true, colors) || this;\n        _this._clearState();\n        return _this;\n    }\n    SelectionRenderLayer.prototype._clearState = function () {\n        this._state = {\n            start: null,\n            end: null,\n            columnSelectMode: null,\n            ydisp: null\n        };\n    };\n    SelectionRenderLayer.prototype.resize = function (terminal, dim) {\n        _super.prototype.resize.call(this, terminal, dim);\n        this._clearState();\n    };\n    SelectionRenderLayer.prototype.reset = function (terminal) {\n        if (this._state.start && this._state.end) {\n            this._clearState();\n            this.clearAll();\n        }\n    };\n    SelectionRenderLayer.prototype.onSelectionChanged = function (terminal, start, end, columnSelectMode) {\n        if (!this._didStateChange(start, end, columnSelectMode, terminal.buffer.ydisp)) {\n            return;\n        }\n        this.clearAll();\n        if (!start || !end) {\n            return;\n        }\n        var viewportStartRow = start[1] - terminal.buffer.ydisp;\n        var viewportEndRow = end[1] - terminal.buffer.ydisp;\n        var viewportCappedStartRow = Math.max(viewportStartRow, 0);\n        var viewportCappedEndRow = Math.min(viewportEndRow, terminal.rows - 1);\n        if (viewportCappedStartRow >= terminal.rows || viewportCappedEndRow < 0) {\n            return;\n        }\n        this._ctx.fillStyle = this._colors.selection.css;\n        if (columnSelectMode) {\n            var startCol = start[0];\n            var width = end[0] - startCol;\n            var height = viewportCappedEndRow - viewportCappedStartRow + 1;\n            this.fillCells(startCol, viewportCappedStartRow, width, height);\n        }\n        else {\n            var startCol = viewportStartRow === viewportCappedStartRow ? start[0] : 0;\n            var startRowEndCol = viewportCappedStartRow === viewportCappedEndRow ? end[0] : terminal.cols;\n            this.fillCells(startCol, viewportCappedStartRow, startRowEndCol - startCol, 1);\n            var middleRowsCount = Math.max(viewportCappedEndRow - viewportCappedStartRow - 1, 0);\n            this.fillCells(0, viewportCappedStartRow + 1, terminal.cols, middleRowsCount);\n            if (viewportCappedStartRow !== viewportCappedEndRow) {\n                var endCol = viewportEndRow === viewportCappedEndRow ? end[0] : terminal.cols;\n                this.fillCells(0, viewportCappedEndRow, endCol, 1);\n            }\n        }\n        this._state.start = [start[0], start[1]];\n        this._state.end = [end[0], end[1]];\n        this._state.columnSelectMode = columnSelectMode;\n        this._state.ydisp = terminal.buffer.ydisp;\n    };\n    SelectionRenderLayer.prototype._didStateChange = function (start, end, columnSelectMode, ydisp) {\n        return !this._areCoordinatesEqual(start, this._state.start) ||\n            !this._areCoordinatesEqual(end, this._state.end) ||\n            columnSelectMode !== this._state.columnSelectMode ||\n            ydisp !== this._state.ydisp;\n    };\n    SelectionRenderLayer.prototype._areCoordinatesEqual = function (coord1, coord2) {\n        if (!coord1 || !coord2) {\n            return false;\n        }\n        return coord1[0] === coord2[0] && coord1[1] === coord2[1];\n    };\n    return SelectionRenderLayer;\n}(BaseRenderLayer_1.BaseRenderLayer));\nexports.SelectionRenderLayer = SelectionRenderLayer;\n//# sourceMappingURL=SelectionRenderLayer.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar CHAR_DATA_CODE_INDEX = 3;\nvar NULL_CELL_CODE = 32;\nfunction winptyCompatInit(terminal) {\n    var addonTerminal = terminal;\n    var isWindows = ['Windows', 'Win16', 'Win32', 'WinCE'].indexOf(navigator.platform) >= 0;\n    if (!isWindows) {\n        return;\n    }\n    addonTerminal.on('linefeed', function () {\n        var line = addonTerminal._core.buffer.lines.get(addonTerminal._core.buffer.ybase + addonTerminal._core.buffer.y - 1);\n        var lastChar = line.get(addonTerminal.cols - 1);\n        if (lastChar[CHAR_DATA_CODE_INDEX] !== NULL_CELL_CODE) {\n            var nextLine = addonTerminal._core.buffer.lines.get(addonTerminal._core.buffer.ybase + addonTerminal._core.buffer.y);\n            nextLine.isWrapped = true;\n        }\n    });\n}\nexports.winptyCompatInit = winptyCompatInit;\nfunction apply(terminalConstructor) {\n    terminalConstructor.prototype.winptyCompatInit = function () {\n        winptyCompatInit(this);\n    };\n}\nexports.apply = apply;\n//# sourceMappingURL=winptyCompat.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar RenderDebouncer = (function () {\n    function RenderDebouncer(_terminal, _callback) {\n        this._terminal = _terminal;\n        this._callback = _callback;\n        this._animationFrame = null;\n    }\n    RenderDebouncer.prototype.dispose = function () {\n        if (this._animationFrame) {\n            window.cancelAnimationFrame(this._animationFrame);\n            this._animationFrame = null;\n        }\n    };\n    RenderDebouncer.prototype.refresh = function (rowStart, rowEnd) {\n        var _this = this;\n        rowStart = rowStart !== null && rowStart !== undefined ? rowStart : 0;\n        rowEnd = rowEnd !== null && rowEnd !== undefined ? rowEnd : this._terminal.rows - 1;\n        var isRowStartSet = this._rowStart !== undefined && this._rowStart !== null;\n        var isRowEndSet = this._rowEnd !== undefined && this._rowEnd !== null;\n        this._rowStart = isRowStartSet ? Math.min(this._rowStart, rowStart) : rowStart;\n        this._rowEnd = isRowEndSet ? Math.max(this._rowEnd, rowEnd) : rowEnd;\n        if (this._animationFrame) {\n            return;\n        }\n        this._animationFrame = window.requestAnimationFrame(function () { return _this._innerRefresh(); });\n    };\n    RenderDebouncer.prototype._innerRefresh = function () {\n        this._rowStart = Math.max(this._rowStart, 0);\n        this._rowEnd = Math.min(this._rowEnd, this._terminal.rows - 1);\n        this._callback(this._rowStart, this._rowEnd);\n        this._rowStart = null;\n        this._rowEnd = null;\n        this._animationFrame = null;\n    };\n    return RenderDebouncer;\n}());\nexports.RenderDebouncer = RenderDebouncer;\n//# sourceMappingURL=RenderDebouncer.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar EventEmitter_1 = require(\"../../common/EventEmitter\");\nvar ColorManager_1 = require(\"../ColorManager\");\nvar RenderDebouncer_1 = require(\"../../ui/RenderDebouncer\");\nvar DomRendererRowFactory_1 = require(\"./DomRendererRowFactory\");\nvar Types_1 = require(\"../atlas/Types\");\nvar TERMINAL_CLASS_PREFIX = 'xterm-dom-renderer-owner-';\nvar ROW_CONTAINER_CLASS = 'xterm-rows';\nvar FG_CLASS_PREFIX = 'xterm-fg-';\nvar BG_CLASS_PREFIX = 'xterm-bg-';\nvar FOCUS_CLASS = 'xterm-focus';\nvar SELECTION_CLASS = 'xterm-selection';\nvar nextTerminalId = 1;\nvar DomRenderer = (function (_super) {\n    __extends(DomRenderer, _super);\n    function DomRenderer(_terminal, theme) {\n        var _this = _super.call(this) || this;\n        _this._terminal = _terminal;\n        _this._terminalClass = nextTerminalId++;\n        _this._rowElements = [];\n        var allowTransparency = _this._terminal.options.allowTransparency;\n        _this.colorManager = new ColorManager_1.ColorManager(document, allowTransparency);\n        _this.setTheme(theme);\n        _this._rowContainer = document.createElement('div');\n        _this._rowContainer.classList.add(ROW_CONTAINER_CLASS);\n        _this._rowContainer.style.lineHeight = 'normal';\n        _this._rowContainer.setAttribute('aria-hidden', 'true');\n        _this._refreshRowElements(_this._terminal.cols, _this._terminal.rows);\n        _this._selectionContainer = document.createElement('div');\n        _this._selectionContainer.classList.add(SELECTION_CLASS);\n        _this._selectionContainer.setAttribute('aria-hidden', 'true');\n        _this.dimensions = {\n            scaledCharWidth: null,\n            scaledCharHeight: null,\n            scaledCellWidth: null,\n            scaledCellHeight: null,\n            scaledCharLeft: null,\n            scaledCharTop: null,\n            scaledCanvasWidth: null,\n            scaledCanvasHeight: null,\n            canvasWidth: null,\n            canvasHeight: null,\n            actualCellWidth: null,\n            actualCellHeight: null\n        };\n        _this._updateDimensions();\n        _this._renderDebouncer = new RenderDebouncer_1.RenderDebouncer(_this._terminal, _this._renderRows.bind(_this));\n        _this._rowFactory = new DomRendererRowFactory_1.DomRendererRowFactory(document);\n        _this._terminal.element.classList.add(TERMINAL_CLASS_PREFIX + _this._terminalClass);\n        _this._terminal.screenElement.appendChild(_this._rowContainer);\n        _this._terminal.screenElement.appendChild(_this._selectionContainer);\n        _this._terminal.linkifier.on(\"linkhover\", function (e) { return _this._onLinkHover(e); });\n        _this._terminal.linkifier.on(\"linkleave\", function (e) { return _this._onLinkLeave(e); });\n        return _this;\n    }\n    DomRenderer.prototype.dispose = function () {\n        this._terminal.element.classList.remove(TERMINAL_CLASS_PREFIX + this._terminalClass);\n        this._terminal.screenElement.removeChild(this._rowContainer);\n        this._terminal.screenElement.removeChild(this._selectionContainer);\n        this._terminal.screenElement.removeChild(this._themeStyleElement);\n        this._terminal.screenElement.removeChild(this._dimensionsStyleElement);\n        _super.prototype.dispose.call(this);\n    };\n    DomRenderer.prototype._updateDimensions = function () {\n        var _this = this;\n        this.dimensions.scaledCharWidth = Math.floor(this._terminal.charMeasure.width * window.devicePixelRatio);\n        this.dimensions.scaledCharHeight = Math.ceil(this._terminal.charMeasure.height * window.devicePixelRatio);\n        this.dimensions.scaledCellWidth = this.dimensions.scaledCharWidth + Math.round(this._terminal.options.letterSpacing);\n        this.dimensions.scaledCellHeight = Math.floor(this.dimensions.scaledCharHeight * this._terminal.options.lineHeight);\n        this.dimensions.scaledCharLeft = 0;\n        this.dimensions.scaledCharTop = 0;\n        this.dimensions.scaledCanvasWidth = this.dimensions.scaledCellWidth * this._terminal.cols;\n        this.dimensions.scaledCanvasHeight = this.dimensions.scaledCellHeight * this._terminal.rows;\n        this.dimensions.canvasWidth = Math.round(this.dimensions.scaledCanvasWidth / window.devicePixelRatio);\n        this.dimensions.canvasHeight = Math.round(this.dimensions.scaledCanvasHeight / window.devicePixelRatio);\n        this.dimensions.actualCellWidth = this.dimensions.canvasWidth / this._terminal.cols;\n        this.dimensions.actualCellHeight = this.dimensions.canvasHeight / this._terminal.rows;\n        this._rowElements.forEach(function (element) {\n            element.style.width = _this.dimensions.canvasWidth + \"px\";\n            element.style.height = _this.dimensions.actualCellHeight + \"px\";\n            element.style.lineHeight = _this.dimensions.actualCellHeight + \"px\";\n            element.style.overflow = 'hidden';\n        });\n        if (!this._dimensionsStyleElement) {\n            this._dimensionsStyleElement = document.createElement('style');\n            this._terminal.screenElement.appendChild(this._dimensionsStyleElement);\n        }\n        var styles = this._terminalSelector + \" .\" + ROW_CONTAINER_CLASS + \" span {\" +\n            \" display: inline-block;\" +\n            \" height: 100%;\" +\n            \" vertical-align: top;\" +\n            (\" width: \" + this.dimensions.actualCellWidth + \"px\") +\n            \"}\";\n        this._dimensionsStyleElement.innerHTML = styles;\n        this._selectionContainer.style.height = this._terminal._viewportElement.style.height;\n        this._terminal.screenElement.style.width = this.dimensions.canvasWidth + \"px\";\n        this._terminal.screenElement.style.height = this.dimensions.canvasHeight + \"px\";\n    };\n    DomRenderer.prototype.setTheme = function (theme) {\n        var _this = this;\n        if (theme) {\n            this.colorManager.setTheme(theme);\n        }\n        if (!this._themeStyleElement) {\n            this._themeStyleElement = document.createElement('style');\n            this._terminal.screenElement.appendChild(this._themeStyleElement);\n        }\n        var styles = this._terminalSelector + \" .\" + ROW_CONTAINER_CLASS + \" {\" +\n            (\" color: \" + this.colorManager.colors.foreground.css + \";\") +\n            (\" background-color: \" + this.colorManager.colors.background.css + \";\") +\n            (\" font-family: \" + this._terminal.getOption('fontFamily') + \";\") +\n            (\" font-size: \" + this._terminal.getOption('fontSize') + \"px;\") +\n            \"}\";\n        styles +=\n            this._terminalSelector + \" span:not(.\" + DomRendererRowFactory_1.BOLD_CLASS + \") {\" +\n                (\" font-weight: \" + this._terminal.options.fontWeight + \";\") +\n                \"}\" +\n                (this._terminalSelector + \" span.\" + DomRendererRowFactory_1.BOLD_CLASS + \" {\") +\n                (\" font-weight: \" + this._terminal.options.fontWeightBold + \";\") +\n                \"}\" +\n                (this._terminalSelector + \" span.\" + DomRendererRowFactory_1.ITALIC_CLASS + \" {\") +\n                \" font-style: italic;\" +\n                \"}\";\n        styles +=\n            this._terminalSelector + \" .\" + ROW_CONTAINER_CLASS + \":not(.\" + FOCUS_CLASS + \") .\" + DomRendererRowFactory_1.CURSOR_CLASS + \" {\" +\n                (\" outline: 1px solid \" + this.colorManager.colors.cursor.css + \";\") +\n                \" outline-offset: -1px;\" +\n                \"}\" +\n                (this._terminalSelector + \" .\" + ROW_CONTAINER_CLASS + \".\" + FOCUS_CLASS + \" .\" + DomRendererRowFactory_1.CURSOR_CLASS + \".\" + DomRendererRowFactory_1.CURSOR_STYLE_BLOCK_CLASS + \" {\") +\n                (\" background-color: \" + this.colorManager.colors.cursor.css + \";\") +\n                (\" color: \" + this.colorManager.colors.cursorAccent.css + \";\") +\n                \"}\" +\n                (this._terminalSelector + \" .\" + ROW_CONTAINER_CLASS + \".\" + FOCUS_CLASS + \" .\" + DomRendererRowFactory_1.CURSOR_CLASS + \".\" + DomRendererRowFactory_1.CURSOR_STYLE_BAR_CLASS + \" {\") +\n                (\" box-shadow: 1px 0 0 \" + this.colorManager.colors.cursor.css + \" inset;\") +\n                \"}\" +\n                (this._terminalSelector + \" .\" + ROW_CONTAINER_CLASS + \".\" + FOCUS_CLASS + \" .\" + DomRendererRowFactory_1.CURSOR_CLASS + \".\" + DomRendererRowFactory_1.CURSOR_STYLE_UNDERLINE_CLASS + \" {\") +\n                (\" box-shadow: 0 -1px 0 \" + this.colorManager.colors.cursor.css + \" inset;\") +\n                \"}\";\n        styles +=\n            this._terminalSelector + \" .\" + SELECTION_CLASS + \" {\" +\n                \" position: absolute;\" +\n                \" top: 0;\" +\n                \" left: 0;\" +\n                \" z-index: 1;\" +\n                \" pointer-events: none;\" +\n                \"}\" +\n                (this._terminalSelector + \" .\" + SELECTION_CLASS + \" div {\") +\n                \" position: absolute;\" +\n                (\" background-color: \" + this.colorManager.colors.selection.css + \";\") +\n                \"}\";\n        this.colorManager.colors.ansi.forEach(function (c, i) {\n            styles +=\n                _this._terminalSelector + \" .\" + FG_CLASS_PREFIX + i + \" { color: \" + c.css + \"; }\" +\n                    (_this._terminalSelector + \" .\" + BG_CLASS_PREFIX + i + \" { background-color: \" + c.css + \"; }\");\n        });\n        styles +=\n            this._terminalSelector + \" .\" + FG_CLASS_PREFIX + Types_1.INVERTED_DEFAULT_COLOR + \" { color: \" + this.colorManager.colors.background.css + \"; }\" +\n                (this._terminalSelector + \" .\" + BG_CLASS_PREFIX + Types_1.INVERTED_DEFAULT_COLOR + \" { background-color: \" + this.colorManager.colors.foreground.css + \"; }\");\n        this._themeStyleElement.innerHTML = styles;\n        return this.colorManager.colors;\n    };\n    DomRenderer.prototype.onWindowResize = function (devicePixelRatio) {\n        this._updateDimensions();\n    };\n    DomRenderer.prototype._refreshRowElements = function (cols, rows) {\n        for (var i = this._rowElements.length; i <= rows; i++) {\n            var row = document.createElement('div');\n            this._rowContainer.appendChild(row);\n            this._rowElements.push(row);\n        }\n        while (this._rowElements.length > rows) {\n            this._rowContainer.removeChild(this._rowElements.pop());\n        }\n    };\n    DomRenderer.prototype.onResize = function (cols, rows) {\n        this._refreshRowElements(cols, rows);\n        this._updateDimensions();\n    };\n    DomRenderer.prototype.onCharSizeChanged = function () {\n        this._updateDimensions();\n    };\n    DomRenderer.prototype.onBlur = function () {\n        this._rowContainer.classList.remove(FOCUS_CLASS);\n    };\n    DomRenderer.prototype.onFocus = function () {\n        this._rowContainer.classList.add(FOCUS_CLASS);\n    };\n    DomRenderer.prototype.onSelectionChanged = function (start, end, columnSelectMode) {\n        while (this._selectionContainer.children.length) {\n            this._selectionContainer.removeChild(this._selectionContainer.children[0]);\n        }\n        if (!start || !end) {\n            return;\n        }\n        var viewportStartRow = start[1] - this._terminal.buffer.ydisp;\n        var viewportEndRow = end[1] - this._terminal.buffer.ydisp;\n        var viewportCappedStartRow = Math.max(viewportStartRow, 0);\n        var viewportCappedEndRow = Math.min(viewportEndRow, this._terminal.rows - 1);\n        if (viewportCappedStartRow >= this._terminal.rows || viewportCappedEndRow < 0) {\n            return;\n        }\n        var documentFragment = document.createDocumentFragment();\n        if (columnSelectMode) {\n            documentFragment.appendChild(this._createSelectionElement(viewportCappedStartRow, start[0], end[0], viewportCappedEndRow - viewportCappedStartRow + 1));\n        }\n        else {\n            var startCol = viewportStartRow === viewportCappedStartRow ? start[0] : 0;\n            var endCol = viewportCappedStartRow === viewportCappedEndRow ? end[0] : this._terminal.cols;\n            documentFragment.appendChild(this._createSelectionElement(viewportCappedStartRow, startCol, endCol));\n            var middleRowsCount = viewportCappedEndRow - viewportCappedStartRow - 1;\n            documentFragment.appendChild(this._createSelectionElement(viewportCappedStartRow + 1, 0, this._terminal.cols, middleRowsCount));\n            if (viewportCappedStartRow !== viewportCappedEndRow) {\n                var endCol_1 = viewportEndRow === viewportCappedEndRow ? end[0] : this._terminal.cols;\n                documentFragment.appendChild(this._createSelectionElement(viewportCappedEndRow, 0, endCol_1));\n            }\n        }\n        this._selectionContainer.appendChild(documentFragment);\n    };\n    DomRenderer.prototype._createSelectionElement = function (row, colStart, colEnd, rowCount) {\n        if (rowCount === void 0) { rowCount = 1; }\n        var element = document.createElement('div');\n        element.style.height = rowCount * this.dimensions.actualCellHeight + \"px\";\n        element.style.top = row * this.dimensions.actualCellHeight + \"px\";\n        element.style.left = colStart * this.dimensions.actualCellWidth + \"px\";\n        element.style.width = this.dimensions.actualCellWidth * (colEnd - colStart) + \"px\";\n        return element;\n    };\n    DomRenderer.prototype.onCursorMove = function () {\n    };\n    DomRenderer.prototype.onOptionsChanged = function () {\n        this._updateDimensions();\n        this.setTheme(undefined);\n        this._terminal.refresh(0, this._terminal.rows - 1);\n    };\n    DomRenderer.prototype.clear = function () {\n        this._rowElements.forEach(function (e) { return e.innerHTML = ''; });\n    };\n    DomRenderer.prototype.refreshRows = function (start, end) {\n        this._renderDebouncer.refresh(start, end);\n    };\n    DomRenderer.prototype._renderRows = function (start, end) {\n        var terminal = this._terminal;\n        var cursorAbsoluteY = terminal.buffer.ybase + terminal.buffer.y;\n        var cursorX = this._terminal.buffer.x;\n        for (var y = start; y <= end; y++) {\n            var rowElement = this._rowElements[y];\n            rowElement.innerHTML = '';\n            var row = y + terminal.buffer.ydisp;\n            var lineData = terminal.buffer.lines.get(row);\n            var cursorStyle = terminal.options.cursorStyle;\n            rowElement.appendChild(this._rowFactory.createRow(lineData, row === cursorAbsoluteY, cursorStyle, cursorX, this.dimensions.actualCellWidth, terminal.cols));\n        }\n        this._terminal.emit('refresh', { start: start, end: end });\n    };\n    Object.defineProperty(DomRenderer.prototype, \"_terminalSelector\", {\n        get: function () {\n            return \".\" + TERMINAL_CLASS_PREFIX + this._terminalClass;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    DomRenderer.prototype.registerCharacterJoiner = function (handler) { return -1; };\n    DomRenderer.prototype.deregisterCharacterJoiner = function (joinerId) { return false; };\n    DomRenderer.prototype._onLinkHover = function (e) {\n        this._setCellUnderline(e.x1, e.x2, e.y1, e.y2, e.cols, true);\n    };\n    DomRenderer.prototype._onLinkLeave = function (e) {\n        this._setCellUnderline(e.x1, e.x2, e.y1, e.y2, e.cols, false);\n    };\n    DomRenderer.prototype._setCellUnderline = function (x, x2, y, y2, cols, enabled) {\n        while (x !== x2 || y !== y2) {\n            var row = this._rowElements[y];\n            if (!row) {\n                return;\n            }\n            var span = row.children[x];\n            span.style.textDecoration = enabled ? 'underline' : 'none';\n            x = (x + 1) % cols;\n            if (x === 0) {\n                y++;\n            }\n        }\n    };\n    return DomRenderer;\n}(EventEmitter_1.EventEmitter));\nexports.DomRenderer = DomRenderer;\n//# sourceMappingURL=DomRenderer.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Lifecycle_1 = require(\"../common/Lifecycle\");\nvar Lifecycle_2 = require(\"./Lifecycle\");\nvar HOVER_DURATION = 500;\nvar MouseZoneManager = (function (_super) {\n    __extends(MouseZoneManager, _super);\n    function MouseZoneManager(_terminal) {\n        var _this = _super.call(this) || this;\n        _this._terminal = _terminal;\n        _this._zones = [];\n        _this._areZonesActive = false;\n        _this._tooltipTimeout = null;\n        _this._currentZone = null;\n        _this._lastHoverCoords = [null, null];\n        _this.register(Lifecycle_2.addDisposableDomListener(_this._terminal.element, 'mousedown', function (e) { return _this._onMouseDown(e); }));\n        _this._mouseMoveListener = function (e) { return _this._onMouseMove(e); };\n        _this._clickListener = function (e) { return _this._onClick(e); };\n        return _this;\n    }\n    MouseZoneManager.prototype.dispose = function () {\n        _super.prototype.dispose.call(this);\n        this._deactivate();\n    };\n    MouseZoneManager.prototype.add = function (zone) {\n        this._zones.push(zone);\n        if (this._zones.length === 1) {\n            this._activate();\n        }\n    };\n    MouseZoneManager.prototype.clearAll = function (start, end) {\n        if (this._zones.length === 0) {\n            return;\n        }\n        if (!end) {\n            start = 0;\n            end = this._terminal.rows - 1;\n        }\n        for (var i = 0; i < this._zones.length; i++) {\n            var zone = this._zones[i];\n            if ((zone.y1 > start && zone.y1 <= end + 1) ||\n                (zone.y2 > start && zone.y2 <= end + 1) ||\n                (zone.y1 < start && zone.y2 > end + 1)) {\n                if (this._currentZone && this._currentZone === zone) {\n                    this._currentZone.leaveCallback();\n                    this._currentZone = null;\n                }\n                this._zones.splice(i--, 1);\n            }\n        }\n        if (this._zones.length === 0) {\n            this._deactivate();\n        }\n    };\n    MouseZoneManager.prototype._activate = function () {\n        if (!this._areZonesActive) {\n            this._areZonesActive = true;\n            this._terminal.element.addEventListener('mousemove', this._mouseMoveListener);\n            this._terminal.element.addEventListener('click', this._clickListener);\n        }\n    };\n    MouseZoneManager.prototype._deactivate = function () {\n        if (this._areZonesActive) {\n            this._areZonesActive = false;\n            this._terminal.element.removeEventListener('mousemove', this._mouseMoveListener);\n            this._terminal.element.removeEventListener('click', this._clickListener);\n        }\n    };\n    MouseZoneManager.prototype._onMouseMove = function (e) {\n        if (this._lastHoverCoords[0] !== e.pageX || this._lastHoverCoords[1] !== e.pageY) {\n            this._onHover(e);\n            this._lastHoverCoords = [e.pageX, e.pageY];\n        }\n    };\n    MouseZoneManager.prototype._onHover = function (e) {\n        var _this = this;\n        var zone = this._findZoneEventAt(e);\n        if (zone === this._currentZone) {\n            return;\n        }\n        if (this._currentZone) {\n            this._currentZone.leaveCallback();\n            this._currentZone = null;\n            if (this._tooltipTimeout) {\n                clearTimeout(this._tooltipTimeout);\n            }\n        }\n        if (!zone) {\n            return;\n        }\n        this._currentZone = zone;\n        if (zone.hoverCallback) {\n            zone.hoverCallback(e);\n        }\n        this._tooltipTimeout = setTimeout(function () { return _this._onTooltip(e); }, HOVER_DURATION);\n    };\n    MouseZoneManager.prototype._onTooltip = function (e) {\n        this._tooltipTimeout = null;\n        var zone = this._findZoneEventAt(e);\n        if (zone && zone.tooltipCallback) {\n            zone.tooltipCallback(e);\n        }\n    };\n    MouseZoneManager.prototype._onMouseDown = function (e) {\n        if (!this._areZonesActive) {\n            return;\n        }\n        var zone = this._findZoneEventAt(e);\n        if (zone) {\n            if (zone.willLinkActivate(e)) {\n                e.preventDefault();\n                e.stopImmediatePropagation();\n            }\n        }\n    };\n    MouseZoneManager.prototype._onClick = function (e) {\n        var zone = this._findZoneEventAt(e);\n        if (zone) {\n            zone.clickCallback(e);\n            e.preventDefault();\n            e.stopImmediatePropagation();\n        }\n    };\n    MouseZoneManager.prototype._findZoneEventAt = function (e) {\n        var coords = this._terminal.mouseHelper.getCoords(e, this._terminal.screenElement, this._terminal.charMeasure, this._terminal.cols, this._terminal.rows);\n        if (!coords) {\n            return null;\n        }\n        var x = coords[0];\n        var y = coords[1];\n        for (var i = 0; i < this._zones.length; i++) {\n            var zone = this._zones[i];\n            if (zone.y1 === zone.y2) {\n                if (y === zone.y1 && x >= zone.x1 && x < zone.x2) {\n                    return zone;\n                }\n            }\n            else {\n                if ((y === zone.y1 && x >= zone.x1) ||\n                    (y === zone.y2 && x < zone.x2) ||\n                    (y > zone.y1 && y < zone.y2)) {\n                    return zone;\n                }\n            }\n        }\n        return null;\n    };\n    return MouseZoneManager;\n}(Lifecycle_1.Disposable));\nexports.MouseZoneManager = MouseZoneManager;\nvar MouseZone = (function () {\n    function MouseZone(x1, y1, x2, y2, clickCallback, hoverCallback, tooltipCallback, leaveCallback, willLinkActivate) {\n        this.x1 = x1;\n        this.y1 = y1;\n        this.x2 = x2;\n        this.y2 = y2;\n        this.clickCallback = clickCallback;\n        this.hoverCallback = hoverCallback;\n        this.tooltipCallback = tooltipCallback;\n        this.leaveCallback = leaveCallback;\n        this.willLinkActivate = willLinkActivate;\n    }\n    return MouseZone;\n}());\nexports.MouseZone = MouseZone;\n//# sourceMappingURL=MouseZoneManager.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar CircularList_1 = require(\"./common/CircularList\");\nvar EventEmitter_1 = require(\"./common/EventEmitter\");\nvar BufferLine_1 = require(\"./BufferLine\");\nvar Types_1 = require(\"./renderer/atlas/Types\");\nexports.DEFAULT_ATTR = (0 << 18) | (Types_1.DEFAULT_COLOR << 9) | (256 << 0);\nexports.CHAR_DATA_ATTR_INDEX = 0;\nexports.CHAR_DATA_CHAR_INDEX = 1;\nexports.CHAR_DATA_WIDTH_INDEX = 2;\nexports.CHAR_DATA_CODE_INDEX = 3;\nexports.MAX_BUFFER_SIZE = 4294967295;\nexports.NULL_CELL_CHAR = ' ';\nexports.NULL_CELL_WIDTH = 1;\nexports.NULL_CELL_CODE = 32;\nvar Buffer = (function () {\n    function Buffer(_terminal, _hasScrollback) {\n        this._terminal = _terminal;\n        this._hasScrollback = _hasScrollback;\n        this.markers = [];\n        this.clear();\n    }\n    Buffer.prototype.setBufferLineFactory = function (type) {\n        if (type === 'JsArray') {\n            if (this._bufferLineConstructor !== BufferLine_1.BufferLineJSArray) {\n                this._bufferLineConstructor = BufferLine_1.BufferLineJSArray;\n                this._recreateLines();\n            }\n        }\n        else {\n            if (this._bufferLineConstructor !== BufferLine_1.BufferLine) {\n                this._bufferLineConstructor = BufferLine_1.BufferLine;\n                this._recreateLines();\n            }\n        }\n    };\n    Buffer.prototype._recreateLines = function () {\n        if (!this.lines)\n            return;\n        for (var i = 0; i < this.lines.length; ++i) {\n            var oldLine = this.lines.get(i);\n            var newLine = new this._bufferLineConstructor(oldLine.length);\n            for (var j = 0; j < oldLine.length; ++j) {\n                newLine.set(j, oldLine.get(j));\n            }\n            this.lines.set(i, newLine);\n        }\n    };\n    Buffer.prototype.getBlankLine = function (attr, isWrapped) {\n        var fillCharData = [attr, exports.NULL_CELL_CHAR, exports.NULL_CELL_WIDTH, exports.NULL_CELL_CODE];\n        return new this._bufferLineConstructor(this._terminal.cols, fillCharData, isWrapped);\n    };\n    Object.defineProperty(Buffer.prototype, \"hasScrollback\", {\n        get: function () {\n            return this._hasScrollback && this.lines.maxLength > this._terminal.rows;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Buffer.prototype, \"isCursorInViewport\", {\n        get: function () {\n            var absoluteY = this.ybase + this.y;\n            var relativeY = absoluteY - this.ydisp;\n            return (relativeY >= 0 && relativeY < this._terminal.rows);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Buffer.prototype._getCorrectBufferLength = function (rows) {\n        if (!this._hasScrollback) {\n            return rows;\n        }\n        var correctBufferLength = rows + this._terminal.options.scrollback;\n        return correctBufferLength > exports.MAX_BUFFER_SIZE ? exports.MAX_BUFFER_SIZE : correctBufferLength;\n    };\n    Buffer.prototype.fillViewportRows = function (fillAttr) {\n        if (this.lines.length === 0) {\n            if (fillAttr === undefined) {\n                fillAttr = exports.DEFAULT_ATTR;\n            }\n            var i = this._terminal.rows;\n            while (i--) {\n                this.lines.push(this.getBlankLine(fillAttr));\n            }\n        }\n    };\n    Buffer.prototype.clear = function () {\n        this.setBufferLineFactory(this._terminal.options.experimentalBufferLineImpl);\n        this.ydisp = 0;\n        this.ybase = 0;\n        this.y = 0;\n        this.x = 0;\n        this.lines = new CircularList_1.CircularList(this._getCorrectBufferLength(this._terminal.rows));\n        this.scrollTop = 0;\n        this.scrollBottom = this._terminal.rows - 1;\n        this.setupTabStops();\n    };\n    Buffer.prototype.resize = function (newCols, newRows) {\n        var newMaxLength = this._getCorrectBufferLength(newRows);\n        if (newMaxLength > this.lines.maxLength) {\n            this.lines.maxLength = newMaxLength;\n        }\n        if (this.lines.length > 0) {\n            if (this._terminal.cols < newCols) {\n                var ch = [exports.DEFAULT_ATTR, exports.NULL_CELL_CHAR, exports.NULL_CELL_WIDTH, exports.NULL_CELL_CODE];\n                for (var i = 0; i < this.lines.length; i++) {\n                    this.lines.get(i).resize(newCols, ch);\n                }\n            }\n            var addToY = 0;\n            if (this._terminal.rows < newRows) {\n                for (var y = this._terminal.rows; y < newRows; y++) {\n                    if (this.lines.length < newRows + this.ybase) {\n                        if (this.ybase > 0 && this.lines.length <= this.ybase + this.y + addToY + 1) {\n                            this.ybase--;\n                            addToY++;\n                            if (this.ydisp > 0) {\n                                this.ydisp--;\n                            }\n                        }\n                        else {\n                            var fillCharData = [exports.DEFAULT_ATTR, exports.NULL_CELL_CHAR, exports.NULL_CELL_WIDTH, exports.NULL_CELL_CODE];\n                            this.lines.push(new this._bufferLineConstructor(newCols, fillCharData));\n                        }\n                    }\n                }\n            }\n            else {\n                for (var y = this._terminal.rows; y > newRows; y--) {\n                    if (this.lines.length > newRows + this.ybase) {\n                        if (this.lines.length > this.ybase + this.y + 1) {\n                            this.lines.pop();\n                        }\n                        else {\n                            this.ybase++;\n                            this.ydisp++;\n                        }\n                    }\n                }\n            }\n            if (newMaxLength < this.lines.maxLength) {\n                var amountToTrim = this.lines.length - newMaxLength;\n                if (amountToTrim > 0) {\n                    this.lines.trimStart(amountToTrim);\n                    this.ybase = Math.max(this.ybase - amountToTrim, 0);\n                    this.ydisp = Math.max(this.ydisp - amountToTrim, 0);\n                }\n                this.lines.maxLength = newMaxLength;\n            }\n            this.x = Math.min(this.x, newCols - 1);\n            this.y = Math.min(this.y, newRows - 1);\n            if (addToY) {\n                this.y += addToY;\n            }\n            this.savedY = Math.min(this.savedY, newRows - 1);\n            this.savedX = Math.min(this.savedX, newCols - 1);\n            this.scrollTop = 0;\n        }\n        this.scrollBottom = newRows - 1;\n    };\n    Buffer.prototype.stringIndexToBufferIndex = function (lineIndex, stringIndex) {\n        while (stringIndex) {\n            var line = this.lines.get(lineIndex);\n            if (!line) {\n                [-1, -1];\n            }\n            for (var i = 0; i < line.length; ++i) {\n                stringIndex -= line.get(i)[exports.CHAR_DATA_CHAR_INDEX].length;\n                if (stringIndex < 0) {\n                    return [lineIndex, i];\n                }\n            }\n            lineIndex++;\n        }\n        return [lineIndex, 0];\n    };\n    Buffer.prototype.translateBufferLineToString = function (lineIndex, trimRight, startCol, endCol) {\n        if (startCol === void 0) { startCol = 0; }\n        if (endCol === void 0) { endCol = null; }\n        var lineString = '';\n        var line = this.lines.get(lineIndex);\n        if (!line) {\n            return '';\n        }\n        var startIndex = startCol;\n        if (endCol === null) {\n            endCol = line.length;\n        }\n        var endIndex = endCol;\n        for (var i = 0; i < line.length; i++) {\n            var char = line.get(i);\n            lineString += char[exports.CHAR_DATA_CHAR_INDEX];\n            if (char[exports.CHAR_DATA_WIDTH_INDEX] === 0) {\n                if (startCol >= i) {\n                    startIndex--;\n                }\n                if (endCol > i) {\n                    endIndex--;\n                }\n            }\n            else {\n                if (char[exports.CHAR_DATA_CHAR_INDEX].length > 1) {\n                    if (startCol > i) {\n                        startIndex += char[exports.CHAR_DATA_CHAR_INDEX].length - 1;\n                    }\n                    if (endCol > i) {\n                        endIndex += char[exports.CHAR_DATA_CHAR_INDEX].length - 1;\n                    }\n                }\n            }\n        }\n        if (trimRight) {\n            var rightWhitespaceIndex = lineString.search(/\\s+$/);\n            if (rightWhitespaceIndex !== -1) {\n                endIndex = Math.min(endIndex, rightWhitespaceIndex);\n            }\n            if (endIndex <= startIndex) {\n                return '';\n            }\n        }\n        return lineString.substring(startIndex, endIndex);\n    };\n    Buffer.prototype.getWrappedRangeForLine = function (y) {\n        var first = y;\n        var last = y;\n        while (first > 0 && this.lines.get(first).isWrapped) {\n            first--;\n        }\n        while (last + 1 < this.lines.length && this.lines.get(last + 1).isWrapped) {\n            last++;\n        }\n        return { first: first, last: last };\n    };\n    Buffer.prototype.setupTabStops = function (i) {\n        if (i !== null && i !== undefined) {\n            if (!this.tabs[i]) {\n                i = this.prevStop(i);\n            }\n        }\n        else {\n            this.tabs = {};\n            i = 0;\n        }\n        for (; i < this._terminal.cols; i += this._terminal.options.tabStopWidth) {\n            this.tabs[i] = true;\n        }\n    };\n    Buffer.prototype.prevStop = function (x) {\n        if (x === null || x === undefined) {\n            x = this.x;\n        }\n        while (!this.tabs[--x] && x > 0)\n            ;\n        return x >= this._terminal.cols ? this._terminal.cols - 1 : x < 0 ? 0 : x;\n    };\n    Buffer.prototype.nextStop = function (x) {\n        if (x === null || x === undefined) {\n            x = this.x;\n        }\n        while (!this.tabs[++x] && x < this._terminal.cols)\n            ;\n        return x >= this._terminal.cols ? this._terminal.cols - 1 : x < 0 ? 0 : x;\n    };\n    Buffer.prototype.addMarker = function (y) {\n        var _this = this;\n        var marker = new Marker(y);\n        this.markers.push(marker);\n        marker.register(this.lines.addDisposableListener('trim', function (amount) {\n            marker.line -= amount;\n            if (marker.line < 0) {\n                marker.dispose();\n            }\n        }));\n        marker.register(marker.addDisposableListener('dispose', function () { return _this._removeMarker(marker); }));\n        return marker;\n    };\n    Buffer.prototype._removeMarker = function (marker) {\n        this.markers.splice(this.markers.indexOf(marker), 1);\n    };\n    Buffer.prototype.iterator = function (trimRight, startIndex, endIndex, startOverscan, endOverscan) {\n        return new BufferStringIterator(this, trimRight, startIndex, endIndex, startOverscan, endOverscan);\n    };\n    return Buffer;\n}());\nexports.Buffer = Buffer;\nvar Marker = (function (_super) {\n    __extends(Marker, _super);\n    function Marker(line) {\n        var _this = _super.call(this) || this;\n        _this.line = line;\n        _this._id = Marker._nextId++;\n        _this.isDisposed = false;\n        return _this;\n    }\n    Object.defineProperty(Marker.prototype, \"id\", {\n        get: function () { return this._id; },\n        enumerable: true,\n        configurable: true\n    });\n    Marker.prototype.dispose = function () {\n        if (this.isDisposed) {\n            return;\n        }\n        this.isDisposed = true;\n        this.emit('dispose');\n        _super.prototype.dispose.call(this);\n    };\n    Marker._nextId = 1;\n    return Marker;\n}(EventEmitter_1.EventEmitter));\nexports.Marker = Marker;\nvar BufferStringIterator = (function () {\n    function BufferStringIterator(_buffer, _trimRight, _startIndex, _endIndex, _startOverscan, _endOverscan) {\n        if (_startIndex === void 0) { _startIndex = 0; }\n        if (_endIndex === void 0) { _endIndex = _buffer.lines.length; }\n        if (_startOverscan === void 0) { _startOverscan = 0; }\n        if (_endOverscan === void 0) { _endOverscan = 0; }\n        this._buffer = _buffer;\n        this._trimRight = _trimRight;\n        this._startIndex = _startIndex;\n        this._endIndex = _endIndex;\n        this._startOverscan = _startOverscan;\n        this._endOverscan = _endOverscan;\n        if (this._startIndex < 0) {\n            this._startIndex = 0;\n        }\n        if (this._endIndex > this._buffer.lines.length) {\n            this._endIndex = this._buffer.lines.length;\n        }\n        this._current = this._startIndex;\n    }\n    BufferStringIterator.prototype.hasNext = function () {\n        return this._current < this._endIndex;\n    };\n    BufferStringIterator.prototype.next = function () {\n        var range = this._buffer.getWrappedRangeForLine(this._current);\n        if (range.first < this._startIndex - this._startOverscan) {\n            range.first = this._startIndex - this._startOverscan;\n        }\n        if (range.last > this._endIndex + this._endOverscan) {\n            range.last = this._endIndex + this._endOverscan;\n        }\n        range.first = Math.max(range.first, 0);\n        range.last = Math.min(range.last, this._buffer.lines.length);\n        var result = '';\n        for (var i = range.first; i <= range.last; ++i) {\n            result += this._buffer.translateBufferLineToString(i, (this._trimRight) ? i === range.last : false);\n        }\n        this._current = range.last + 1;\n        return { range: range, content: result };\n    };\n    return BufferStringIterator;\n}());\nexports.BufferStringIterator = BufferStringIterator;\n//# sourceMappingURL=Buffer.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction addDisposableDomListener(node, type, handler, useCapture) {\n    node.addEventListener(type, handler, useCapture);\n    return {\n        dispose: function () {\n            if (!handler) {\n                return;\n            }\n            node.removeEventListener(type, handler, useCapture);\n            node = null;\n            handler = null;\n        }\n    };\n}\nexports.addDisposableDomListener = addDisposableDomListener;\n//# sourceMappingURL=Lifecycle.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar TextRenderLayer_1 = require(\"./TextRenderLayer\");\nvar SelectionRenderLayer_1 = require(\"./SelectionRenderLayer\");\nvar CursorRenderLayer_1 = require(\"./CursorRenderLayer\");\nvar ColorManager_1 = require(\"./ColorManager\");\nvar LinkRenderLayer_1 = require(\"./LinkRenderLayer\");\nvar EventEmitter_1 = require(\"../common/EventEmitter\");\nvar RenderDebouncer_1 = require(\"../ui/RenderDebouncer\");\nvar ScreenDprMonitor_1 = require(\"../ui/ScreenDprMonitor\");\nvar CharacterJoinerRegistry_1 = require(\"../renderer/CharacterJoinerRegistry\");\nvar Renderer = (function (_super) {\n    __extends(Renderer, _super);\n    function Renderer(_terminal, theme) {\n        var _this = _super.call(this) || this;\n        _this._terminal = _terminal;\n        _this._isPaused = false;\n        _this._needsFullRefresh = false;\n        var allowTransparency = _this._terminal.options.allowTransparency;\n        _this.colorManager = new ColorManager_1.ColorManager(document, allowTransparency);\n        _this._characterJoinerRegistry = new CharacterJoinerRegistry_1.CharacterJoinerRegistry(_terminal);\n        if (theme) {\n            _this.colorManager.setTheme(theme);\n        }\n        _this._renderLayers = [\n            new TextRenderLayer_1.TextRenderLayer(_this._terminal.screenElement, 0, _this.colorManager.colors, _this._characterJoinerRegistry, allowTransparency),\n            new SelectionRenderLayer_1.SelectionRenderLayer(_this._terminal.screenElement, 1, _this.colorManager.colors),\n            new LinkRenderLayer_1.LinkRenderLayer(_this._terminal.screenElement, 2, _this.colorManager.colors, _this._terminal),\n            new CursorRenderLayer_1.CursorRenderLayer(_this._terminal.screenElement, 3, _this.colorManager.colors)\n        ];\n        _this.dimensions = {\n            scaledCharWidth: null,\n            scaledCharHeight: null,\n            scaledCellWidth: null,\n            scaledCellHeight: null,\n            scaledCharLeft: null,\n            scaledCharTop: null,\n            scaledCanvasWidth: null,\n            scaledCanvasHeight: null,\n            canvasWidth: null,\n            canvasHeight: null,\n            actualCellWidth: null,\n            actualCellHeight: null\n        };\n        _this._devicePixelRatio = window.devicePixelRatio;\n        _this._updateDimensions();\n        _this.onOptionsChanged();\n        _this._renderDebouncer = new RenderDebouncer_1.RenderDebouncer(_this._terminal, _this._renderRows.bind(_this));\n        _this._screenDprMonitor = new ScreenDprMonitor_1.ScreenDprMonitor();\n        _this._screenDprMonitor.setListener(function () { return _this.onWindowResize(window.devicePixelRatio); });\n        _this.register(_this._screenDprMonitor);\n        if ('IntersectionObserver' in window) {\n            var observer_1 = new IntersectionObserver(function (e) { return _this.onIntersectionChange(e[0]); }, { threshold: 0 });\n            observer_1.observe(_this._terminal.element);\n            _this.register({ dispose: function () { return observer_1.disconnect(); } });\n        }\n        return _this;\n    }\n    Renderer.prototype.dispose = function () {\n        _super.prototype.dispose.call(this);\n        this._renderLayers.forEach(function (l) { return l.dispose(); });\n    };\n    Renderer.prototype.onIntersectionChange = function (entry) {\n        this._isPaused = entry.intersectionRatio === 0;\n        if (!this._isPaused && this._needsFullRefresh) {\n            this._terminal.refresh(0, this._terminal.rows - 1);\n        }\n    };\n    Renderer.prototype.onWindowResize = function (devicePixelRatio) {\n        if (this._devicePixelRatio !== devicePixelRatio) {\n            this._devicePixelRatio = devicePixelRatio;\n            this.onResize(this._terminal.cols, this._terminal.rows);\n        }\n    };\n    Renderer.prototype.setTheme = function (theme) {\n        var _this = this;\n        this.colorManager.setTheme(theme);\n        this._renderLayers.forEach(function (l) {\n            l.onThemeChanged(_this._terminal, _this.colorManager.colors);\n            l.reset(_this._terminal);\n        });\n        if (this._isPaused) {\n            this._needsFullRefresh = true;\n        }\n        else {\n            this._terminal.refresh(0, this._terminal.rows - 1);\n        }\n        return this.colorManager.colors;\n    };\n    Renderer.prototype.onResize = function (cols, rows) {\n        var _this = this;\n        this._updateDimensions();\n        this._renderLayers.forEach(function (l) { return l.resize(_this._terminal, _this.dimensions); });\n        if (this._isPaused) {\n            this._needsFullRefresh = true;\n        }\n        else {\n            this._terminal.refresh(0, this._terminal.rows - 1);\n        }\n        this._terminal.screenElement.style.width = this.dimensions.canvasWidth + \"px\";\n        this._terminal.screenElement.style.height = this.dimensions.canvasHeight + \"px\";\n        this.emit('resize', {\n            width: this.dimensions.canvasWidth,\n            height: this.dimensions.canvasHeight\n        });\n    };\n    Renderer.prototype.onCharSizeChanged = function () {\n        this.onResize(this._terminal.cols, this._terminal.rows);\n    };\n    Renderer.prototype.onBlur = function () {\n        var _this = this;\n        this._runOperation(function (l) { return l.onBlur(_this._terminal); });\n    };\n    Renderer.prototype.onFocus = function () {\n        var _this = this;\n        this._runOperation(function (l) { return l.onFocus(_this._terminal); });\n    };\n    Renderer.prototype.onSelectionChanged = function (start, end, columnSelectMode) {\n        var _this = this;\n        if (columnSelectMode === void 0) { columnSelectMode = false; }\n        this._runOperation(function (l) { return l.onSelectionChanged(_this._terminal, start, end, columnSelectMode); });\n    };\n    Renderer.prototype.onCursorMove = function () {\n        var _this = this;\n        this._runOperation(function (l) { return l.onCursorMove(_this._terminal); });\n    };\n    Renderer.prototype.onOptionsChanged = function () {\n        var _this = this;\n        this.colorManager.allowTransparency = this._terminal.options.allowTransparency;\n        this._runOperation(function (l) { return l.onOptionsChanged(_this._terminal); });\n    };\n    Renderer.prototype.clear = function () {\n        var _this = this;\n        this._runOperation(function (l) { return l.reset(_this._terminal); });\n    };\n    Renderer.prototype._runOperation = function (operation) {\n        if (this._isPaused) {\n            this._needsFullRefresh = true;\n        }\n        else {\n            this._renderLayers.forEach(function (l) { return operation(l); });\n        }\n    };\n    Renderer.prototype.refreshRows = function (start, end) {\n        if (this._isPaused) {\n            this._needsFullRefresh = true;\n            return;\n        }\n        this._renderDebouncer.refresh(start, end);\n    };\n    Renderer.prototype._renderRows = function (start, end) {\n        var _this = this;\n        this._renderLayers.forEach(function (l) { return l.onGridChanged(_this._terminal, start, end); });\n        this._terminal.emit('refresh', { start: start, end: end });\n    };\n    Renderer.prototype._updateDimensions = function () {\n        if (!this._terminal.charMeasure.width || !this._terminal.charMeasure.height) {\n            return;\n        }\n        this.dimensions.scaledCharWidth = Math.floor(this._terminal.charMeasure.width * window.devicePixelRatio);\n        this.dimensions.scaledCharHeight = Math.ceil(this._terminal.charMeasure.height * window.devicePixelRatio);\n        this.dimensions.scaledCellHeight = Math.floor(this.dimensions.scaledCharHeight * this._terminal.options.lineHeight);\n        this.dimensions.scaledCharTop = this._terminal.options.lineHeight === 1 ? 0 : Math.round((this.dimensions.scaledCellHeight - this.dimensions.scaledCharHeight) / 2);\n        this.dimensions.scaledCellWidth = this.dimensions.scaledCharWidth + Math.round(this._terminal.options.letterSpacing);\n        this.dimensions.scaledCharLeft = Math.floor(this._terminal.options.letterSpacing / 2);\n        this.dimensions.scaledCanvasHeight = this._terminal.rows * this.dimensions.scaledCellHeight;\n        this.dimensions.scaledCanvasWidth = this._terminal.cols * this.dimensions.scaledCellWidth;\n        this.dimensions.canvasHeight = Math.round(this.dimensions.scaledCanvasHeight / window.devicePixelRatio);\n        this.dimensions.canvasWidth = Math.round(this.dimensions.scaledCanvasWidth / window.devicePixelRatio);\n        this.dimensions.actualCellHeight = this.dimensions.canvasHeight / this._terminal.rows;\n        this.dimensions.actualCellWidth = this.dimensions.canvasWidth / this._terminal.cols;\n    };\n    Renderer.prototype.registerCharacterJoiner = function (handler) {\n        return this._characterJoinerRegistry.registerCharacterJoiner(handler);\n    };\n    Renderer.prototype.deregisterCharacterJoiner = function (joinerId) {\n        return this._characterJoinerRegistry.deregisterCharacterJoiner(joinerId);\n    };\n    return Renderer;\n}(EventEmitter_1.EventEmitter));\nexports.Renderer = Renderer;\n//# sourceMappingURL=Renderer.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar EscapeSequences_1 = require(\"../../common/data/EscapeSequences\");\nvar KEYCODE_KEY_MAPPINGS = {\n    48: ['0', ')'],\n    49: ['1', '!'],\n    50: ['2', '@'],\n    51: ['3', '#'],\n    52: ['4', '$'],\n    53: ['5', '%'],\n    54: ['6', '^'],\n    55: ['7', '&'],\n    56: ['8', '*'],\n    57: ['9', '('],\n    186: [';', ':'],\n    187: ['=', '+'],\n    188: [',', '<'],\n    189: ['-', '_'],\n    190: ['.', '>'],\n    191: ['/', '?'],\n    192: ['`', '~'],\n    219: ['[', '{'],\n    220: ['\\\\', '|'],\n    221: [']', '}'],\n    222: ['\\'', '\"']\n};\nfunction evaluateKeyboardEvent(ev, applicationCursorMode, isMac, macOptionIsMeta) {\n    var result = {\n        type: 0,\n        cancel: false,\n        key: undefined\n    };\n    var modifiers = (ev.shiftKey ? 1 : 0) | (ev.altKey ? 2 : 0) | (ev.ctrlKey ? 4 : 0) | (ev.metaKey ? 8 : 0);\n    switch (ev.keyCode) {\n        case 0:\n            if (ev.key === 'UIKeyInputUpArrow') {\n                if (applicationCursorMode) {\n                    result.key = EscapeSequences_1.C0.ESC + 'OA';\n                }\n                else {\n                    result.key = EscapeSequences_1.C0.ESC + '[A';\n                }\n            }\n            else if (ev.key === 'UIKeyInputLeftArrow') {\n                if (applicationCursorMode) {\n                    result.key = EscapeSequences_1.C0.ESC + 'OD';\n                }\n                else {\n                    result.key = EscapeSequences_1.C0.ESC + '[D';\n                }\n            }\n            else if (ev.key === 'UIKeyInputRightArrow') {\n                if (applicationCursorMode) {\n                    result.key = EscapeSequences_1.C0.ESC + 'OC';\n                }\n                else {\n                    result.key = EscapeSequences_1.C0.ESC + '[C';\n                }\n            }\n            else if (ev.key === 'UIKeyInputDownArrow') {\n                if (applicationCursorMode) {\n                    result.key = EscapeSequences_1.C0.ESC + 'OB';\n                }\n                else {\n                    result.key = EscapeSequences_1.C0.ESC + '[B';\n                }\n            }\n            break;\n        case 8:\n            if (ev.shiftKey) {\n                result.key = EscapeSequences_1.C0.BS;\n                break;\n            }\n            else if (ev.altKey) {\n                result.key = EscapeSequences_1.C0.ESC + EscapeSequences_1.C0.DEL;\n                break;\n            }\n            result.key = EscapeSequences_1.C0.DEL;\n            break;\n        case 9:\n            if (ev.shiftKey) {\n                result.key = EscapeSequences_1.C0.ESC + '[Z';\n                break;\n            }\n            result.key = EscapeSequences_1.C0.HT;\n            result.cancel = true;\n            break;\n        case 13:\n            result.key = EscapeSequences_1.C0.CR;\n            result.cancel = true;\n            break;\n        case 27:\n            result.key = EscapeSequences_1.C0.ESC;\n            result.cancel = true;\n            break;\n        case 37:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[1;' + (modifiers + 1) + 'D';\n                if (result.key === EscapeSequences_1.C0.ESC + '[1;3D') {\n                    result.key = isMac ? EscapeSequences_1.C0.ESC + 'b' : EscapeSequences_1.C0.ESC + '[1;5D';\n                }\n            }\n            else if (applicationCursorMode) {\n                result.key = EscapeSequences_1.C0.ESC + 'OD';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + '[D';\n            }\n            break;\n        case 39:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[1;' + (modifiers + 1) + 'C';\n                if (result.key === EscapeSequences_1.C0.ESC + '[1;3C') {\n                    result.key = isMac ? EscapeSequences_1.C0.ESC + 'f' : EscapeSequences_1.C0.ESC + '[1;5C';\n                }\n            }\n            else if (applicationCursorMode) {\n                result.key = EscapeSequences_1.C0.ESC + 'OC';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + '[C';\n            }\n            break;\n        case 38:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[1;' + (modifiers + 1) + 'A';\n                if (result.key === EscapeSequences_1.C0.ESC + '[1;3A') {\n                    result.key = EscapeSequences_1.C0.ESC + '[1;5A';\n                }\n            }\n            else if (applicationCursorMode) {\n                result.key = EscapeSequences_1.C0.ESC + 'OA';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + '[A';\n            }\n            break;\n        case 40:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[1;' + (modifiers + 1) + 'B';\n                if (result.key === EscapeSequences_1.C0.ESC + '[1;3B') {\n                    result.key = EscapeSequences_1.C0.ESC + '[1;5B';\n                }\n            }\n            else if (applicationCursorMode) {\n                result.key = EscapeSequences_1.C0.ESC + 'OB';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + '[B';\n            }\n            break;\n        case 45:\n            if (!ev.shiftKey && !ev.ctrlKey) {\n                result.key = EscapeSequences_1.C0.ESC + '[2~';\n            }\n            break;\n        case 46:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[3;' + (modifiers + 1) + '~';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + '[3~';\n            }\n            break;\n        case 36:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[1;' + (modifiers + 1) + 'H';\n            }\n            else if (applicationCursorMode) {\n                result.key = EscapeSequences_1.C0.ESC + 'OH';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + '[H';\n            }\n            break;\n        case 35:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[1;' + (modifiers + 1) + 'F';\n            }\n            else if (applicationCursorMode) {\n                result.key = EscapeSequences_1.C0.ESC + 'OF';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + '[F';\n            }\n            break;\n        case 33:\n            if (ev.shiftKey) {\n                result.type = 2;\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + '[5~';\n            }\n            break;\n        case 34:\n            if (ev.shiftKey) {\n                result.type = 3;\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + '[6~';\n            }\n            break;\n        case 112:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[1;' + (modifiers + 1) + 'P';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + 'OP';\n            }\n            break;\n        case 113:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[1;' + (modifiers + 1) + 'Q';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + 'OQ';\n            }\n            break;\n        case 114:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[1;' + (modifiers + 1) + 'R';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + 'OR';\n            }\n            break;\n        case 115:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[1;' + (modifiers + 1) + 'S';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + 'OS';\n            }\n            break;\n        case 116:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[15;' + (modifiers + 1) + '~';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + '[15~';\n            }\n            break;\n        case 117:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[17;' + (modifiers + 1) + '~';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + '[17~';\n            }\n            break;\n        case 118:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[18;' + (modifiers + 1) + '~';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + '[18~';\n            }\n            break;\n        case 119:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[19;' + (modifiers + 1) + '~';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + '[19~';\n            }\n            break;\n        case 120:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[20;' + (modifiers + 1) + '~';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + '[20~';\n            }\n            break;\n        case 121:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[21;' + (modifiers + 1) + '~';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + '[21~';\n            }\n            break;\n        case 122:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[23;' + (modifiers + 1) + '~';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + '[23~';\n            }\n            break;\n        case 123:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[24;' + (modifiers + 1) + '~';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + '[24~';\n            }\n            break;\n        default:\n            if (ev.ctrlKey && !ev.shiftKey && !ev.altKey && !ev.metaKey) {\n                if (ev.keyCode >= 65 && ev.keyCode <= 90) {\n                    result.key = String.fromCharCode(ev.keyCode - 64);\n                }\n                else if (ev.keyCode === 32) {\n                    result.key = String.fromCharCode(0);\n                }\n                else if (ev.keyCode >= 51 && ev.keyCode <= 55) {\n                    result.key = String.fromCharCode(ev.keyCode - 51 + 27);\n                }\n                else if (ev.keyCode === 56) {\n                    result.key = String.fromCharCode(127);\n                }\n                else if (ev.keyCode === 219) {\n                    result.key = String.fromCharCode(27);\n                }\n                else if (ev.keyCode === 220) {\n                    result.key = String.fromCharCode(28);\n                }\n                else if (ev.keyCode === 221) {\n                    result.key = String.fromCharCode(29);\n                }\n            }\n            else if ((!isMac || macOptionIsMeta) && ev.altKey && !ev.metaKey) {\n                var keyMapping = KEYCODE_KEY_MAPPINGS[ev.keyCode];\n                var key = keyMapping && keyMapping[!ev.shiftKey ? 0 : 1];\n                if (key) {\n                    result.key = EscapeSequences_1.C0.ESC + key;\n                }\n                else if (ev.keyCode >= 65 && ev.keyCode <= 90) {\n                    var keyCode = ev.ctrlKey ? ev.keyCode - 64 : ev.keyCode + 32;\n                    result.key = EscapeSequences_1.C0.ESC + String.fromCharCode(keyCode);\n                }\n            }\n            else if (isMac && !ev.altKey && !ev.ctrlKey && ev.metaKey) {\n                if (ev.keyCode === 65) {\n                    result.type = 1;\n                }\n            }\n            break;\n    }\n    return result;\n}\nexports.evaluateKeyboardEvent = evaluateKeyboardEvent;\n//# sourceMappingURL=Keyboard.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar CharAtlasUtils_1 = require(\"./CharAtlasUtils\");\nvar DynamicCharAtlas_1 = require(\"./DynamicCharAtlas\");\nvar NoneCharAtlas_1 = require(\"./NoneCharAtlas\");\nvar StaticCharAtlas_1 = require(\"./StaticCharAtlas\");\nvar charAtlasImplementations = {\n    'none': NoneCharAtlas_1.default,\n    'static': StaticCharAtlas_1.default,\n    'dynamic': DynamicCharAtlas_1.default\n};\nvar charAtlasCache = [];\nfunction acquireCharAtlas(terminal, colors, scaledCharWidth, scaledCharHeight) {\n    var newConfig = CharAtlasUtils_1.generateConfig(scaledCharWidth, scaledCharHeight, terminal, colors);\n    for (var i = 0; i < charAtlasCache.length; i++) {\n        var entry = charAtlasCache[i];\n        var ownedByIndex = entry.ownedBy.indexOf(terminal);\n        if (ownedByIndex >= 0) {\n            if (CharAtlasUtils_1.configEquals(entry.config, newConfig)) {\n                return entry.atlas;\n            }\n            if (entry.ownedBy.length === 1) {\n                charAtlasCache.splice(i, 1);\n            }\n            else {\n                entry.ownedBy.splice(ownedByIndex, 1);\n            }\n            break;\n        }\n    }\n    for (var i = 0; i < charAtlasCache.length; i++) {\n        var entry = charAtlasCache[i];\n        if (CharAtlasUtils_1.configEquals(entry.config, newConfig)) {\n            entry.ownedBy.push(terminal);\n            return entry.atlas;\n        }\n    }\n    var newEntry = {\n        atlas: new charAtlasImplementations[terminal.options.experimentalCharAtlas](document, newConfig),\n        config: newConfig,\n        ownedBy: [terminal]\n    };\n    charAtlasCache.push(newEntry);\n    return newEntry.atlas;\n}\nexports.acquireCharAtlas = acquireCharAtlas;\nfunction removeTerminalFromCache(terminal) {\n    for (var i = 0; i < charAtlasCache.length; i++) {\n        var index = charAtlasCache[i].ownedBy.indexOf(terminal);\n        if (index !== -1) {\n            if (charAtlasCache[i].ownedBy.length === 1) {\n                charAtlasCache.splice(i, 1);\n            }\n            else {\n                charAtlasCache[i].ownedBy.splice(index, 1);\n            }\n            break;\n        }\n    }\n}\nexports.removeTerminalFromCache = removeTerminalFromCache;\n//# sourceMappingURL=CharAtlasCache.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DEFAULT_BELL_SOUND = 'data:audio/wav;base64,UklGRigBAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YQQBAADpAFgCwAMlBZoG/wdmCcoKRAypDQ8PbRDBEQQTOxRtFYcWlBePGIUZXhoiG88bcBz7HHIdzh0WHlMeZx51HmkeUx4WHs8dah0AHXwc3hs9G4saxRnyGBIYGBcQFv8U4RPAEoYRQBACD70NWwwHC6gJOwjWBloF7gOBAhABkf8b/qv8R/ve+Xf4Ife79W/0JfPZ8Z/wde9N7ijtE+wU6xvqM+lb6H7nw+YX5mrlxuQz5Mzje+Ma49fioeKD4nXiYeJy4pHitOL04j/jn+MN5IPkFOWs5U3mDefM55/ogOl36m7rdOyE7abuyu8D8Unyj/Pg9D/2qfcb+Yn6/vuK/Qj/lAAlAg==';\nvar SoundManager = (function () {\n    function SoundManager(_terminal) {\n        this._terminal = _terminal;\n    }\n    Object.defineProperty(SoundManager, \"audioContext\", {\n        get: function () {\n            if (!SoundManager._audioContext) {\n                var audioContextCtor = window.AudioContext || window.webkitAudioContext;\n                if (!audioContextCtor) {\n                    console.warn('Web Audio API is not supported by this browser. Consider upgrading to the latest version');\n                    return null;\n                }\n                SoundManager._audioContext = new audioContextCtor();\n            }\n            return SoundManager._audioContext;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    SoundManager.prototype.playBellSound = function () {\n        var ctx = SoundManager.audioContext;\n        if (!ctx) {\n            return;\n        }\n        var bellAudioSource = ctx.createBufferSource();\n        ctx.decodeAudioData(this._base64ToArrayBuffer(this._removeMimeType(this._terminal.options.bellSound)), function (buffer) {\n            bellAudioSource.buffer = buffer;\n            bellAudioSource.connect(ctx.destination);\n            bellAudioSource.start(0);\n        });\n    };\n    SoundManager.prototype._base64ToArrayBuffer = function (base64) {\n        var binaryString = window.atob(base64);\n        var len = binaryString.length;\n        var bytes = new Uint8Array(len);\n        for (var i = 0; i < len; i++) {\n            bytes[i] = binaryString.charCodeAt(i);\n        }\n        return bytes.buffer;\n    };\n    SoundManager.prototype._removeMimeType = function (dataURI) {\n        var splitUri = dataURI.split(',');\n        return splitUri[1];\n    };\n    return SoundManager;\n}());\nexports.SoundManager = SoundManager;\n//# sourceMappingURL=SoundManager.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Types_1 = require(\"./Types\");\nvar BaseCharAtlas_1 = require(\"./BaseCharAtlas\");\nvar ColorManager_1 = require(\"../ColorManager\");\nvar CharAtlasGenerator_1 = require(\"./CharAtlasGenerator\");\nvar LRUMap_1 = require(\"./LRUMap\");\nvar Platform_1 = require(\"../../core/Platform\");\nvar TEXTURE_WIDTH = 1024;\nvar TEXTURE_HEIGHT = 1024;\nvar TRANSPARENT_COLOR = {\n    css: 'rgba(0, 0, 0, 0)',\n    rgba: 0\n};\nvar FRAME_CACHE_DRAW_LIMIT = 100;\nvar GLYPH_BITMAP_COMMIT_DELAY = 100;\nfunction getGlyphCacheKey(glyph) {\n    return glyph.code << 21 | glyph.bg << 12 | glyph.fg << 3 | (glyph.bold ? 0 : 4) + (glyph.dim ? 0 : 2) + (glyph.italic ? 0 : 1);\n}\nexports.getGlyphCacheKey = getGlyphCacheKey;\nvar DynamicCharAtlas = (function (_super) {\n    __extends(DynamicCharAtlas, _super);\n    function DynamicCharAtlas(document, _config) {\n        var _this = _super.call(this) || this;\n        _this._config = _config;\n        _this._drawToCacheCount = 0;\n        _this._glyphsWaitingOnBitmap = [];\n        _this._bitmapCommitTimeout = null;\n        _this._bitmap = null;\n        _this._cacheCanvas = document.createElement('canvas');\n        _this._cacheCanvas.width = TEXTURE_WIDTH;\n        _this._cacheCanvas.height = TEXTURE_HEIGHT;\n        _this._cacheCtx = _this._cacheCanvas.getContext('2d', { alpha: true });\n        var tmpCanvas = document.createElement('canvas');\n        tmpCanvas.width = _this._config.scaledCharWidth;\n        tmpCanvas.height = _this._config.scaledCharHeight;\n        _this._tmpCtx = tmpCanvas.getContext('2d', { alpha: _this._config.allowTransparency });\n        _this._width = Math.floor(TEXTURE_WIDTH / _this._config.scaledCharWidth);\n        _this._height = Math.floor(TEXTURE_HEIGHT / _this._config.scaledCharHeight);\n        var capacity = _this._width * _this._height;\n        _this._cacheMap = new LRUMap_1.default(capacity);\n        _this._cacheMap.prealloc(capacity);\n        return _this;\n    }\n    DynamicCharAtlas.prototype.dispose = function () {\n        if (this._bitmapCommitTimeout !== null) {\n            window.clearTimeout(this._bitmapCommitTimeout);\n            this._bitmapCommitTimeout = null;\n        }\n    };\n    DynamicCharAtlas.prototype.beginFrame = function () {\n        this._drawToCacheCount = 0;\n    };\n    DynamicCharAtlas.prototype.draw = function (ctx, glyph, x, y) {\n        if (glyph.code === 32) {\n            return true;\n        }\n        if (!this._canCache(glyph)) {\n            return false;\n        }\n        var glyphKey = getGlyphCacheKey(glyph);\n        var cacheValue = this._cacheMap.get(glyphKey);\n        if (cacheValue !== null && cacheValue !== undefined) {\n            this._drawFromCache(ctx, cacheValue, x, y);\n            return true;\n        }\n        else if (this._drawToCacheCount < FRAME_CACHE_DRAW_LIMIT) {\n            var index = void 0;\n            if (this._cacheMap.size < this._cacheMap.capacity) {\n                index = this._cacheMap.size;\n            }\n            else {\n                index = this._cacheMap.peek().index;\n            }\n            var cacheValue_1 = this._drawToCache(glyph, index);\n            this._cacheMap.set(glyphKey, cacheValue_1);\n            this._drawFromCache(ctx, cacheValue_1, x, y);\n            return true;\n        }\n        return false;\n    };\n    DynamicCharAtlas.prototype._canCache = function (glyph) {\n        return glyph.code < 256;\n    };\n    DynamicCharAtlas.prototype._toCoordinateX = function (index) {\n        return (index % this._width) * this._config.scaledCharWidth;\n    };\n    DynamicCharAtlas.prototype._toCoordinateY = function (index) {\n        return Math.floor(index / this._width) * this._config.scaledCharHeight;\n    };\n    DynamicCharAtlas.prototype._drawFromCache = function (ctx, cacheValue, x, y) {\n        if (cacheValue.isEmpty) {\n            return;\n        }\n        var cacheX = this._toCoordinateX(cacheValue.index);\n        var cacheY = this._toCoordinateY(cacheValue.index);\n        ctx.drawImage(cacheValue.inBitmap ? this._bitmap : this._cacheCanvas, cacheX, cacheY, this._config.scaledCharWidth, this._config.scaledCharHeight, x, y, this._config.scaledCharWidth, this._config.scaledCharHeight);\n    };\n    DynamicCharAtlas.prototype._getColorFromAnsiIndex = function (idx) {\n        if (idx < this._config.colors.ansi.length) {\n            return this._config.colors.ansi[idx];\n        }\n        return ColorManager_1.DEFAULT_ANSI_COLORS[idx];\n    };\n    DynamicCharAtlas.prototype._getBackgroundColor = function (glyph) {\n        if (this._config.allowTransparency) {\n            return TRANSPARENT_COLOR;\n        }\n        else if (glyph.bg === Types_1.INVERTED_DEFAULT_COLOR) {\n            return this._config.colors.foreground;\n        }\n        else if (glyph.bg < 256) {\n            return this._getColorFromAnsiIndex(glyph.bg);\n        }\n        return this._config.colors.background;\n    };\n    DynamicCharAtlas.prototype._getForegroundColor = function (glyph) {\n        if (glyph.fg === Types_1.INVERTED_DEFAULT_COLOR) {\n            return this._config.colors.background;\n        }\n        else if (glyph.fg < 256) {\n            return this._getColorFromAnsiIndex(glyph.fg);\n        }\n        return this._config.colors.foreground;\n    };\n    DynamicCharAtlas.prototype._drawToCache = function (glyph, index) {\n        this._drawToCacheCount++;\n        this._tmpCtx.save();\n        var backgroundColor = this._getBackgroundColor(glyph);\n        this._tmpCtx.globalCompositeOperation = 'copy';\n        this._tmpCtx.fillStyle = backgroundColor.css;\n        this._tmpCtx.fillRect(0, 0, this._config.scaledCharWidth, this._config.scaledCharHeight);\n        this._tmpCtx.globalCompositeOperation = 'source-over';\n        var fontWeight = glyph.bold ? this._config.fontWeightBold : this._config.fontWeight;\n        var fontStyle = glyph.italic ? 'italic' : '';\n        this._tmpCtx.font =\n            fontStyle + \" \" + fontWeight + \" \" + this._config.fontSize * this._config.devicePixelRatio + \"px \" + this._config.fontFamily;\n        this._tmpCtx.textBaseline = 'top';\n        this._tmpCtx.fillStyle = this._getForegroundColor(glyph).css;\n        if (glyph.dim) {\n            this._tmpCtx.globalAlpha = Types_1.DIM_OPACITY;\n        }\n        this._tmpCtx.fillText(glyph.chars, 0, 0);\n        this._tmpCtx.restore();\n        var imageData = this._tmpCtx.getImageData(0, 0, this._config.scaledCharWidth, this._config.scaledCharHeight);\n        var isEmpty = false;\n        if (!this._config.allowTransparency) {\n            isEmpty = CharAtlasGenerator_1.clearColor(imageData, backgroundColor);\n        }\n        var x = this._toCoordinateX(index);\n        var y = this._toCoordinateY(index);\n        this._cacheCtx.putImageData(imageData, x, y);\n        var cacheValue = {\n            index: index,\n            isEmpty: isEmpty,\n            inBitmap: false\n        };\n        this._addGlyphToBitmap(cacheValue);\n        return cacheValue;\n    };\n    DynamicCharAtlas.prototype._addGlyphToBitmap = function (cacheValue) {\n        var _this = this;\n        if (!('createImageBitmap' in window) || Platform_1.isFirefox || Platform_1.isSafari) {\n            return;\n        }\n        this._glyphsWaitingOnBitmap.push(cacheValue);\n        if (this._bitmapCommitTimeout !== null) {\n            return;\n        }\n        this._bitmapCommitTimeout = window.setTimeout(function () { return _this._generateBitmap(); }, GLYPH_BITMAP_COMMIT_DELAY);\n    };\n    DynamicCharAtlas.prototype._generateBitmap = function () {\n        var _this = this;\n        var glyphsMovingToBitmap = this._glyphsWaitingOnBitmap;\n        this._glyphsWaitingOnBitmap = [];\n        window.createImageBitmap(this._cacheCanvas).then(function (bitmap) {\n            _this._bitmap = bitmap;\n            for (var i = 0; i < glyphsMovingToBitmap.length; i++) {\n                var value = glyphsMovingToBitmap[i];\n                value.inBitmap = true;\n            }\n        });\n        this._bitmapCommitTimeout = null;\n    };\n    return DynamicCharAtlas;\n}(BaseCharAtlas_1.default));\nexports.default = DynamicCharAtlas;\n//# sourceMappingURL=DynamicCharAtlas.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Terminal_1 = require(\"../Terminal\");\nvar Strings = require(\"../Strings\");\nvar Terminal = (function () {\n    function Terminal(options) {\n        this._core = new Terminal_1.Terminal(options);\n    }\n    Object.defineProperty(Terminal.prototype, \"element\", {\n        get: function () { return this._core.element; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"textarea\", {\n        get: function () { return this._core.textarea; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"rows\", {\n        get: function () { return this._core.rows; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"cols\", {\n        get: function () { return this._core.cols; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"markers\", {\n        get: function () { return this._core.markers; },\n        enumerable: true,\n        configurable: true\n    });\n    Terminal.prototype.blur = function () {\n        this._core.blur();\n    };\n    Terminal.prototype.focus = function () {\n        this._core.focus();\n    };\n    Terminal.prototype.on = function (type, listener) {\n        this._core.on(type, listener);\n    };\n    Terminal.prototype.off = function (type, listener) {\n        this._core.off(type, listener);\n    };\n    Terminal.prototype.emit = function (type, data) {\n        this._core.emit(type, data);\n    };\n    Terminal.prototype.addDisposableListener = function (type, handler) {\n        return this._core.addDisposableListener(type, handler);\n    };\n    Terminal.prototype.resize = function (columns, rows) {\n        this._core.resize(columns, rows);\n    };\n    Terminal.prototype.writeln = function (data) {\n        this._core.writeln(data);\n    };\n    Terminal.prototype.open = function (parent) {\n        this._core.open(parent);\n    };\n    Terminal.prototype.attachCustomKeyEventHandler = function (customKeyEventHandler) {\n        this._core.attachCustomKeyEventHandler(customKeyEventHandler);\n    };\n    Terminal.prototype.registerLinkMatcher = function (regex, handler, options) {\n        return this._core.registerLinkMatcher(regex, handler, options);\n    };\n    Terminal.prototype.deregisterLinkMatcher = function (matcherId) {\n        this._core.deregisterLinkMatcher(matcherId);\n    };\n    Terminal.prototype.registerCharacterJoiner = function (handler) {\n        return this._core.registerCharacterJoiner(handler);\n    };\n    Terminal.prototype.deregisterCharacterJoiner = function (joinerId) {\n        this._core.deregisterCharacterJoiner(joinerId);\n    };\n    Terminal.prototype.addMarker = function (cursorYOffset) {\n        return this._core.addMarker(cursorYOffset);\n    };\n    Terminal.prototype.hasSelection = function () {\n        return this._core.hasSelection();\n    };\n    Terminal.prototype.getSelection = function () {\n        return this._core.getSelection();\n    };\n    Terminal.prototype.clearSelection = function () {\n        this._core.clearSelection();\n    };\n    Terminal.prototype.selectAll = function () {\n        this._core.selectAll();\n    };\n    Terminal.prototype.selectLines = function (start, end) {\n        this._core.selectLines(start, end);\n    };\n    Terminal.prototype.dispose = function () {\n        this._core.dispose();\n    };\n    Terminal.prototype.destroy = function () {\n        this._core.destroy();\n    };\n    Terminal.prototype.scrollLines = function (amount) {\n        this._core.scrollLines(amount);\n    };\n    Terminal.prototype.scrollPages = function (pageCount) {\n        this._core.scrollPages(pageCount);\n    };\n    Terminal.prototype.scrollToTop = function () {\n        this._core.scrollToTop();\n    };\n    Terminal.prototype.scrollToBottom = function () {\n        this._core.scrollToBottom();\n    };\n    Terminal.prototype.scrollToLine = function (line) {\n        this._core.scrollToLine(line);\n    };\n    Terminal.prototype.clear = function () {\n        this._core.clear();\n    };\n    Terminal.prototype.write = function (data) {\n        this._core.write(data);\n    };\n    Terminal.prototype.getOption = function (key) {\n        return this._core.getOption(key);\n    };\n    Terminal.prototype.setOption = function (key, value) {\n        this._core.setOption(key, value);\n    };\n    Terminal.prototype.refresh = function (start, end) {\n        this._core.refresh(start, end);\n    };\n    Terminal.prototype.reset = function () {\n        this._core.reset();\n    };\n    Terminal.applyAddon = function (addon) {\n        addon.apply(Terminal);\n    };\n    Object.defineProperty(Terminal, \"strings\", {\n        get: function () {\n            return Strings;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return Terminal;\n}());\nexports.Terminal = Terminal;\n//# sourceMappingURL=Terminal.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar EventEmitter_1 = require(\"../common/EventEmitter\");\nvar CharMeasure = (function (_super) {\n    __extends(CharMeasure, _super);\n    function CharMeasure(document, parentElement) {\n        var _this = _super.call(this) || this;\n        _this._document = document;\n        _this._parentElement = parentElement;\n        _this._measureElement = _this._document.createElement('span');\n        _this._measureElement.classList.add('xterm-char-measure-element');\n        _this._measureElement.textContent = 'W';\n        _this._measureElement.setAttribute('aria-hidden', 'true');\n        _this._parentElement.appendChild(_this._measureElement);\n        return _this;\n    }\n    Object.defineProperty(CharMeasure.prototype, \"width\", {\n        get: function () {\n            return this._width;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(CharMeasure.prototype, \"height\", {\n        get: function () {\n            return this._height;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    CharMeasure.prototype.measure = function (options) {\n        this._measureElement.style.fontFamily = options.fontFamily;\n        this._measureElement.style.fontSize = options.fontSize + \"px\";\n        var geometry = this._measureElement.getBoundingClientRect();\n        if (geometry.width === 0 || geometry.height === 0) {\n            return;\n        }\n        if (this._width !== geometry.width || this._height !== geometry.height) {\n            this._width = geometry.width;\n            this._height = Math.ceil(geometry.height);\n            this.emit('charsizechanged');\n        }\n    };\n    return CharMeasure;\n}(EventEmitter_1.EventEmitter));\nexports.CharMeasure = CharMeasure;\n//# sourceMappingURL=CharMeasure.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction prepareTextForTerminal(text) {\n    return text.replace(/\\r?\\n/g, '\\r');\n}\nexports.prepareTextForTerminal = prepareTextForTerminal;\nfunction bracketTextForPaste(text, bracketedPasteMode) {\n    if (bracketedPasteMode) {\n        return '\\x1b[200~' + text + '\\x1b[201~';\n    }\n    return text;\n}\nexports.bracketTextForPaste = bracketTextForPaste;\nfunction copyHandler(ev, term, selectionManager) {\n    if (term.browser.isMSIE) {\n        window.clipboardData.setData('Text', selectionManager.selectionText);\n    }\n    else {\n        ev.clipboardData.setData('text/plain', selectionManager.selectionText);\n    }\n    ev.preventDefault();\n}\nexports.copyHandler = copyHandler;\nfunction pasteHandler(ev, term) {\n    ev.stopPropagation();\n    var text;\n    var dispatchPaste = function (text) {\n        text = prepareTextForTerminal(text);\n        text = bracketTextForPaste(text, term.bracketedPasteMode);\n        term.handler(text);\n        term.textarea.value = '';\n        term.emit('paste', text);\n        term.cancel(ev);\n    };\n    if (term.browser.isMSIE) {\n        if (window.clipboardData) {\n            text = window.clipboardData.getData('Text');\n            dispatchPaste(text);\n        }\n    }\n    else {\n        if (ev.clipboardData) {\n            text = ev.clipboardData.getData('text/plain');\n            dispatchPaste(text);\n        }\n    }\n}\nexports.pasteHandler = pasteHandler;\nfunction moveTextAreaUnderMouseCursor(ev, textarea) {\n    textarea.style.position = 'fixed';\n    textarea.style.width = '20px';\n    textarea.style.height = '20px';\n    textarea.style.left = (ev.clientX - 10) + 'px';\n    textarea.style.top = (ev.clientY - 10) + 'px';\n    textarea.style.zIndex = '1000';\n    textarea.focus();\n    setTimeout(function () {\n        textarea.style.position = null;\n        textarea.style.width = null;\n        textarea.style.height = null;\n        textarea.style.left = null;\n        textarea.style.top = null;\n        textarea.style.zIndex = null;\n    }, 200);\n}\nexports.moveTextAreaUnderMouseCursor = moveTextAreaUnderMouseCursor;\nfunction rightClickHandler(ev, textarea, selectionManager, shouldSelectWord) {\n    moveTextAreaUnderMouseCursor(ev, textarea);\n    if (shouldSelectWord && !selectionManager.isClickInSelection(ev)) {\n        selectionManager.selectWordAtCursor(ev);\n    }\n    textarea.value = selectionManager.selectionText;\n    textarea.select();\n}\nexports.rightClickHandler = rightClickHandler;\n//# sourceMappingURL=Clipboard.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar isNode = (typeof navigator === 'undefined') ? true : false;\nvar userAgent = (isNode) ? 'node' : navigator.userAgent;\nvar platform = (isNode) ? 'node' : navigator.platform;\nexports.isFirefox = !!~userAgent.indexOf('Firefox');\nexports.isSafari = /^((?!chrome|android).)*safari/i.test(userAgent);\nexports.isMSIE = !!~userAgent.indexOf('MSIE') || !!~userAgent.indexOf('Trident');\nexports.isMac = contains(['Macintosh', 'MacIntel', 'MacPPC', 'Mac68K'], platform);\nexports.isIpad = platform === 'iPad';\nexports.isIphone = platform === 'iPhone';\nexports.isMSWindows = contains(['Windows', 'Win16', 'Win32', 'WinCE'], platform);\nexports.isLinux = platform.indexOf('Linux') >= 0;\nfunction contains(arr, el) {\n    return arr.indexOf(el) >= 0;\n}\n//# sourceMappingURL=Platform.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction fill(array, value, start, end) {\n    if (array.fill) {\n        return array.fill(value, start, end);\n    }\n    return fillFallback(array, value, start, end);\n}\nexports.fill = fill;\nfunction fillFallback(array, value, start, end) {\n    if (start === void 0) { start = 0; }\n    if (end === void 0) { end = array.length; }\n    if (start >= array.length) {\n        return array;\n    }\n    start = (array.length + start) % array.length;\n    if (end >= array.length) {\n        end = array.length;\n    }\n    else {\n        end = (array.length + end) % array.length;\n    }\n    for (var i = start; i < end; ++i) {\n        array[i] = value;\n    }\n    return array;\n}\nexports.fillFallback = fillFallback;\n//# sourceMappingURL=TypedArrayUtils.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar C0;\n(function (C0) {\n    C0.NUL = '\\x00';\n    C0.SOH = '\\x01';\n    C0.STX = '\\x02';\n    C0.ETX = '\\x03';\n    C0.EOT = '\\x04';\n    C0.ENQ = '\\x05';\n    C0.ACK = '\\x06';\n    C0.BEL = '\\x07';\n    C0.BS = '\\x08';\n    C0.HT = '\\x09';\n    C0.LF = '\\x0a';\n    C0.VT = '\\x0b';\n    C0.FF = '\\x0c';\n    C0.CR = '\\x0d';\n    C0.SO = '\\x0e';\n    C0.SI = '\\x0f';\n    C0.DLE = '\\x10';\n    C0.DC1 = '\\x11';\n    C0.DC2 = '\\x12';\n    C0.DC3 = '\\x13';\n    C0.DC4 = '\\x14';\n    C0.NAK = '\\x15';\n    C0.SYN = '\\x16';\n    C0.ETB = '\\x17';\n    C0.CAN = '\\x18';\n    C0.EM = '\\x19';\n    C0.SUB = '\\x1a';\n    C0.ESC = '\\x1b';\n    C0.FS = '\\x1c';\n    C0.GS = '\\x1d';\n    C0.RS = '\\x1e';\n    C0.US = '\\x1f';\n    C0.SP = '\\x20';\n    C0.DEL = '\\x7f';\n})(C0 = exports.C0 || (exports.C0 = {}));\nvar C1;\n(function (C1) {\n    C1.PAD = '\\x80';\n    C1.HOP = '\\x81';\n    C1.BPH = '\\x82';\n    C1.NBH = '\\x83';\n    C1.IND = '\\x84';\n    C1.NEL = '\\x85';\n    C1.SSA = '\\x86';\n    C1.ESA = '\\x87';\n    C1.HTS = '\\x88';\n    C1.HTJ = '\\x89';\n    C1.VTS = '\\x8a';\n    C1.PLD = '\\x8b';\n    C1.PLU = '\\x8c';\n    C1.RI = '\\x8d';\n    C1.SS2 = '\\x8e';\n    C1.SS3 = '\\x8f';\n    C1.DCS = '\\x90';\n    C1.PU1 = '\\x91';\n    C1.PU2 = '\\x92';\n    C1.STS = '\\x93';\n    C1.CCH = '\\x94';\n    C1.MW = '\\x95';\n    C1.SPA = '\\x96';\n    C1.EPA = '\\x97';\n    C1.SOS = '\\x98';\n    C1.SGCI = '\\x99';\n    C1.SCI = '\\x9a';\n    C1.CSI = '\\x9b';\n    C1.ST = '\\x9c';\n    C1.OSC = '\\x9d';\n    C1.PM = '\\x9e';\n    C1.APC = '\\x9f';\n})(C1 = exports.C1 || (exports.C1 = {}));\n//# sourceMappingURL=EscapeSequences.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar BaseCharAtlas_1 = require(\"./BaseCharAtlas\");\nvar NoneCharAtlas = (function (_super) {\n    __extends(NoneCharAtlas, _super);\n    function NoneCharAtlas(document, config) {\n        return _super.call(this) || this;\n    }\n    NoneCharAtlas.prototype.draw = function (ctx, glyph, x, y) {\n        return false;\n    };\n    return NoneCharAtlas;\n}(BaseCharAtlas_1.default));\nexports.default = NoneCharAtlas;\n//# sourceMappingURL=NoneCharAtlas.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar BaseCharAtlas = (function () {\n    function BaseCharAtlas() {\n        this._didWarmUp = false;\n    }\n    BaseCharAtlas.prototype.dispose = function () { };\n    BaseCharAtlas.prototype.warmUp = function () {\n        if (!this._didWarmUp) {\n            this._doWarmUp();\n            this._didWarmUp = true;\n        }\n    };\n    BaseCharAtlas.prototype._doWarmUp = function () { };\n    BaseCharAtlas.prototype.beginFrame = function () { };\n    return BaseCharAtlas;\n}());\nexports.default = BaseCharAtlas;\n//# sourceMappingURL=BaseCharAtlas.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.blankLine = 'Blank line';\nexports.promptLabel = 'Terminal input';\nexports.tooMuchOutput = 'Too much output to announce, navigate to rows manually to read';\n//# sourceMappingURL=Strings.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Lifecycle_1 = require(\"./Lifecycle\");\nvar EventEmitter = (function (_super) {\n    __extends(EventEmitter, _super);\n    function EventEmitter() {\n        var _this = _super.call(this) || this;\n        _this._events = _this._events || {};\n        return _this;\n    }\n    EventEmitter.prototype.on = function (type, listener) {\n        this._events[type] = this._events[type] || [];\n        this._events[type].push(listener);\n    };\n    EventEmitter.prototype.addDisposableListener = function (type, handler) {\n        var _this = this;\n        this.on(type, handler);\n        var disposed = false;\n        return {\n            dispose: function () {\n                if (disposed) {\n                    return;\n                }\n                _this.off(type, handler);\n                disposed = true;\n            }\n        };\n    };\n    EventEmitter.prototype.off = function (type, listener) {\n        if (!this._events[type]) {\n            return;\n        }\n        var obj = this._events[type];\n        var i = obj.length;\n        while (i--) {\n            if (obj[i] === listener) {\n                obj.splice(i, 1);\n                return;\n            }\n        }\n    };\n    EventEmitter.prototype.removeAllListeners = function (type) {\n        if (this._events[type]) {\n            delete this._events[type];\n        }\n    };\n    EventEmitter.prototype.emit = function (type) {\n        var args = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            args[_i - 1] = arguments[_i];\n        }\n        if (!this._events[type]) {\n            return;\n        }\n        var obj = this._events[type];\n        for (var i = 0; i < obj.length; i++) {\n            obj[i].apply(this, args);\n        }\n    };\n    EventEmitter.prototype.listeners = function (type) {\n        return this._events[type] || [];\n    };\n    EventEmitter.prototype.dispose = function () {\n        _super.prototype.dispose.call(this);\n        this._events = {};\n    };\n    return EventEmitter;\n}(Lifecycle_1.Disposable));\nexports.EventEmitter = EventEmitter;\n//# sourceMappingURL=EventEmitter.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar MouseHelper_1 = require(\"./utils/MouseHelper\");\nvar Browser = require(\"./core/Platform\");\nvar EventEmitter_1 = require(\"./common/EventEmitter\");\nvar SelectionModel_1 = require(\"./SelectionModel\");\nvar Buffer_1 = require(\"./Buffer\");\nvar AltClickHandler_1 = require(\"./handlers/AltClickHandler\");\nvar DRAG_SCROLL_MAX_THRESHOLD = 50;\nvar DRAG_SCROLL_MAX_SPEED = 15;\nvar DRAG_SCROLL_INTERVAL = 50;\nvar ALT_CLICK_MOVE_CURSOR_TIME = 500;\nvar WORD_SEPARATORS = ' ()[]{}\\'\"';\nvar NON_BREAKING_SPACE_CHAR = String.fromCharCode(160);\nvar ALL_NON_BREAKING_SPACE_REGEX = new RegExp(NON_BREAKING_SPACE_CHAR, 'g');\nvar SelectionManager = (function (_super) {\n    __extends(SelectionManager, _super);\n    function SelectionManager(_terminal, _charMeasure) {\n        var _this = _super.call(this) || this;\n        _this._terminal = _terminal;\n        _this._charMeasure = _charMeasure;\n        _this._enabled = true;\n        _this._initListeners();\n        _this.enable();\n        _this._model = new SelectionModel_1.SelectionModel(_terminal);\n        _this._activeSelectionMode = 0;\n        return _this;\n    }\n    SelectionManager.prototype.dispose = function () {\n        _super.prototype.dispose.call(this);\n        this._removeMouseDownListeners();\n    };\n    Object.defineProperty(SelectionManager.prototype, \"_buffer\", {\n        get: function () {\n            return this._terminal.buffers.active;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    SelectionManager.prototype._initListeners = function () {\n        var _this = this;\n        this._mouseMoveListener = function (event) { return _this._onMouseMove(event); };\n        this._mouseUpListener = function (event) { return _this._onMouseUp(event); };\n        this._trimListener = function (amount) { return _this._onTrim(amount); };\n        this.initBuffersListeners();\n    };\n    SelectionManager.prototype.initBuffersListeners = function () {\n        var _this = this;\n        this._terminal.buffer.lines.on('trim', this._trimListener);\n        this._terminal.buffers.on('activate', function (e) { return _this._onBufferActivate(e); });\n    };\n    SelectionManager.prototype.disable = function () {\n        this.clearSelection();\n        this._enabled = false;\n    };\n    SelectionManager.prototype.enable = function () {\n        this._enabled = true;\n    };\n    Object.defineProperty(SelectionManager.prototype, \"selectionStart\", {\n        get: function () { return this._model.finalSelectionStart; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(SelectionManager.prototype, \"selectionEnd\", {\n        get: function () { return this._model.finalSelectionEnd; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(SelectionManager.prototype, \"hasSelection\", {\n        get: function () {\n            var start = this._model.finalSelectionStart;\n            var end = this._model.finalSelectionEnd;\n            if (!start || !end) {\n                return false;\n            }\n            return start[0] !== end[0] || start[1] !== end[1];\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(SelectionManager.prototype, \"selectionText\", {\n        get: function () {\n            var start = this._model.finalSelectionStart;\n            var end = this._model.finalSelectionEnd;\n            if (!start || !end) {\n                return '';\n            }\n            var result = [];\n            if (this._activeSelectionMode === 3) {\n                if (start[0] === end[0]) {\n                    return '';\n                }\n                for (var i = start[1]; i <= end[1]; i++) {\n                    var lineText = this._buffer.translateBufferLineToString(i, true, start[0], end[0]);\n                    result.push(lineText);\n                }\n            }\n            else {\n                var startRowEndCol = start[1] === end[1] ? end[0] : null;\n                result.push(this._buffer.translateBufferLineToString(start[1], true, start[0], startRowEndCol));\n                for (var i = start[1] + 1; i <= end[1] - 1; i++) {\n                    var bufferLine = this._buffer.lines.get(i);\n                    var lineText = this._buffer.translateBufferLineToString(i, true);\n                    if (bufferLine.isWrapped) {\n                        result[result.length - 1] += lineText;\n                    }\n                    else {\n                        result.push(lineText);\n                    }\n                }\n                if (start[1] !== end[1]) {\n                    var bufferLine = this._buffer.lines.get(end[1]);\n                    var lineText = this._buffer.translateBufferLineToString(end[1], true, 0, end[0]);\n                    if (bufferLine.isWrapped) {\n                        result[result.length - 1] += lineText;\n                    }\n                    else {\n                        result.push(lineText);\n                    }\n                }\n            }\n            var formattedResult = result.map(function (line) {\n                return line.replace(ALL_NON_BREAKING_SPACE_REGEX, ' ');\n            }).join(Browser.isMSWindows ? '\\r\\n' : '\\n');\n            return formattedResult;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    SelectionManager.prototype.clearSelection = function () {\n        this._model.clearSelection();\n        this._removeMouseDownListeners();\n        this.refresh();\n    };\n    SelectionManager.prototype.refresh = function (isNewSelection) {\n        var _this = this;\n        if (!this._refreshAnimationFrame) {\n            this._refreshAnimationFrame = window.requestAnimationFrame(function () { return _this._refresh(); });\n        }\n        if (Browser.isLinux && isNewSelection) {\n            var selectionText = this.selectionText;\n            if (selectionText.length) {\n                this.emit('newselection', this.selectionText);\n            }\n        }\n    };\n    SelectionManager.prototype._refresh = function () {\n        this._refreshAnimationFrame = null;\n        this.emit('refresh', {\n            start: this._model.finalSelectionStart,\n            end: this._model.finalSelectionEnd,\n            columnSelectMode: this._activeSelectionMode === 3\n        });\n    };\n    SelectionManager.prototype.isClickInSelection = function (event) {\n        var coords = this._getMouseBufferCoords(event);\n        var start = this._model.finalSelectionStart;\n        var end = this._model.finalSelectionEnd;\n        if (!start || !end) {\n            return false;\n        }\n        return this._areCoordsInSelection(coords, start, end);\n    };\n    SelectionManager.prototype._areCoordsInSelection = function (coords, start, end) {\n        return (coords[1] > start[1] && coords[1] < end[1]) ||\n            (start[1] === end[1] && coords[1] === start[1] && coords[0] >= start[0] && coords[0] < end[0]) ||\n            (start[1] < end[1] && coords[1] === end[1] && coords[0] < end[0]) ||\n            (start[1] < end[1] && coords[1] === start[1] && coords[0] >= start[0]);\n    };\n    SelectionManager.prototype.selectWordAtCursor = function (event) {\n        var coords = this._getMouseBufferCoords(event);\n        if (coords) {\n            this._selectWordAt(coords, false);\n            this._model.selectionEnd = null;\n            this.refresh(true);\n        }\n    };\n    SelectionManager.prototype.selectAll = function () {\n        this._model.isSelectAllActive = true;\n        this.refresh();\n        this._terminal.emit('selection');\n    };\n    SelectionManager.prototype.selectLines = function (start, end) {\n        this._model.clearSelection();\n        start = Math.max(start, 0);\n        end = Math.min(end, this._terminal.buffer.lines.length - 1);\n        this._model.selectionStart = [0, start];\n        this._model.selectionEnd = [this._terminal.cols, end];\n        this.refresh();\n        this._terminal.emit('selection');\n    };\n    SelectionManager.prototype._onTrim = function (amount) {\n        var needsRefresh = this._model.onTrim(amount);\n        if (needsRefresh) {\n            this.refresh();\n        }\n    };\n    SelectionManager.prototype._getMouseBufferCoords = function (event) {\n        var coords = this._terminal.mouseHelper.getCoords(event, this._terminal.screenElement, this._charMeasure, this._terminal.cols, this._terminal.rows, true);\n        if (!coords) {\n            return null;\n        }\n        coords[0]--;\n        coords[1]--;\n        coords[1] += this._terminal.buffer.ydisp;\n        return coords;\n    };\n    SelectionManager.prototype._getMouseEventScrollAmount = function (event) {\n        var offset = MouseHelper_1.MouseHelper.getCoordsRelativeToElement(event, this._terminal.screenElement)[1];\n        var terminalHeight = this._terminal.rows * Math.ceil(this._charMeasure.height * this._terminal.options.lineHeight);\n        if (offset >= 0 && offset <= terminalHeight) {\n            return 0;\n        }\n        if (offset > terminalHeight) {\n            offset -= terminalHeight;\n        }\n        offset = Math.min(Math.max(offset, -DRAG_SCROLL_MAX_THRESHOLD), DRAG_SCROLL_MAX_THRESHOLD);\n        offset /= DRAG_SCROLL_MAX_THRESHOLD;\n        return (offset / Math.abs(offset)) + Math.round(offset * (DRAG_SCROLL_MAX_SPEED - 1));\n    };\n    SelectionManager.prototype.shouldForceSelection = function (event) {\n        if (Browser.isMac) {\n            return event.altKey && this._terminal.options.macOptionClickForcesSelection;\n        }\n        return event.shiftKey;\n    };\n    SelectionManager.prototype.onMouseDown = function (event) {\n        this._mouseDownTimeStamp = event.timeStamp;\n        if (event.button === 2 && this.hasSelection) {\n            return;\n        }\n        if (event.button !== 0) {\n            return;\n        }\n        if (!this._enabled) {\n            if (!this.shouldForceSelection(event)) {\n                return;\n            }\n            event.stopPropagation();\n        }\n        event.preventDefault();\n        this._dragScrollAmount = 0;\n        if (this._enabled && event.shiftKey) {\n            this._onIncrementalClick(event);\n        }\n        else {\n            if (event.detail === 1) {\n                this._onSingleClick(event);\n            }\n            else if (event.detail === 2) {\n                this._onDoubleClick(event);\n            }\n            else if (event.detail === 3) {\n                this._onTripleClick(event);\n            }\n        }\n        this._addMouseDownListeners();\n        this.refresh(true);\n    };\n    SelectionManager.prototype._addMouseDownListeners = function () {\n        var _this = this;\n        this._terminal.element.ownerDocument.addEventListener('mousemove', this._mouseMoveListener);\n        this._terminal.element.ownerDocument.addEventListener('mouseup', this._mouseUpListener);\n        this._dragScrollIntervalTimer = setInterval(function () { return _this._dragScroll(); }, DRAG_SCROLL_INTERVAL);\n    };\n    SelectionManager.prototype._removeMouseDownListeners = function () {\n        if (this._terminal.element.ownerDocument) {\n            this._terminal.element.ownerDocument.removeEventListener('mousemove', this._mouseMoveListener);\n            this._terminal.element.ownerDocument.removeEventListener('mouseup', this._mouseUpListener);\n        }\n        clearInterval(this._dragScrollIntervalTimer);\n        this._dragScrollIntervalTimer = null;\n    };\n    SelectionManager.prototype._onIncrementalClick = function (event) {\n        if (this._model.selectionStart) {\n            this._model.selectionEnd = this._getMouseBufferCoords(event);\n        }\n    };\n    SelectionManager.prototype._onSingleClick = function (event) {\n        this._model.selectionStartLength = 0;\n        this._model.isSelectAllActive = false;\n        this._activeSelectionMode = this.shouldColumnSelect(event) ? 3 : 0;\n        this._model.selectionStart = this._getMouseBufferCoords(event);\n        if (!this._model.selectionStart) {\n            return;\n        }\n        this._model.selectionEnd = null;\n        var line = this._buffer.lines.get(this._model.selectionStart[1]);\n        if (!line) {\n            return;\n        }\n        if (line.length >= this._model.selectionStart[0]) {\n            return;\n        }\n        var char = line.get(this._model.selectionStart[0]);\n        if (char[Buffer_1.CHAR_DATA_WIDTH_INDEX] === 0) {\n            this._model.selectionStart[0]++;\n        }\n    };\n    SelectionManager.prototype._onDoubleClick = function (event) {\n        var coords = this._getMouseBufferCoords(event);\n        if (coords) {\n            this._activeSelectionMode = 1;\n            this._selectWordAt(coords, true);\n        }\n    };\n    SelectionManager.prototype._onTripleClick = function (event) {\n        var coords = this._getMouseBufferCoords(event);\n        if (coords) {\n            this._activeSelectionMode = 2;\n            this._selectLineAt(coords[1]);\n        }\n    };\n    SelectionManager.prototype.shouldColumnSelect = function (event) {\n        return event.altKey && !(Browser.isMac && this._terminal.options.macOptionClickForcesSelection);\n    };\n    SelectionManager.prototype._onMouseMove = function (event) {\n        event.stopImmediatePropagation();\n        var previousSelectionEnd = this._model.selectionEnd ? [this._model.selectionEnd[0], this._model.selectionEnd[1]] : null;\n        this._model.selectionEnd = this._getMouseBufferCoords(event);\n        if (!this._model.selectionEnd) {\n            this.refresh(true);\n            return;\n        }\n        if (this._activeSelectionMode === 2) {\n            if (this._model.selectionEnd[1] < this._model.selectionStart[1]) {\n                this._model.selectionEnd[0] = 0;\n            }\n            else {\n                this._model.selectionEnd[0] = this._terminal.cols;\n            }\n        }\n        else if (this._activeSelectionMode === 1) {\n            this._selectToWordAt(this._model.selectionEnd);\n        }\n        this._dragScrollAmount = this._getMouseEventScrollAmount(event);\n        if (this._activeSelectionMode !== 3) {\n            if (this._dragScrollAmount > 0) {\n                this._model.selectionEnd[0] = this._terminal.cols;\n            }\n            else if (this._dragScrollAmount < 0) {\n                this._model.selectionEnd[0] = 0;\n            }\n        }\n        if (this._model.selectionEnd[1] < this._buffer.lines.length) {\n            var char = this._buffer.lines.get(this._model.selectionEnd[1]).get(this._model.selectionEnd[0]);\n            if (char && char[Buffer_1.CHAR_DATA_WIDTH_INDEX] === 0) {\n                this._model.selectionEnd[0]++;\n            }\n        }\n        if (!previousSelectionEnd ||\n            previousSelectionEnd[0] !== this._model.selectionEnd[0] ||\n            previousSelectionEnd[1] !== this._model.selectionEnd[1]) {\n            this.refresh(true);\n        }\n    };\n    SelectionManager.prototype._dragScroll = function () {\n        if (this._dragScrollAmount) {\n            this._terminal.scrollLines(this._dragScrollAmount, false);\n            if (this._dragScrollAmount > 0) {\n                if (this._activeSelectionMode !== 3) {\n                    this._model.selectionEnd[0] = this._terminal.cols;\n                }\n                this._model.selectionEnd[1] = Math.min(this._terminal.buffer.ydisp + this._terminal.rows, this._terminal.buffer.lines.length - 1);\n            }\n            else {\n                if (this._activeSelectionMode !== 3) {\n                    this._model.selectionEnd[0] = 0;\n                }\n                this._model.selectionEnd[1] = this._terminal.buffer.ydisp;\n            }\n            this.refresh();\n        }\n    };\n    SelectionManager.prototype._onMouseUp = function (event) {\n        var timeElapsed = event.timeStamp - this._mouseDownTimeStamp;\n        this._removeMouseDownListeners();\n        if (this.selectionText.length <= 1 && timeElapsed < ALT_CLICK_MOVE_CURSOR_TIME) {\n            (new AltClickHandler_1.AltClickHandler(event, this._terminal)).move();\n        }\n        else if (this.hasSelection) {\n            this._terminal.emit('selection');\n        }\n    };\n    SelectionManager.prototype._onBufferActivate = function (e) {\n        this.clearSelection();\n        e.inactiveBuffer.lines.off('trim', this._trimListener);\n        e.activeBuffer.lines.on('trim', this._trimListener);\n    };\n    SelectionManager.prototype._convertViewportColToCharacterIndex = function (bufferLine, coords) {\n        var charIndex = coords[0];\n        for (var i = 0; coords[0] >= i; i++) {\n            var char = bufferLine.get(i);\n            if (char[Buffer_1.CHAR_DATA_WIDTH_INDEX] === 0) {\n                charIndex--;\n            }\n            else if (char[Buffer_1.CHAR_DATA_CHAR_INDEX].length > 1 && coords[0] !== i) {\n                charIndex += char[Buffer_1.CHAR_DATA_CHAR_INDEX].length - 1;\n            }\n        }\n        return charIndex;\n    };\n    SelectionManager.prototype.setSelection = function (col, row, length) {\n        this._model.clearSelection();\n        this._removeMouseDownListeners();\n        this._model.selectionStart = [col, row];\n        this._model.selectionStartLength = length;\n        this.refresh();\n    };\n    SelectionManager.prototype._getWordAt = function (coords, allowWhitespaceOnlySelection, followWrappedLinesAbove, followWrappedLinesBelow) {\n        if (followWrappedLinesAbove === void 0) { followWrappedLinesAbove = true; }\n        if (followWrappedLinesBelow === void 0) { followWrappedLinesBelow = true; }\n        if (coords[0] >= this._terminal.cols) {\n            return null;\n        }\n        var bufferLine = this._buffer.lines.get(coords[1]);\n        if (!bufferLine) {\n            return null;\n        }\n        var line = this._buffer.translateBufferLineToString(coords[1], false);\n        var startIndex = this._convertViewportColToCharacterIndex(bufferLine, coords);\n        var endIndex = startIndex;\n        var charOffset = coords[0] - startIndex;\n        var leftWideCharCount = 0;\n        var rightWideCharCount = 0;\n        var leftLongCharOffset = 0;\n        var rightLongCharOffset = 0;\n        if (line.charAt(startIndex) === ' ') {\n            while (startIndex > 0 && line.charAt(startIndex - 1) === ' ') {\n                startIndex--;\n            }\n            while (endIndex < line.length && line.charAt(endIndex + 1) === ' ') {\n                endIndex++;\n            }\n        }\n        else {\n            var startCol = coords[0];\n            var endCol = coords[0];\n            if (bufferLine.get(startCol)[Buffer_1.CHAR_DATA_WIDTH_INDEX] === 0) {\n                leftWideCharCount++;\n                startCol--;\n            }\n            if (bufferLine.get(endCol)[Buffer_1.CHAR_DATA_WIDTH_INDEX] === 2) {\n                rightWideCharCount++;\n                endCol++;\n            }\n            if (bufferLine.get(endCol)[Buffer_1.CHAR_DATA_CHAR_INDEX].length > 1) {\n                rightLongCharOffset += bufferLine.get(endCol)[Buffer_1.CHAR_DATA_CHAR_INDEX].length - 1;\n                endIndex += bufferLine.get(endCol)[Buffer_1.CHAR_DATA_CHAR_INDEX].length - 1;\n            }\n            while (startCol > 0 && startIndex > 0 && !this._isCharWordSeparator(bufferLine.get(startCol - 1))) {\n                var char = bufferLine.get(startCol - 1);\n                if (char[Buffer_1.CHAR_DATA_WIDTH_INDEX] === 0) {\n                    leftWideCharCount++;\n                    startCol--;\n                }\n                else if (char[Buffer_1.CHAR_DATA_CHAR_INDEX].length > 1) {\n                    leftLongCharOffset += char[Buffer_1.CHAR_DATA_CHAR_INDEX].length - 1;\n                    startIndex -= char[Buffer_1.CHAR_DATA_CHAR_INDEX].length - 1;\n                }\n                startIndex--;\n                startCol--;\n            }\n            while (endCol < bufferLine.length && endIndex + 1 < line.length && !this._isCharWordSeparator(bufferLine.get(endCol + 1))) {\n                var char = bufferLine.get(endCol + 1);\n                if (char[Buffer_1.CHAR_DATA_WIDTH_INDEX] === 2) {\n                    rightWideCharCount++;\n                    endCol++;\n                }\n                else if (char[Buffer_1.CHAR_DATA_CHAR_INDEX].length > 1) {\n                    rightLongCharOffset += char[Buffer_1.CHAR_DATA_CHAR_INDEX].length - 1;\n                    endIndex += char[Buffer_1.CHAR_DATA_CHAR_INDEX].length - 1;\n                }\n                endIndex++;\n                endCol++;\n            }\n        }\n        endIndex++;\n        var start = startIndex\n            + charOffset\n            - leftWideCharCount\n            + leftLongCharOffset;\n        var length = Math.min(this._terminal.cols, endIndex\n            - startIndex\n            + leftWideCharCount\n            + rightWideCharCount\n            - leftLongCharOffset\n            - rightLongCharOffset);\n        if (!allowWhitespaceOnlySelection && line.slice(startIndex, endIndex).trim() === '') {\n            return null;\n        }\n        if (followWrappedLinesAbove) {\n            if (start === 0 && bufferLine.get(0)[Buffer_1.CHAR_DATA_CODE_INDEX] !== 32) {\n                var previousBufferLine = this._buffer.lines.get(coords[1] - 1);\n                if (previousBufferLine && bufferLine.isWrapped && previousBufferLine.get(this._terminal.cols - 1)[Buffer_1.CHAR_DATA_CODE_INDEX] !== 32) {\n                    var previousLineWordPosition = this._getWordAt([this._terminal.cols - 1, coords[1] - 1], false, true, false);\n                    if (previousLineWordPosition) {\n                        var offset = this._terminal.cols - previousLineWordPosition.start;\n                        start -= offset;\n                        length += offset;\n                    }\n                }\n            }\n        }\n        if (followWrappedLinesBelow) {\n            if (start + length === this._terminal.cols && bufferLine.get(this._terminal.cols - 1)[Buffer_1.CHAR_DATA_CODE_INDEX] !== 32) {\n                var nextBufferLine = this._buffer.lines.get(coords[1] + 1);\n                if (nextBufferLine && nextBufferLine.isWrapped && nextBufferLine.get(0)[Buffer_1.CHAR_DATA_CODE_INDEX] !== 32) {\n                    var nextLineWordPosition = this._getWordAt([0, coords[1] + 1], false, false, true);\n                    if (nextLineWordPosition) {\n                        length += nextLineWordPosition.length;\n                    }\n                }\n            }\n        }\n        return { start: start, length: length };\n    };\n    SelectionManager.prototype._selectWordAt = function (coords, allowWhitespaceOnlySelection) {\n        var wordPosition = this._getWordAt(coords, allowWhitespaceOnlySelection);\n        if (wordPosition) {\n            while (wordPosition.start < 0) {\n                wordPosition.start += this._terminal.cols;\n                coords[1]--;\n            }\n            this._model.selectionStart = [wordPosition.start, coords[1]];\n            this._model.selectionStartLength = wordPosition.length;\n        }\n    };\n    SelectionManager.prototype._selectToWordAt = function (coords) {\n        var wordPosition = this._getWordAt(coords, true);\n        if (wordPosition) {\n            var endRow = coords[1];\n            while (wordPosition.start < 0) {\n                wordPosition.start += this._terminal.cols;\n                endRow--;\n            }\n            if (!this._model.areSelectionValuesReversed()) {\n                while (wordPosition.start + wordPosition.length > this._terminal.cols) {\n                    wordPosition.length -= this._terminal.cols;\n                    endRow++;\n                }\n            }\n            this._model.selectionEnd = [this._model.areSelectionValuesReversed() ? wordPosition.start : wordPosition.start + wordPosition.length, endRow];\n        }\n    };\n    SelectionManager.prototype._isCharWordSeparator = function (charData) {\n        if (charData[Buffer_1.CHAR_DATA_WIDTH_INDEX] === 0) {\n            return false;\n        }\n        return WORD_SEPARATORS.indexOf(charData[Buffer_1.CHAR_DATA_CHAR_INDEX]) >= 0;\n    };\n    SelectionManager.prototype._selectLineAt = function (line) {\n        var wrappedRange = this._buffer.getWrappedRangeForLine(line);\n        this._model.selectionStart = [0, wrappedRange.first];\n        this._model.selectionEnd = [this._terminal.cols, wrappedRange.last];\n        this._model.selectionStartLength = 0;\n    };\n    return SelectionManager;\n}(EventEmitter_1.EventEmitter));\nexports.SelectionManager = SelectionManager;\n//# sourceMappingURL=SelectionManager.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Types_1 = require(\"./Types\");\nvar CharAtlasGenerator_1 = require(\"./CharAtlasGenerator\");\nvar BaseCharAtlas_1 = require(\"./BaseCharAtlas\");\nvar CharAtlasUtils_1 = require(\"./CharAtlasUtils\");\nvar StaticCharAtlas = (function (_super) {\n    __extends(StaticCharAtlas, _super);\n    function StaticCharAtlas(_document, _config) {\n        var _this = _super.call(this) || this;\n        _this._document = _document;\n        _this._config = _config;\n        _this._canvasFactory = function (width, height) {\n            var canvas = _this._document.createElement('canvas');\n            canvas.width = width;\n            canvas.height = height;\n            return canvas;\n        };\n        return _this;\n    }\n    StaticCharAtlas.prototype._doWarmUp = function () {\n        var _this = this;\n        var result = CharAtlasGenerator_1.generateStaticCharAtlasTexture(window, this._canvasFactory, this._config);\n        if (result instanceof HTMLCanvasElement) {\n            this._texture = result;\n        }\n        else {\n            result.then(function (texture) {\n                _this._texture = texture;\n            });\n        }\n    };\n    StaticCharAtlas.prototype._isCached = function (glyph, colorIndex) {\n        var isAscii = glyph.code < 256;\n        var isBasicColor = glyph.fg < 16;\n        var isDefaultColor = glyph.fg === Types_1.DEFAULT_COLOR;\n        var isDefaultBackground = glyph.bg === Types_1.DEFAULT_COLOR;\n        return isAscii && (isBasicColor || isDefaultColor) && isDefaultBackground && !glyph.italic;\n    };\n    StaticCharAtlas.prototype.draw = function (ctx, glyph, x, y) {\n        if (this._texture === null || this._texture === undefined) {\n            return false;\n        }\n        var colorIndex = 0;\n        if (CharAtlasUtils_1.is256Color(glyph.fg)) {\n            colorIndex = 2 + glyph.fg + (glyph.bold ? 16 : 0);\n        }\n        else if (glyph.fg === Types_1.DEFAULT_COLOR) {\n            if (glyph.bold) {\n                colorIndex = 1;\n            }\n        }\n        if (!this._isCached(glyph, colorIndex)) {\n            return false;\n        }\n        ctx.save();\n        var charAtlasCellWidth = this._config.scaledCharWidth + Types_1.CHAR_ATLAS_CELL_SPACING;\n        var charAtlasCellHeight = this._config.scaledCharHeight + Types_1.CHAR_ATLAS_CELL_SPACING;\n        if (glyph.dim) {\n            ctx.globalAlpha = Types_1.DIM_OPACITY;\n        }\n        ctx.drawImage(this._texture, glyph.code * charAtlasCellWidth, colorIndex * charAtlasCellHeight, charAtlasCellWidth, this._config.scaledCharHeight, x, y, charAtlasCellWidth, this._config.scaledCharHeight);\n        ctx.restore();\n        return true;\n    };\n    return StaticCharAtlas;\n}(BaseCharAtlas_1.default));\nexports.default = StaticCharAtlas;\n//# sourceMappingURL=StaticCharAtlas.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Buffer_1 = require(\"../Buffer\");\nvar Types_1 = require(\"./atlas/Types\");\nvar GridCache_1 = require(\"./GridCache\");\nvar BaseRenderLayer_1 = require(\"./BaseRenderLayer\");\nvar CharAtlasUtils_1 = require(\"./atlas/CharAtlasUtils\");\nvar TextRenderLayer = (function (_super) {\n    __extends(TextRenderLayer, _super);\n    function TextRenderLayer(container, zIndex, colors, characterJoinerRegistry, alpha) {\n        var _this = _super.call(this, container, 'text', zIndex, alpha, colors) || this;\n        _this._characterOverlapCache = {};\n        _this._state = new GridCache_1.GridCache();\n        _this._characterJoinerRegistry = characterJoinerRegistry;\n        return _this;\n    }\n    TextRenderLayer.prototype.resize = function (terminal, dim) {\n        _super.prototype.resize.call(this, terminal, dim);\n        var terminalFont = this._getFont(terminal, false, false);\n        if (this._characterWidth !== dim.scaledCharWidth || this._characterFont !== terminalFont) {\n            this._characterWidth = dim.scaledCharWidth;\n            this._characterFont = terminalFont;\n            this._characterOverlapCache = {};\n        }\n        this._state.clear();\n        this._state.resize(terminal.cols, terminal.rows);\n    };\n    TextRenderLayer.prototype.reset = function (terminal) {\n        this._state.clear();\n        this.clearAll();\n    };\n    TextRenderLayer.prototype._forEachCell = function (terminal, firstRow, lastRow, joinerRegistry, callback) {\n        for (var y = firstRow; y <= lastRow; y++) {\n            var row = y + terminal.buffer.ydisp;\n            var line = terminal.buffer.lines.get(row);\n            var joinedRanges = joinerRegistry ? joinerRegistry.getJoinedCharacters(row) : [];\n            for (var x = 0; x < terminal.cols; x++) {\n                var charData = line.get(x);\n                var code = charData[Buffer_1.CHAR_DATA_CODE_INDEX];\n                var chars = charData[Buffer_1.CHAR_DATA_CHAR_INDEX];\n                var attr = charData[Buffer_1.CHAR_DATA_ATTR_INDEX];\n                var width = charData[Buffer_1.CHAR_DATA_WIDTH_INDEX];\n                var isJoined = false;\n                var lastCharX = x;\n                if (width === 0) {\n                    continue;\n                }\n                if (joinedRanges.length > 0 && x === joinedRanges[0][0]) {\n                    isJoined = true;\n                    var range = joinedRanges.shift();\n                    chars = terminal.buffer.translateBufferLineToString(row, true, range[0], range[1]);\n                    width = range[1] - range[0];\n                    code = Infinity;\n                    lastCharX = range[1] - 1;\n                }\n                if (!isJoined && this._isOverlapping(charData)) {\n                    if (lastCharX < line.length - 1 && line.get(lastCharX + 1)[Buffer_1.CHAR_DATA_CODE_INDEX] === Buffer_1.NULL_CELL_CODE) {\n                        width = 2;\n                    }\n                }\n                var flags = attr >> 18;\n                var bg = attr & 0x1ff;\n                var fg = (attr >> 9) & 0x1ff;\n                if (flags & 8) {\n                    var temp = bg;\n                    bg = fg;\n                    fg = temp;\n                    if (fg === Types_1.DEFAULT_COLOR) {\n                        fg = Types_1.INVERTED_DEFAULT_COLOR;\n                    }\n                    if (bg === Types_1.DEFAULT_COLOR) {\n                        bg = Types_1.INVERTED_DEFAULT_COLOR;\n                    }\n                }\n                callback(code, chars, width, x, y, fg, bg, flags);\n                x = lastCharX;\n            }\n        }\n    };\n    TextRenderLayer.prototype._drawBackground = function (terminal, firstRow, lastRow) {\n        var _this = this;\n        var ctx = this._ctx;\n        var cols = terminal.cols;\n        var startX = 0;\n        var startY = 0;\n        var prevFillStyle = null;\n        ctx.save();\n        this._forEachCell(terminal, firstRow, lastRow, null, function (code, chars, width, x, y, fg, bg, flags) {\n            var nextFillStyle = null;\n            if (bg === Types_1.INVERTED_DEFAULT_COLOR) {\n                nextFillStyle = _this._colors.foreground.css;\n            }\n            else if (CharAtlasUtils_1.is256Color(bg)) {\n                nextFillStyle = _this._colors.ansi[bg].css;\n            }\n            if (prevFillStyle === null) {\n                startX = x;\n                startY = y;\n            }\n            if (y !== startY) {\n                ctx.fillStyle = prevFillStyle;\n                _this.fillCells(startX, startY, cols - startX, 1);\n                startX = x;\n                startY = y;\n            }\n            else if (prevFillStyle !== nextFillStyle) {\n                ctx.fillStyle = prevFillStyle;\n                _this.fillCells(startX, startY, x - startX, 1);\n                startX = x;\n                startY = y;\n            }\n            prevFillStyle = nextFillStyle;\n        });\n        if (prevFillStyle !== null) {\n            ctx.fillStyle = prevFillStyle;\n            this.fillCells(startX, startY, cols - startX, 1);\n        }\n        ctx.restore();\n    };\n    TextRenderLayer.prototype._drawForeground = function (terminal, firstRow, lastRow) {\n        var _this = this;\n        this._forEachCell(terminal, firstRow, lastRow, this._characterJoinerRegistry, function (code, chars, width, x, y, fg, bg, flags) {\n            if (flags & 16) {\n                return;\n            }\n            if (flags & 2) {\n                _this._ctx.save();\n                if (fg === Types_1.INVERTED_DEFAULT_COLOR) {\n                    _this._ctx.fillStyle = _this._colors.background.css;\n                }\n                else if (CharAtlasUtils_1.is256Color(fg)) {\n                    _this._ctx.fillStyle = _this._colors.ansi[fg].css;\n                }\n                else {\n                    _this._ctx.fillStyle = _this._colors.foreground.css;\n                }\n                _this.fillBottomLineAtCells(x, y, width);\n                _this._ctx.restore();\n            }\n            _this.drawChars(terminal, chars, code, width, x, y, fg, bg, !!(flags & 1), !!(flags & 32), !!(flags & 64));\n        });\n    };\n    TextRenderLayer.prototype.onGridChanged = function (terminal, firstRow, lastRow) {\n        if (this._state.cache.length === 0) {\n            return;\n        }\n        if (this._charAtlas) {\n            this._charAtlas.beginFrame();\n        }\n        this.clearCells(0, firstRow, terminal.cols, lastRow - firstRow + 1);\n        this._drawBackground(terminal, firstRow, lastRow);\n        this._drawForeground(terminal, firstRow, lastRow);\n    };\n    TextRenderLayer.prototype.onOptionsChanged = function (terminal) {\n        this.setTransparency(terminal, terminal.options.allowTransparency);\n    };\n    TextRenderLayer.prototype._isOverlapping = function (charData) {\n        if (charData[Buffer_1.CHAR_DATA_WIDTH_INDEX] !== 1) {\n            return false;\n        }\n        var code = charData[Buffer_1.CHAR_DATA_CODE_INDEX];\n        if (code < 256) {\n            return false;\n        }\n        var char = charData[Buffer_1.CHAR_DATA_CHAR_INDEX];\n        if (this._characterOverlapCache.hasOwnProperty(char)) {\n            return this._characterOverlapCache[char];\n        }\n        this._ctx.save();\n        this._ctx.font = this._characterFont;\n        var overlaps = Math.floor(this._ctx.measureText(char).width) > this._characterWidth;\n        this._ctx.restore();\n        this._characterOverlapCache[char] = overlaps;\n        return overlaps;\n    };\n    return TextRenderLayer;\n}(BaseRenderLayer_1.BaseRenderLayer));\nexports.TextRenderLayer = TextRenderLayer;\n//# sourceMappingURL=TextRenderLayer.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Types_1 = require(\"./Types\");\nfunction generateConfig(scaledCharWidth, scaledCharHeight, terminal, colors) {\n    var clonedColors = {\n        foreground: colors.foreground,\n        background: colors.background,\n        cursor: null,\n        cursorAccent: null,\n        selection: null,\n        ansi: colors.ansi.slice(0, 16)\n    };\n    return {\n        type: terminal.options.experimentalCharAtlas,\n        devicePixelRatio: window.devicePixelRatio,\n        scaledCharWidth: scaledCharWidth,\n        scaledCharHeight: scaledCharHeight,\n        fontFamily: terminal.options.fontFamily,\n        fontSize: terminal.options.fontSize,\n        fontWeight: terminal.options.fontWeight,\n        fontWeightBold: terminal.options.fontWeightBold,\n        allowTransparency: terminal.options.allowTransparency,\n        colors: clonedColors\n    };\n}\nexports.generateConfig = generateConfig;\nfunction configEquals(a, b) {\n    for (var i = 0; i < a.colors.ansi.length; i++) {\n        if (a.colors.ansi[i].rgba !== b.colors.ansi[i].rgba) {\n            return false;\n        }\n    }\n    return a.type === b.type &&\n        a.devicePixelRatio === b.devicePixelRatio &&\n        a.fontFamily === b.fontFamily &&\n        a.fontSize === b.fontSize &&\n        a.fontWeight === b.fontWeight &&\n        a.fontWeightBold === b.fontWeightBold &&\n        a.allowTransparency === b.allowTransparency &&\n        a.scaledCharWidth === b.scaledCharWidth &&\n        a.scaledCharHeight === b.scaledCharHeight &&\n        a.colors.foreground === b.colors.foreground &&\n        a.colors.background === b.colors.background;\n}\nexports.configEquals = configEquals;\nfunction is256Color(colorCode) {\n    return colorCode < Types_1.DEFAULT_COLOR;\n}\nexports.is256Color = is256Color;\n//# sourceMappingURL=CharAtlasUtils.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar MouseHelper = (function () {\n    function MouseHelper(_renderer) {\n        this._renderer = _renderer;\n    }\n    MouseHelper.prototype.setRenderer = function (renderer) {\n        this._renderer = renderer;\n    };\n    MouseHelper.getCoordsRelativeToElement = function (event, element) {\n        if (event.pageX === null || event.pageX === undefined) {\n            return null;\n        }\n        var originalElement = element;\n        var x = event.pageX;\n        var y = event.pageY;\n        while (element) {\n            x -= element.offsetLeft;\n            y -= element.offsetTop;\n            element = element.offsetParent;\n        }\n        element = originalElement;\n        while (element && element !== element.ownerDocument.body) {\n            x += element.scrollLeft;\n            y += element.scrollTop;\n            element = element.parentElement;\n        }\n        return [x, y];\n    };\n    MouseHelper.prototype.getCoords = function (event, element, charMeasure, colCount, rowCount, isSelection) {\n        if (!charMeasure.width || !charMeasure.height) {\n            return null;\n        }\n        var coords = MouseHelper.getCoordsRelativeToElement(event, element);\n        if (!coords) {\n            return null;\n        }\n        coords[0] = Math.ceil((coords[0] + (isSelection ? this._renderer.dimensions.actualCellWidth / 2 : 0)) / this._renderer.dimensions.actualCellWidth);\n        coords[1] = Math.ceil(coords[1] / this._renderer.dimensions.actualCellHeight);\n        coords[0] = Math.min(Math.max(coords[0], 1), colCount + (isSelection ? 1 : 0));\n        coords[1] = Math.min(Math.max(coords[1], 1), rowCount);\n        return coords;\n    };\n    MouseHelper.prototype.getRawByteCoords = function (event, element, charMeasure, colCount, rowCount) {\n        var coords = this.getCoords(event, element, charMeasure, colCount, rowCount);\n        var x = coords[0];\n        var y = coords[1];\n        x += 32;\n        y += 32;\n        return { x: x, y: y };\n    };\n    return MouseHelper;\n}());\nexports.MouseHelper = MouseHelper;\n//# sourceMappingURL=MouseHelper.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar protocolClause = '(https?:\\\\/\\\\/)';\nvar domainCharacterSet = '[\\\\da-z\\\\.-]+';\nvar negatedDomainCharacterSet = '[^\\\\da-z\\\\.-]+';\nvar domainBodyClause = '(' + domainCharacterSet + ')';\nvar tldClause = '([a-z\\\\.]{2,6})';\nvar ipClause = '((\\\\d{1,3}\\\\.){3}\\\\d{1,3})';\nvar localHostClause = '(localhost)';\nvar portClause = '(:\\\\d{1,5})';\nvar hostClause = '((' + domainBodyClause + '\\\\.' + tldClause + ')|' + ipClause + '|' + localHostClause + ')' + portClause + '?';\nvar pathClause = '(\\\\/[\\\\/\\\\w\\\\.\\\\-%~:]*)*([^:\\\\s])';\nvar queryStringHashFragmentCharacterSet = '[0-9\\\\w\\\\[\\\\]\\\\(\\\\)\\\\/\\\\?\\\\!#@$%&\\'*+,:;~\\\\=\\\\.\\\\-]*';\nvar queryStringClause = '(\\\\?' + queryStringHashFragmentCharacterSet + ')?';\nvar hashFragmentClause = '(#' + queryStringHashFragmentCharacterSet + ')?';\nvar negatedPathCharacterSet = '[^\\\\/\\\\w\\\\.\\\\-%]+';\nvar bodyClause = hostClause + pathClause + queryStringClause + hashFragmentClause;\nvar start = '(?:^|' + negatedDomainCharacterSet + ')(';\nvar end = ')($|' + negatedPathCharacterSet + ')';\nvar strictUrlRegex = new RegExp(start + protocolClause + bodyClause + end);\nfunction handleLink(event, uri) {\n    window.open(uri, '_blank');\n}\nfunction webLinksInit(term, handler, options) {\n    if (handler === void 0) { handler = handleLink; }\n    if (options === void 0) { options = {}; }\n    options.matchIndex = 1;\n    term.registerLinkMatcher(strictUrlRegex, handler, options);\n}\nexports.webLinksInit = webLinksInit;\nfunction apply(terminalConstructor) {\n    terminalConstructor.prototype.webLinksInit = function (handler, options) {\n        webLinksInit(this, handler, options);\n    };\n}\nexports.apply = apply;\n//# sourceMappingURL=webLinks.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Buffer_1 = require(\"../Buffer\");\nvar BaseRenderLayer_1 = require(\"./BaseRenderLayer\");\nvar BLINK_INTERVAL = 600;\nvar CursorRenderLayer = (function (_super) {\n    __extends(CursorRenderLayer, _super);\n    function CursorRenderLayer(container, zIndex, colors) {\n        var _this = _super.call(this, container, 'cursor', zIndex, true, colors) || this;\n        _this._state = {\n            x: null,\n            y: null,\n            isFocused: null,\n            style: null,\n            width: null\n        };\n        _this._cursorRenderers = {\n            'bar': _this._renderBarCursor.bind(_this),\n            'block': _this._renderBlockCursor.bind(_this),\n            'underline': _this._renderUnderlineCursor.bind(_this)\n        };\n        return _this;\n    }\n    CursorRenderLayer.prototype.resize = function (terminal, dim) {\n        _super.prototype.resize.call(this, terminal, dim);\n        this._state = {\n            x: null,\n            y: null,\n            isFocused: null,\n            style: null,\n            width: null\n        };\n    };\n    CursorRenderLayer.prototype.reset = function (terminal) {\n        this._clearCursor();\n        if (this._cursorBlinkStateManager) {\n            this._cursorBlinkStateManager.dispose();\n            this._cursorBlinkStateManager = null;\n            this.onOptionsChanged(terminal);\n        }\n    };\n    CursorRenderLayer.prototype.onBlur = function (terminal) {\n        if (this._cursorBlinkStateManager) {\n            this._cursorBlinkStateManager.pause();\n        }\n        terminal.refresh(terminal.buffer.y, terminal.buffer.y);\n    };\n    CursorRenderLayer.prototype.onFocus = function (terminal) {\n        if (this._cursorBlinkStateManager) {\n            this._cursorBlinkStateManager.resume(terminal);\n        }\n        else {\n            terminal.refresh(terminal.buffer.y, terminal.buffer.y);\n        }\n    };\n    CursorRenderLayer.prototype.onOptionsChanged = function (terminal) {\n        var _this = this;\n        if (terminal.options.cursorBlink) {\n            if (!this._cursorBlinkStateManager) {\n                this._cursorBlinkStateManager = new CursorBlinkStateManager(terminal, function () {\n                    _this._render(terminal, true);\n                });\n            }\n        }\n        else {\n            if (this._cursorBlinkStateManager) {\n                this._cursorBlinkStateManager.dispose();\n                this._cursorBlinkStateManager = null;\n            }\n            terminal.refresh(terminal.buffer.y, terminal.buffer.y);\n        }\n    };\n    CursorRenderLayer.prototype.onCursorMove = function (terminal) {\n        if (this._cursorBlinkStateManager) {\n            this._cursorBlinkStateManager.restartBlinkAnimation(terminal);\n        }\n    };\n    CursorRenderLayer.prototype.onGridChanged = function (terminal, startRow, endRow) {\n        if (!this._cursorBlinkStateManager || this._cursorBlinkStateManager.isPaused) {\n            this._render(terminal, false);\n        }\n        else {\n            this._cursorBlinkStateManager.restartBlinkAnimation(terminal);\n        }\n    };\n    CursorRenderLayer.prototype._render = function (terminal, triggeredByAnimationFrame) {\n        if (!terminal.cursorState || terminal.cursorHidden) {\n            this._clearCursor();\n            return;\n        }\n        var cursorY = terminal.buffer.ybase + terminal.buffer.y;\n        var viewportRelativeCursorY = cursorY - terminal.buffer.ydisp;\n        if (viewportRelativeCursorY < 0 || viewportRelativeCursorY >= terminal.rows) {\n            this._clearCursor();\n            return;\n        }\n        var charData = terminal.buffer.lines.get(cursorY).get(terminal.buffer.x);\n        if (!charData) {\n            return;\n        }\n        if (!terminal.isFocused) {\n            this._clearCursor();\n            this._ctx.save();\n            this._ctx.fillStyle = this._colors.cursor.css;\n            this._renderBlurCursor(terminal, terminal.buffer.x, viewportRelativeCursorY, charData);\n            this._ctx.restore();\n            this._state.x = terminal.buffer.x;\n            this._state.y = viewportRelativeCursorY;\n            this._state.isFocused = false;\n            this._state.style = terminal.options.cursorStyle;\n            this._state.width = charData[Buffer_1.CHAR_DATA_WIDTH_INDEX];\n            return;\n        }\n        if (this._cursorBlinkStateManager && !this._cursorBlinkStateManager.isCursorVisible) {\n            this._clearCursor();\n            return;\n        }\n        if (this._state) {\n            if (this._state.x === terminal.buffer.x &&\n                this._state.y === viewportRelativeCursorY &&\n                this._state.isFocused === terminal.isFocused &&\n                this._state.style === terminal.options.cursorStyle &&\n                this._state.width === charData[Buffer_1.CHAR_DATA_WIDTH_INDEX]) {\n                return;\n            }\n            this._clearCursor();\n        }\n        this._ctx.save();\n        this._cursorRenderers[terminal.options.cursorStyle || 'block'](terminal, terminal.buffer.x, viewportRelativeCursorY, charData);\n        this._ctx.restore();\n        this._state.x = terminal.buffer.x;\n        this._state.y = viewportRelativeCursorY;\n        this._state.isFocused = false;\n        this._state.style = terminal.options.cursorStyle;\n        this._state.width = charData[Buffer_1.CHAR_DATA_WIDTH_INDEX];\n    };\n    CursorRenderLayer.prototype._clearCursor = function () {\n        if (this._state) {\n            this.clearCells(this._state.x, this._state.y, this._state.width, 1);\n            this._state = {\n                x: null,\n                y: null,\n                isFocused: null,\n                style: null,\n                width: null\n            };\n        }\n    };\n    CursorRenderLayer.prototype._renderBarCursor = function (terminal, x, y, charData) {\n        this._ctx.save();\n        this._ctx.fillStyle = this._colors.cursor.css;\n        this.fillLeftLineAtCell(x, y);\n        this._ctx.restore();\n    };\n    CursorRenderLayer.prototype._renderBlockCursor = function (terminal, x, y, charData) {\n        this._ctx.save();\n        this._ctx.fillStyle = this._colors.cursor.css;\n        this.fillCells(x, y, charData[Buffer_1.CHAR_DATA_WIDTH_INDEX], 1);\n        this._ctx.fillStyle = this._colors.cursorAccent.css;\n        this.fillCharTrueColor(terminal, charData, x, y);\n        this._ctx.restore();\n    };\n    CursorRenderLayer.prototype._renderUnderlineCursor = function (terminal, x, y, charData) {\n        this._ctx.save();\n        this._ctx.fillStyle = this._colors.cursor.css;\n        this.fillBottomLineAtCells(x, y);\n        this._ctx.restore();\n    };\n    CursorRenderLayer.prototype._renderBlurCursor = function (terminal, x, y, charData) {\n        this._ctx.save();\n        this._ctx.strokeStyle = this._colors.cursor.css;\n        this.strokeRectAtCell(x, y, charData[Buffer_1.CHAR_DATA_WIDTH_INDEX], 1);\n        this._ctx.restore();\n    };\n    return CursorRenderLayer;\n}(BaseRenderLayer_1.BaseRenderLayer));\nexports.CursorRenderLayer = CursorRenderLayer;\nvar CursorBlinkStateManager = (function () {\n    function CursorBlinkStateManager(terminal, _renderCallback) {\n        this._renderCallback = _renderCallback;\n        this.isCursorVisible = true;\n        if (terminal.isFocused) {\n            this._restartInterval();\n        }\n    }\n    Object.defineProperty(CursorBlinkStateManager.prototype, \"isPaused\", {\n        get: function () { return !(this._blinkStartTimeout || this._blinkInterval); },\n        enumerable: true,\n        configurable: true\n    });\n    CursorBlinkStateManager.prototype.dispose = function () {\n        if (this._blinkInterval) {\n            window.clearInterval(this._blinkInterval);\n            this._blinkInterval = null;\n        }\n        if (this._blinkStartTimeout) {\n            window.clearTimeout(this._blinkStartTimeout);\n            this._blinkStartTimeout = null;\n        }\n        if (this._animationFrame) {\n            window.cancelAnimationFrame(this._animationFrame);\n            this._animationFrame = null;\n        }\n    };\n    CursorBlinkStateManager.prototype.restartBlinkAnimation = function (terminal) {\n        var _this = this;\n        if (this.isPaused) {\n            return;\n        }\n        this._animationTimeRestarted = Date.now();\n        this.isCursorVisible = true;\n        if (!this._animationFrame) {\n            this._animationFrame = window.requestAnimationFrame(function () {\n                _this._renderCallback();\n                _this._animationFrame = null;\n            });\n        }\n    };\n    CursorBlinkStateManager.prototype._restartInterval = function (timeToStart) {\n        var _this = this;\n        if (timeToStart === void 0) { timeToStart = BLINK_INTERVAL; }\n        if (this._blinkInterval) {\n            window.clearInterval(this._blinkInterval);\n        }\n        this._blinkStartTimeout = setTimeout(function () {\n            if (_this._animationTimeRestarted) {\n                var time = BLINK_INTERVAL - (Date.now() - _this._animationTimeRestarted);\n                _this._animationTimeRestarted = null;\n                if (time > 0) {\n                    _this._restartInterval(time);\n                    return;\n                }\n            }\n            _this.isCursorVisible = false;\n            _this._animationFrame = window.requestAnimationFrame(function () {\n                _this._renderCallback();\n                _this._animationFrame = null;\n            });\n            _this._blinkInterval = setInterval(function () {\n                if (_this._animationTimeRestarted) {\n                    var time = BLINK_INTERVAL - (Date.now() - _this._animationTimeRestarted);\n                    _this._animationTimeRestarted = null;\n                    _this._restartInterval(time);\n                    return;\n                }\n                _this.isCursorVisible = !_this.isCursorVisible;\n                _this._animationFrame = window.requestAnimationFrame(function () {\n                    _this._renderCallback();\n                    _this._animationFrame = null;\n                });\n            }, BLINK_INTERVAL);\n        }, timeToStart);\n    };\n    CursorBlinkStateManager.prototype.pause = function () {\n        this.isCursorVisible = true;\n        if (this._blinkInterval) {\n            window.clearInterval(this._blinkInterval);\n            this._blinkInterval = null;\n        }\n        if (this._blinkStartTimeout) {\n            window.clearTimeout(this._blinkStartTimeout);\n            this._blinkStartTimeout = null;\n        }\n        if (this._animationFrame) {\n            window.cancelAnimationFrame(this._animationFrame);\n            this._animationFrame = null;\n        }\n    };\n    CursorBlinkStateManager.prototype.resume = function (terminal) {\n        this._animationTimeRestarted = null;\n        this._restartInterval();\n        this.restartBlinkAnimation(terminal);\n    };\n    return CursorBlinkStateManager;\n}());\n//# sourceMappingURL=CursorRenderLayer.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Platform_1 = require(\"../../core/Platform\");\nvar Types_1 = require(\"./Types\");\nfunction generateStaticCharAtlasTexture(context, canvasFactory, config) {\n    var cellWidth = config.scaledCharWidth + Types_1.CHAR_ATLAS_CELL_SPACING;\n    var cellHeight = config.scaledCharHeight + Types_1.CHAR_ATLAS_CELL_SPACING;\n    var canvas = canvasFactory(255 * cellWidth, (2 + 16 + 16) * cellHeight);\n    var ctx = canvas.getContext('2d', { alpha: config.allowTransparency });\n    ctx.fillStyle = config.colors.background.css;\n    ctx.fillRect(0, 0, canvas.width, canvas.height);\n    ctx.save();\n    ctx.fillStyle = config.colors.foreground.css;\n    ctx.font = getFont(config.fontWeight, config);\n    ctx.textBaseline = 'top';\n    for (var i = 0; i < 256; i++) {\n        ctx.save();\n        ctx.beginPath();\n        ctx.rect(i * cellWidth, 0, cellWidth, cellHeight);\n        ctx.clip();\n        ctx.fillText(String.fromCharCode(i), i * cellWidth, 0);\n        ctx.restore();\n    }\n    ctx.save();\n    ctx.font = getFont(config.fontWeightBold, config);\n    for (var i = 0; i < 256; i++) {\n        ctx.save();\n        ctx.beginPath();\n        ctx.rect(i * cellWidth, cellHeight, cellWidth, cellHeight);\n        ctx.clip();\n        ctx.fillText(String.fromCharCode(i), i * cellWidth, cellHeight);\n        ctx.restore();\n    }\n    ctx.restore();\n    ctx.font = getFont(config.fontWeight, config);\n    for (var colorIndex = 0; colorIndex < 16; colorIndex++) {\n        var y = (colorIndex + 2) * cellHeight;\n        for (var i = 0; i < 256; i++) {\n            ctx.save();\n            ctx.beginPath();\n            ctx.rect(i * cellWidth, y, cellWidth, cellHeight);\n            ctx.clip();\n            ctx.fillStyle = config.colors.ansi[colorIndex].css;\n            ctx.fillText(String.fromCharCode(i), i * cellWidth, y);\n            ctx.restore();\n        }\n    }\n    ctx.font = getFont(config.fontWeightBold, config);\n    for (var colorIndex = 0; colorIndex < 16; colorIndex++) {\n        var y = (colorIndex + 2 + 16) * cellHeight;\n        for (var i = 0; i < 256; i++) {\n            ctx.save();\n            ctx.beginPath();\n            ctx.rect(i * cellWidth, y, cellWidth, cellHeight);\n            ctx.clip();\n            ctx.fillStyle = config.colors.ansi[colorIndex].css;\n            ctx.fillText(String.fromCharCode(i), i * cellWidth, y);\n            ctx.restore();\n        }\n    }\n    ctx.restore();\n    if (!('createImageBitmap' in context) || Platform_1.isFirefox || Platform_1.isSafari) {\n        return canvas;\n    }\n    var charAtlasImageData = ctx.getImageData(0, 0, canvas.width, canvas.height);\n    clearColor(charAtlasImageData, config.colors.background);\n    return context.createImageBitmap(charAtlasImageData);\n}\nexports.generateStaticCharAtlasTexture = generateStaticCharAtlasTexture;\nfunction clearColor(imageData, color) {\n    var isEmpty = true;\n    var r = color.rgba >>> 24;\n    var g = color.rgba >>> 16 & 0xFF;\n    var b = color.rgba >>> 8 & 0xFF;\n    for (var offset = 0; offset < imageData.data.length; offset += 4) {\n        if (imageData.data[offset] === r &&\n            imageData.data[offset + 1] === g &&\n            imageData.data[offset + 2] === b) {\n            imageData.data[offset + 3] = 0;\n        }\n        else {\n            isEmpty = false;\n        }\n    }\n    return isEmpty;\n}\nexports.clearColor = clearColor;\nfunction getFont(fontWeight, config) {\n    return fontWeight + \" \" + config.fontSize * config.devicePixelRatio + \"px \" + config.fontFamily;\n}\n//# sourceMappingURL=CharAtlasGenerator.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar CompositionHelper = (function () {\n    function CompositionHelper(_textarea, _compositionView, _terminal) {\n        this._textarea = _textarea;\n        this._compositionView = _compositionView;\n        this._terminal = _terminal;\n        this._isComposing = false;\n        this._isSendingComposition = false;\n        this._compositionPosition = { start: null, end: null };\n    }\n    CompositionHelper.prototype.compositionstart = function () {\n        this._isComposing = true;\n        this._compositionPosition.start = this._textarea.value.length;\n        this._compositionView.textContent = '';\n        this._compositionView.classList.add('active');\n    };\n    CompositionHelper.prototype.compositionupdate = function (ev) {\n        var _this = this;\n        this._compositionView.textContent = ev.data;\n        this.updateCompositionElements();\n        setTimeout(function () {\n            _this._compositionPosition.end = _this._textarea.value.length;\n        }, 0);\n    };\n    CompositionHelper.prototype.compositionend = function () {\n        this._finalizeComposition(true);\n    };\n    CompositionHelper.prototype.keydown = function (ev) {\n        if (this._isComposing || this._isSendingComposition) {\n            if (ev.keyCode === 229) {\n                return false;\n            }\n            else if (ev.keyCode === 16 || ev.keyCode === 17 || ev.keyCode === 18) {\n                return false;\n            }\n            this._finalizeComposition(false);\n        }\n        if (ev.keyCode === 229) {\n            this._handleAnyTextareaChanges();\n            return false;\n        }\n        return true;\n    };\n    CompositionHelper.prototype._finalizeComposition = function (waitForPropogation) {\n        var _this = this;\n        this._compositionView.classList.remove('active');\n        this._isComposing = false;\n        this._clearTextareaPosition();\n        if (!waitForPropogation) {\n            this._isSendingComposition = false;\n            var input = this._textarea.value.substring(this._compositionPosition.start, this._compositionPosition.end);\n            this._terminal.handler(input);\n        }\n        else {\n            var currentCompositionPosition_1 = {\n                start: this._compositionPosition.start,\n                end: this._compositionPosition.end\n            };\n            this._isSendingComposition = true;\n            setTimeout(function () {\n                if (_this._isSendingComposition) {\n                    _this._isSendingComposition = false;\n                    var input = void 0;\n                    if (_this._isComposing) {\n                        input = _this._textarea.value.substring(currentCompositionPosition_1.start, currentCompositionPosition_1.end);\n                    }\n                    else {\n                        input = _this._textarea.value.substring(currentCompositionPosition_1.start);\n                    }\n                    _this._terminal.handler(input);\n                }\n            }, 0);\n        }\n    };\n    CompositionHelper.prototype._handleAnyTextareaChanges = function () {\n        var _this = this;\n        var oldValue = this._textarea.value;\n        setTimeout(function () {\n            if (!_this._isComposing) {\n                var newValue = _this._textarea.value;\n                var diff = newValue.replace(oldValue, '');\n                if (diff.length > 0) {\n                    _this._terminal.handler(diff);\n                }\n            }\n        }, 0);\n    };\n    CompositionHelper.prototype.updateCompositionElements = function (dontRecurse) {\n        var _this = this;\n        if (!this._isComposing) {\n            return;\n        }\n        if (this._terminal.buffer.isCursorInViewport) {\n            var cellHeight = Math.ceil(this._terminal.charMeasure.height * this._terminal.options.lineHeight);\n            var cursorTop = this._terminal.buffer.y * cellHeight;\n            var cursorLeft = this._terminal.buffer.x * this._terminal.charMeasure.width;\n            this._compositionView.style.left = cursorLeft + 'px';\n            this._compositionView.style.top = cursorTop + 'px';\n            this._compositionView.style.height = cellHeight + 'px';\n            this._compositionView.style.lineHeight = cellHeight + 'px';\n            var compositionViewBounds = this._compositionView.getBoundingClientRect();\n            this._textarea.style.left = cursorLeft + 'px';\n            this._textarea.style.top = cursorTop + 'px';\n            this._textarea.style.width = compositionViewBounds.width + 'px';\n            this._textarea.style.height = compositionViewBounds.height + 'px';\n            this._textarea.style.lineHeight = compositionViewBounds.height + 'px';\n        }\n        if (!dontRecurse) {\n            setTimeout(function () { return _this.updateCompositionElements(true); }, 0);\n        }\n    };\n    CompositionHelper.prototype._clearTextareaPosition = function () {\n        this._textarea.style.left = '';\n        this._textarea.style.top = '';\n    };\n    return CompositionHelper;\n}());\nexports.CompositionHelper = CompositionHelper;\n//# sourceMappingURL=CompositionHelper.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar TypedArrayUtils_1 = require(\"./common/TypedArrayUtils\");\nexports.wcwidth = (function (opts) {\n    var COMBINING_BMP = [\n        [0x0300, 0x036F], [0x0483, 0x0486], [0x0488, 0x0489],\n        [0x0591, 0x05BD], [0x05BF, 0x05BF], [0x05C1, 0x05C2],\n        [0x05C4, 0x05C5], [0x05C7, 0x05C7], [0x0600, 0x0603],\n        [0x0610, 0x0615], [0x064B, 0x065E], [0x0670, 0x0670],\n        [0x06D6, 0x06E4], [0x06E7, 0x06E8], [0x06EA, 0x06ED],\n        [0x070F, 0x070F], [0x0711, 0x0711], [0x0730, 0x074A],\n        [0x07A6, 0x07B0], [0x07EB, 0x07F3], [0x0901, 0x0902],\n        [0x093C, 0x093C], [0x0941, 0x0948], [0x094D, 0x094D],\n        [0x0951, 0x0954], [0x0962, 0x0963], [0x0981, 0x0981],\n        [0x09BC, 0x09BC], [0x09C1, 0x09C4], [0x09CD, 0x09CD],\n        [0x09E2, 0x09E3], [0x0A01, 0x0A02], [0x0A3C, 0x0A3C],\n        [0x0A41, 0x0A42], [0x0A47, 0x0A48], [0x0A4B, 0x0A4D],\n        [0x0A70, 0x0A71], [0x0A81, 0x0A82], [0x0ABC, 0x0ABC],\n        [0x0AC1, 0x0AC5], [0x0AC7, 0x0AC8], [0x0ACD, 0x0ACD],\n        [0x0AE2, 0x0AE3], [0x0B01, 0x0B01], [0x0B3C, 0x0B3C],\n        [0x0B3F, 0x0B3F], [0x0B41, 0x0B43], [0x0B4D, 0x0B4D],\n        [0x0B56, 0x0B56], [0x0B82, 0x0B82], [0x0BC0, 0x0BC0],\n        [0x0BCD, 0x0BCD], [0x0C3E, 0x0C40], [0x0C46, 0x0C48],\n        [0x0C4A, 0x0C4D], [0x0C55, 0x0C56], [0x0CBC, 0x0CBC],\n        [0x0CBF, 0x0CBF], [0x0CC6, 0x0CC6], [0x0CCC, 0x0CCD],\n        [0x0CE2, 0x0CE3], [0x0D41, 0x0D43], [0x0D4D, 0x0D4D],\n        [0x0DCA, 0x0DCA], [0x0DD2, 0x0DD4], [0x0DD6, 0x0DD6],\n        [0x0E31, 0x0E31], [0x0E34, 0x0E3A], [0x0E47, 0x0E4E],\n        [0x0EB1, 0x0EB1], [0x0EB4, 0x0EB9], [0x0EBB, 0x0EBC],\n        [0x0EC8, 0x0ECD], [0x0F18, 0x0F19], [0x0F35, 0x0F35],\n        [0x0F37, 0x0F37], [0x0F39, 0x0F39], [0x0F71, 0x0F7E],\n        [0x0F80, 0x0F84], [0x0F86, 0x0F87], [0x0F90, 0x0F97],\n        [0x0F99, 0x0FBC], [0x0FC6, 0x0FC6], [0x102D, 0x1030],\n        [0x1032, 0x1032], [0x1036, 0x1037], [0x1039, 0x1039],\n        [0x1058, 0x1059], [0x1160, 0x11FF], [0x135F, 0x135F],\n        [0x1712, 0x1714], [0x1732, 0x1734], [0x1752, 0x1753],\n        [0x1772, 0x1773], [0x17B4, 0x17B5], [0x17B7, 0x17BD],\n        [0x17C6, 0x17C6], [0x17C9, 0x17D3], [0x17DD, 0x17DD],\n        [0x180B, 0x180D], [0x18A9, 0x18A9], [0x1920, 0x1922],\n        [0x1927, 0x1928], [0x1932, 0x1932], [0x1939, 0x193B],\n        [0x1A17, 0x1A18], [0x1B00, 0x1B03], [0x1B34, 0x1B34],\n        [0x1B36, 0x1B3A], [0x1B3C, 0x1B3C], [0x1B42, 0x1B42],\n        [0x1B6B, 0x1B73], [0x1DC0, 0x1DCA], [0x1DFE, 0x1DFF],\n        [0x200B, 0x200F], [0x202A, 0x202E], [0x2060, 0x2063],\n        [0x206A, 0x206F], [0x20D0, 0x20EF], [0x302A, 0x302F],\n        [0x3099, 0x309A], [0xA806, 0xA806], [0xA80B, 0xA80B],\n        [0xA825, 0xA826], [0xFB1E, 0xFB1E], [0xFE00, 0xFE0F],\n        [0xFE20, 0xFE23], [0xFEFF, 0xFEFF], [0xFFF9, 0xFFFB]\n    ];\n    var COMBINING_HIGH = [\n        [0x10A01, 0x10A03], [0x10A05, 0x10A06], [0x10A0C, 0x10A0F],\n        [0x10A38, 0x10A3A], [0x10A3F, 0x10A3F], [0x1D167, 0x1D169],\n        [0x1D173, 0x1D182], [0x1D185, 0x1D18B], [0x1D1AA, 0x1D1AD],\n        [0x1D242, 0x1D244], [0xE0001, 0xE0001], [0xE0020, 0xE007F],\n        [0xE0100, 0xE01EF]\n    ];\n    function bisearch(ucs, data) {\n        var min = 0;\n        var max = data.length - 1;\n        var mid;\n        if (ucs < data[0][0] || ucs > data[max][1]) {\n            return false;\n        }\n        while (max >= min) {\n            mid = (min + max) >> 1;\n            if (ucs > data[mid][1]) {\n                min = mid + 1;\n            }\n            else if (ucs < data[mid][0]) {\n                max = mid - 1;\n            }\n            else {\n                return true;\n            }\n        }\n        return false;\n    }\n    function wcwidthHigh(ucs) {\n        if (bisearch(ucs, COMBINING_HIGH)) {\n            return 0;\n        }\n        if ((ucs >= 0x20000 && ucs <= 0x2fffd) || (ucs >= 0x30000 && ucs <= 0x3fffd)) {\n            return 2;\n        }\n        return 1;\n    }\n    var control = opts.control | 0;\n    var table = new Uint8Array(65536);\n    TypedArrayUtils_1.fill(table, 1);\n    table[0] = opts.nul;\n    TypedArrayUtils_1.fill(table, opts.control, 1, 32);\n    TypedArrayUtils_1.fill(table, opts.control, 0x7f, 0xa0);\n    TypedArrayUtils_1.fill(table, 2, 0x1100, 0x1160);\n    table[0x2329] = 2;\n    table[0x232a] = 2;\n    TypedArrayUtils_1.fill(table, 2, 0x2e80, 0xa4d0);\n    table[0x303f] = 1;\n    TypedArrayUtils_1.fill(table, 2, 0xac00, 0xd7a4);\n    TypedArrayUtils_1.fill(table, 2, 0xf900, 0xfb00);\n    TypedArrayUtils_1.fill(table, 2, 0xfe10, 0xfe1a);\n    TypedArrayUtils_1.fill(table, 2, 0xfe30, 0xfe70);\n    TypedArrayUtils_1.fill(table, 2, 0xff00, 0xff61);\n    TypedArrayUtils_1.fill(table, 2, 0xffe0, 0xffe7);\n    for (var r = 0; r < COMBINING_BMP.length; ++r) {\n        TypedArrayUtils_1.fill(table, 0, COMBINING_BMP[r][0], COMBINING_BMP[r][1] + 1);\n    }\n    return function (num) {\n        if (num < 32) {\n            return control | 0;\n        }\n        if (num < 127) {\n            return 1;\n        }\n        if (num < 65536) {\n            return table[num];\n        }\n        return wcwidthHigh(num);\n    };\n})({ nul: 0, control: 0 });\nfunction getStringCellWidth(s) {\n    var result = 0;\n    var length = s.length;\n    for (var i = 0; i < length; ++i) {\n        var code = s.charCodeAt(i);\n        if (0xD800 <= code && code <= 0xDBFF) {\n            if (++i >= length) {\n                return result + exports.wcwidth(code);\n            }\n            var second = s.charCodeAt(i);\n            if (0xDC00 <= second && second <= 0xDFFF) {\n                code = (code - 0xD800) * 0x400 + second - 0xDC00 + 0x10000;\n            }\n            else {\n                result += exports.wcwidth(second);\n            }\n        }\n        result += exports.wcwidth(code);\n    }\n    return result;\n}\nexports.getStringCellWidth = getStringCellWidth;\n//# sourceMappingURL=CharWidth.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CHARSETS = {};\nexports.DEFAULT_CHARSET = exports.CHARSETS['B'];\nexports.CHARSETS['0'] = {\n    '`': '\\u25c6',\n    'a': '\\u2592',\n    'b': '\\u0009',\n    'c': '\\u000c',\n    'd': '\\u000d',\n    'e': '\\u000a',\n    'f': '\\u00b0',\n    'g': '\\u00b1',\n    'h': '\\u2424',\n    'i': '\\u000b',\n    'j': '\\u2518',\n    'k': '\\u2510',\n    'l': '\\u250c',\n    'm': '\\u2514',\n    'n': '\\u253c',\n    'o': '\\u23ba',\n    'p': '\\u23bb',\n    'q': '\\u2500',\n    'r': '\\u23bc',\n    's': '\\u23bd',\n    't': '\\u251c',\n    'u': '\\u2524',\n    'v': '\\u2534',\n    'w': '\\u252c',\n    'x': '\\u2502',\n    'y': '\\u2264',\n    'z': '\\u2265',\n    '{': '\\u03c0',\n    '|': '\\u2260',\n    '}': '\\u00a3',\n    '~': '\\u00b7'\n};\nexports.CHARSETS['A'] = {\n    '#': '£'\n};\nexports.CHARSETS['B'] = null;\nexports.CHARSETS['4'] = {\n    '#': '£',\n    '@': '¾',\n    '[': 'ij',\n    '\\\\': '½',\n    ']': '|',\n    '{': '¨',\n    '|': 'f',\n    '}': '¼',\n    '~': '´'\n};\nexports.CHARSETS['C'] =\n    exports.CHARSETS['5'] = {\n        '[': 'Ä',\n        '\\\\': 'Ö',\n        ']': 'Å',\n        '^': 'Ü',\n        '`': 'é',\n        '{': 'ä',\n        '|': 'ö',\n        '}': 'å',\n        '~': 'ü'\n    };\nexports.CHARSETS['R'] = {\n    '#': '£',\n    '@': 'à',\n    '[': '°',\n    '\\\\': 'ç',\n    ']': '§',\n    '{': 'é',\n    '|': 'ù',\n    '}': 'è',\n    '~': '¨'\n};\nexports.CHARSETS['Q'] = {\n    '@': 'à',\n    '[': 'â',\n    '\\\\': 'ç',\n    ']': 'ê',\n    '^': 'î',\n    '`': 'ô',\n    '{': 'é',\n    '|': 'ù',\n    '}': 'è',\n    '~': 'û'\n};\nexports.CHARSETS['K'] = {\n    '@': '§',\n    '[': 'Ä',\n    '\\\\': 'Ö',\n    ']': 'Ü',\n    '{': 'ä',\n    '|': 'ö',\n    '}': 'ü',\n    '~': 'ß'\n};\nexports.CHARSETS['Y'] = {\n    '#': '£',\n    '@': '§',\n    '[': '°',\n    '\\\\': 'ç',\n    ']': 'é',\n    '`': 'ù',\n    '{': 'à',\n    '|': 'ò',\n    '}': 'è',\n    '~': 'ì'\n};\nexports.CHARSETS['E'] =\n    exports.CHARSETS['6'] = {\n        '@': 'Ä',\n        '[': 'Æ',\n        '\\\\': 'Ø',\n        ']': 'Å',\n        '^': 'Ü',\n        '`': 'ä',\n        '{': 'æ',\n        '|': 'ø',\n        '}': 'å',\n        '~': 'ü'\n    };\nexports.CHARSETS['Z'] = {\n    '#': '£',\n    '@': '§',\n    '[': '¡',\n    '\\\\': 'Ñ',\n    ']': '¿',\n    '{': '°',\n    '|': 'ñ',\n    '}': 'ç'\n};\nexports.CHARSETS['H'] =\n    exports.CHARSETS['7'] = {\n        '@': 'É',\n        '[': 'Ä',\n        '\\\\': 'Ö',\n        ']': 'Å',\n        '^': 'Ü',\n        '`': 'é',\n        '{': 'ä',\n        '|': 'ö',\n        '}': 'å',\n        '~': 'ü'\n    };\nexports.CHARSETS['='] = {\n    '#': 'ù',\n    '@': 'à',\n    '[': 'é',\n    '\\\\': 'ç',\n    ']': 'ê',\n    '^': 'î',\n    '_': 'è',\n    '`': 'ô',\n    '{': 'ä',\n    '|': 'ö',\n    '}': 'ü',\n    '~': 'û'\n};\n//# sourceMappingURL=Charsets.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar BufferSet_1 = require(\"./BufferSet\");\nvar Buffer_1 = require(\"./Buffer\");\nvar CompositionHelper_1 = require(\"./CompositionHelper\");\nvar EventEmitter_1 = require(\"./common/EventEmitter\");\nvar Viewport_1 = require(\"./Viewport\");\nvar Clipboard_1 = require(\"./ui/Clipboard\");\nvar EscapeSequences_1 = require(\"./common/data/EscapeSequences\");\nvar InputHandler_1 = require(\"./InputHandler\");\nvar Renderer_1 = require(\"./renderer/Renderer\");\nvar Linkifier_1 = require(\"./Linkifier\");\nvar SelectionManager_1 = require(\"./SelectionManager\");\nvar CharMeasure_1 = require(\"./ui/CharMeasure\");\nvar Browser = require(\"./core/Platform\");\nvar Lifecycle_1 = require(\"./ui/Lifecycle\");\nvar Strings = require(\"./Strings\");\nvar MouseHelper_1 = require(\"./utils/MouseHelper\");\nvar Clone_1 = require(\"./utils/Clone\");\nvar SoundManager_1 = require(\"./SoundManager\");\nvar ColorManager_1 = require(\"./renderer/ColorManager\");\nvar MouseZoneManager_1 = require(\"./ui/MouseZoneManager\");\nvar AccessibilityManager_1 = require(\"./AccessibilityManager\");\nvar ScreenDprMonitor_1 = require(\"./ui/ScreenDprMonitor\");\nvar CharAtlasCache_1 = require(\"./renderer/atlas/CharAtlasCache\");\nvar DomRenderer_1 = require(\"./renderer/dom/DomRenderer\");\nvar Keyboard_1 = require(\"./core/input/Keyboard\");\nvar document = (typeof window !== 'undefined') ? window.document : null;\nvar WRITE_BUFFER_PAUSE_THRESHOLD = 5;\nvar WRITE_BATCH_SIZE = 300;\nvar CONSTRUCTOR_ONLY_OPTIONS = ['cols', 'rows'];\nvar DEFAULT_OPTIONS = {\n    cols: 80,\n    rows: 24,\n    convertEol: false,\n    termName: 'xterm',\n    cursorBlink: false,\n    cursorStyle: 'block',\n    bellSound: SoundManager_1.DEFAULT_BELL_SOUND,\n    bellStyle: 'none',\n    drawBoldTextInBrightColors: true,\n    enableBold: true,\n    experimentalCharAtlas: 'static',\n    fontFamily: 'courier-new, courier, monospace',\n    fontSize: 15,\n    fontWeight: 'normal',\n    fontWeightBold: 'bold',\n    lineHeight: 1.0,\n    letterSpacing: 0,\n    scrollback: 1000,\n    screenKeys: false,\n    screenReaderMode: false,\n    debug: false,\n    macOptionIsMeta: false,\n    macOptionClickForcesSelection: false,\n    cancelEvents: false,\n    disableStdin: false,\n    useFlowControl: false,\n    allowTransparency: false,\n    tabStopWidth: 8,\n    theme: null,\n    rightClickSelectsWord: Browser.isMac,\n    rendererType: 'canvas',\n    experimentalBufferLineImpl: 'TypedArray'\n};\nvar Terminal = (function (_super) {\n    __extends(Terminal, _super);\n    function Terminal(options) {\n        if (options === void 0) { options = {}; }\n        var _this = _super.call(this) || this;\n        _this.browser = Browser;\n        _this._blankLine = null;\n        _this.options = Clone_1.clone(options);\n        _this._setup();\n        return _this;\n    }\n    Terminal.prototype.dispose = function () {\n        _super.prototype.dispose.call(this);\n        this._customKeyEventHandler = null;\n        CharAtlasCache_1.removeTerminalFromCache(this);\n        this.handler = function () { };\n        this.write = function () { };\n        if (this.element && this.element.parentNode) {\n            this.element.parentNode.removeChild(this.element);\n        }\n    };\n    Terminal.prototype.destroy = function () {\n        this.dispose();\n    };\n    Terminal.prototype._setup = function () {\n        var _this = this;\n        Object.keys(DEFAULT_OPTIONS).forEach(function (key) {\n            if (_this.options[key] === null || _this.options[key] === undefined) {\n                _this.options[key] = DEFAULT_OPTIONS[key];\n            }\n        });\n        this._parent = document ? document.body : null;\n        this.cols = this.options.cols;\n        this.rows = this.options.rows;\n        if (this.options.handler) {\n            this.on('data', this.options.handler);\n        }\n        this.cursorState = 0;\n        this.cursorHidden = false;\n        this._customKeyEventHandler = null;\n        this.applicationKeypad = false;\n        this.applicationCursor = false;\n        this.originMode = false;\n        this.insertMode = false;\n        this.wraparoundMode = true;\n        this.bracketedPasteMode = false;\n        this.charset = null;\n        this.gcharset = null;\n        this.glevel = 0;\n        this.charsets = [null];\n        this.curAttr = Buffer_1.DEFAULT_ATTR;\n        this.params = [];\n        this.currentParam = 0;\n        this.writeBuffer = [];\n        this._writeInProgress = false;\n        this._xoffSentToCatchUp = false;\n        this._userScrolling = false;\n        this._inputHandler = new InputHandler_1.InputHandler(this);\n        this.register(this._inputHandler);\n        this.renderer = this.renderer || null;\n        this.selectionManager = this.selectionManager || null;\n        this.linkifier = this.linkifier || new Linkifier_1.Linkifier(this);\n        this._mouseZoneManager = this._mouseZoneManager || null;\n        this.soundManager = this.soundManager || new SoundManager_1.SoundManager(this);\n        this.buffers = new BufferSet_1.BufferSet(this);\n        if (this.selectionManager) {\n            this.selectionManager.clearSelection();\n            this.selectionManager.initBuffersListeners();\n        }\n    };\n    Object.defineProperty(Terminal.prototype, \"buffer\", {\n        get: function () {\n            return this.buffers.active;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Terminal.prototype.eraseAttr = function () {\n        return (Buffer_1.DEFAULT_ATTR & ~0x1ff) | (this.curAttr & 0x1ff);\n    };\n    Terminal.prototype.focus = function () {\n        if (this.textarea) {\n            this.textarea.focus();\n        }\n    };\n    Object.defineProperty(Terminal.prototype, \"isFocused\", {\n        get: function () {\n            return document.activeElement === this.textarea && document.hasFocus();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Terminal.prototype.getOption = function (key) {\n        if (!(key in DEFAULT_OPTIONS)) {\n            throw new Error('No option with key \"' + key + '\"');\n        }\n        return this.options[key];\n    };\n    Terminal.prototype.setOption = function (key, value) {\n        if (!(key in DEFAULT_OPTIONS)) {\n            throw new Error('No option with key \"' + key + '\"');\n        }\n        if (CONSTRUCTOR_ONLY_OPTIONS.indexOf(key) !== -1) {\n            console.error(\"Option \\\"\" + key + \"\\\" can only be set in the constructor\");\n        }\n        if (this.options[key] === value) {\n            return;\n        }\n        switch (key) {\n            case 'bellStyle':\n                if (!value) {\n                    value = 'none';\n                }\n                break;\n            case 'cursorStyle':\n                if (!value) {\n                    value = 'block';\n                }\n                break;\n            case 'fontWeight':\n                if (!value) {\n                    value = 'normal';\n                }\n                break;\n            case 'fontWeightBold':\n                if (!value) {\n                    value = 'bold';\n                }\n                break;\n            case 'lineHeight':\n                if (value < 1) {\n                    console.warn(key + \" cannot be less than 1, value: \" + value);\n                    return;\n                }\n            case 'rendererType':\n                if (!value) {\n                    value = 'canvas';\n                }\n                break;\n            case 'tabStopWidth':\n                if (value < 1) {\n                    console.warn(key + \" cannot be less than 1, value: \" + value);\n                    return;\n                }\n                break;\n            case 'theme':\n                if (this.renderer) {\n                    this._setTheme(value);\n                    return;\n                }\n                break;\n            case 'scrollback':\n                value = Math.min(value, Buffer_1.MAX_BUFFER_SIZE);\n                if (value < 0) {\n                    console.warn(key + \" cannot be less than 0, value: \" + value);\n                    return;\n                }\n                if (this.options[key] !== value) {\n                    var newBufferLength = this.rows + value;\n                    if (this.buffer.lines.length > newBufferLength) {\n                        var amountToTrim = this.buffer.lines.length - newBufferLength;\n                        var needsRefresh = (this.buffer.ydisp - amountToTrim < 0);\n                        this.buffer.lines.trimStart(amountToTrim);\n                        this.buffer.ybase = Math.max(this.buffer.ybase - amountToTrim, 0);\n                        this.buffer.ydisp = Math.max(this.buffer.ydisp - amountToTrim, 0);\n                        if (needsRefresh) {\n                            this.refresh(0, this.rows - 1);\n                        }\n                    }\n                }\n                break;\n        }\n        this.options[key] = value;\n        switch (key) {\n            case 'fontFamily':\n            case 'fontSize':\n                if (this.renderer) {\n                    this.renderer.clear();\n                    this.charMeasure.measure(this.options);\n                }\n                break;\n            case 'drawBoldTextInBrightColors':\n            case 'experimentalCharAtlas':\n            case 'enableBold':\n            case 'letterSpacing':\n            case 'lineHeight':\n            case 'fontWeight':\n            case 'fontWeightBold':\n                if (this.renderer) {\n                    this.renderer.clear();\n                    this.renderer.onResize(this.cols, this.rows);\n                    this.refresh(0, this.rows - 1);\n                }\n            case 'rendererType':\n                if (this.renderer) {\n                    this.unregister(this.renderer);\n                    this.renderer.dispose();\n                    this.renderer = null;\n                }\n                this._setupRenderer();\n                this.renderer.onCharSizeChanged();\n                if (this._theme) {\n                    this.renderer.setTheme(this._theme);\n                }\n                this.mouseHelper.setRenderer(this.renderer);\n                break;\n            case 'scrollback':\n                this.buffers.resize(this.cols, this.rows);\n                if (this.viewport) {\n                    this.viewport.syncScrollArea();\n                }\n                break;\n            case 'screenReaderMode':\n                if (value) {\n                    if (!this._accessibilityManager) {\n                        this._accessibilityManager = new AccessibilityManager_1.AccessibilityManager(this);\n                    }\n                }\n                else {\n                    if (this._accessibilityManager) {\n                        this._accessibilityManager.dispose();\n                        this._accessibilityManager = null;\n                    }\n                }\n                break;\n            case 'tabStopWidth':\n                this.buffers.setupTabStops();\n                break;\n            case 'experimentalBufferLineImpl':\n                this.buffers.normal.setBufferLineFactory(value);\n                this.buffers.alt.setBufferLineFactory(value);\n                this._blankLine = null;\n                break;\n        }\n        if (this.renderer) {\n            this.renderer.onOptionsChanged();\n        }\n    };\n    Terminal.prototype._onTextAreaFocus = function (ev) {\n        if (this.sendFocus) {\n            this.handler(EscapeSequences_1.C0.ESC + '[I');\n        }\n        this.updateCursorStyle(ev);\n        this.element.classList.add('focus');\n        this.showCursor();\n        this.emit('focus');\n    };\n    Terminal.prototype.blur = function () {\n        return this.textarea.blur();\n    };\n    Terminal.prototype._onTextAreaBlur = function () {\n        this.textarea.value = '';\n        this.refresh(this.buffer.y, this.buffer.y);\n        if (this.sendFocus) {\n            this.handler(EscapeSequences_1.C0.ESC + '[O');\n        }\n        this.element.classList.remove('focus');\n        this.emit('blur');\n    };\n    Terminal.prototype._initGlobal = function () {\n        var _this = this;\n        this._bindKeys();\n        this.register(Lifecycle_1.addDisposableDomListener(this.element, 'copy', function (event) {\n            if (!_this.hasSelection()) {\n                return;\n            }\n            Clipboard_1.copyHandler(event, _this, _this.selectionManager);\n        }));\n        var pasteHandlerWrapper = function (event) { return Clipboard_1.pasteHandler(event, _this); };\n        this.register(Lifecycle_1.addDisposableDomListener(this.textarea, 'paste', pasteHandlerWrapper));\n        this.register(Lifecycle_1.addDisposableDomListener(this.element, 'paste', pasteHandlerWrapper));\n        if (Browser.isFirefox) {\n            this.register(Lifecycle_1.addDisposableDomListener(this.element, 'mousedown', function (event) {\n                if (event.button === 2) {\n                    Clipboard_1.rightClickHandler(event, _this.textarea, _this.selectionManager, _this.options.rightClickSelectsWord);\n                }\n            }));\n        }\n        else {\n            this.register(Lifecycle_1.addDisposableDomListener(this.element, 'contextmenu', function (event) {\n                Clipboard_1.rightClickHandler(event, _this.textarea, _this.selectionManager, _this.options.rightClickSelectsWord);\n            }));\n        }\n        if (Browser.isLinux) {\n            this.register(Lifecycle_1.addDisposableDomListener(this.element, 'auxclick', function (event) {\n                if (event.button === 1) {\n                    Clipboard_1.moveTextAreaUnderMouseCursor(event, _this.textarea);\n                }\n            }));\n        }\n    };\n    Terminal.prototype._bindKeys = function () {\n        var _this = this;\n        var self = this;\n        this.register(Lifecycle_1.addDisposableDomListener(this.element, 'keydown', function (ev) {\n            if (document.activeElement !== this) {\n                return;\n            }\n            self._keyDown(ev);\n        }, true));\n        this.register(Lifecycle_1.addDisposableDomListener(this.element, 'keypress', function (ev) {\n            if (document.activeElement !== this) {\n                return;\n            }\n            self._keyPress(ev);\n        }, true));\n        this.register(Lifecycle_1.addDisposableDomListener(this.element, 'keyup', function (ev) {\n            if (!wasModifierKeyOnlyEvent(ev)) {\n                _this.focus();\n            }\n            self._keyUp(ev);\n        }, true));\n        this.register(Lifecycle_1.addDisposableDomListener(this.textarea, 'keydown', function (ev) { return _this._keyDown(ev); }, true));\n        this.register(Lifecycle_1.addDisposableDomListener(this.textarea, 'keypress', function (ev) { return _this._keyPress(ev); }, true));\n        this.register(Lifecycle_1.addDisposableDomListener(this.textarea, 'compositionstart', function () { return _this._compositionHelper.compositionstart(); }));\n        this.register(Lifecycle_1.addDisposableDomListener(this.textarea, 'compositionupdate', function (e) { return _this._compositionHelper.compositionupdate(e); }));\n        this.register(Lifecycle_1.addDisposableDomListener(this.textarea, 'compositionend', function () { return _this._compositionHelper.compositionend(); }));\n        this.register(this.addDisposableListener('refresh', function () { return _this._compositionHelper.updateCompositionElements(); }));\n        this.register(this.addDisposableListener('refresh', function (data) { return _this._queueLinkification(data.start, data.end); }));\n    };\n    Terminal.prototype.open = function (parent) {\n        var _this = this;\n        this._parent = parent || this._parent;\n        if (!this._parent) {\n            throw new Error('Terminal requires a parent element.');\n        }\n        this._context = this._parent.ownerDocument.defaultView;\n        this._document = this._parent.ownerDocument;\n        this._screenDprMonitor = new ScreenDprMonitor_1.ScreenDprMonitor();\n        this._screenDprMonitor.setListener(function () { return _this.emit('dprchange', window.devicePixelRatio); });\n        this.register(this._screenDprMonitor);\n        this.element = this._document.createElement('div');\n        this.element.dir = 'ltr';\n        this.element.classList.add('terminal');\n        this.element.classList.add('xterm');\n        this.element.setAttribute('tabindex', '0');\n        this._parent.appendChild(this.element);\n        var fragment = document.createDocumentFragment();\n        this._viewportElement = document.createElement('div');\n        this._viewportElement.classList.add('xterm-viewport');\n        fragment.appendChild(this._viewportElement);\n        this._viewportScrollArea = document.createElement('div');\n        this._viewportScrollArea.classList.add('xterm-scroll-area');\n        this._viewportElement.appendChild(this._viewportScrollArea);\n        this.screenElement = document.createElement('div');\n        this.screenElement.classList.add('xterm-screen');\n        this._helperContainer = document.createElement('div');\n        this._helperContainer.classList.add('xterm-helpers');\n        this.screenElement.appendChild(this._helperContainer);\n        fragment.appendChild(this.screenElement);\n        this._mouseZoneManager = new MouseZoneManager_1.MouseZoneManager(this);\n        this.register(this._mouseZoneManager);\n        this.register(this.addDisposableListener('scroll', function () { return _this._mouseZoneManager.clearAll(); }));\n        this.linkifier.attachToDom(this._mouseZoneManager);\n        this.textarea = document.createElement('textarea');\n        this.textarea.classList.add('xterm-helper-textarea');\n        this.textarea.setAttribute('aria-label', Strings.promptLabel);\n        this.textarea.setAttribute('aria-multiline', 'false');\n        this.textarea.setAttribute('autocorrect', 'off');\n        this.textarea.setAttribute('autocapitalize', 'off');\n        this.textarea.setAttribute('spellcheck', 'false');\n        this.textarea.tabIndex = 0;\n        this.register(Lifecycle_1.addDisposableDomListener(this.textarea, 'focus', function (ev) { return _this._onTextAreaFocus(ev); }));\n        this.register(Lifecycle_1.addDisposableDomListener(this.textarea, 'blur', function () { return _this._onTextAreaBlur(); }));\n        this._helperContainer.appendChild(this.textarea);\n        this._compositionView = document.createElement('div');\n        this._compositionView.classList.add('composition-view');\n        this._compositionHelper = new CompositionHelper_1.CompositionHelper(this.textarea, this._compositionView, this);\n        this._helperContainer.appendChild(this._compositionView);\n        this.charMeasure = new CharMeasure_1.CharMeasure(document, this._helperContainer);\n        this.element.appendChild(fragment);\n        this._setupRenderer();\n        this._theme = this.options.theme;\n        this.options.theme = null;\n        this.viewport = new Viewport_1.Viewport(this, this._viewportElement, this._viewportScrollArea, this.charMeasure);\n        this.viewport.onThemeChanged(this.renderer.colorManager.colors);\n        this.register(this.viewport);\n        this.register(this.addDisposableListener('cursormove', function () { return _this.renderer.onCursorMove(); }));\n        this.register(this.addDisposableListener('resize', function () { return _this.renderer.onResize(_this.cols, _this.rows); }));\n        this.register(this.addDisposableListener('blur', function () { return _this.renderer.onBlur(); }));\n        this.register(this.addDisposableListener('focus', function () { return _this.renderer.onFocus(); }));\n        this.register(this.addDisposableListener('dprchange', function () { return _this.renderer.onWindowResize(window.devicePixelRatio); }));\n        this.register(Lifecycle_1.addDisposableDomListener(window, 'resize', function () { return _this.renderer.onWindowResize(window.devicePixelRatio); }));\n        this.register(this.charMeasure.addDisposableListener('charsizechanged', function () { return _this.renderer.onCharSizeChanged(); }));\n        this.register(this.renderer.addDisposableListener('resize', function (dimensions) { return _this.viewport.syncScrollArea(); }));\n        this.selectionManager = new SelectionManager_1.SelectionManager(this, this.charMeasure);\n        this.register(Lifecycle_1.addDisposableDomListener(this.element, 'mousedown', function (e) { return _this.selectionManager.onMouseDown(e); }));\n        this.register(this.selectionManager.addDisposableListener('refresh', function (data) { return _this.renderer.onSelectionChanged(data.start, data.end, data.columnSelectMode); }));\n        this.register(this.selectionManager.addDisposableListener('newselection', function (text) {\n            _this.textarea.value = text;\n            _this.textarea.focus();\n            _this.textarea.select();\n        }));\n        this.register(this.addDisposableListener('scroll', function () {\n            _this.viewport.syncScrollArea();\n            _this.selectionManager.refresh();\n        }));\n        this.register(Lifecycle_1.addDisposableDomListener(this._viewportElement, 'scroll', function () { return _this.selectionManager.refresh(); }));\n        this.mouseHelper = new MouseHelper_1.MouseHelper(this.renderer);\n        if (this.options.screenReaderMode) {\n            this._accessibilityManager = new AccessibilityManager_1.AccessibilityManager(this);\n        }\n        this.charMeasure.measure(this.options);\n        this.refresh(0, this.rows - 1);\n        this._initGlobal();\n        this.bindMouse();\n    };\n    Terminal.prototype._setupRenderer = function () {\n        switch (this.options.rendererType) {\n            case 'canvas':\n                this.renderer = new Renderer_1.Renderer(this, this.options.theme);\n                break;\n            case 'dom':\n                this.renderer = new DomRenderer_1.DomRenderer(this, this.options.theme);\n                break;\n            default: throw new Error(\"Unrecognized rendererType \\\"\" + this.options.rendererType + \"\\\"\");\n        }\n        this.register(this.renderer);\n    };\n    Terminal.prototype._setTheme = function (theme) {\n        this._theme = theme;\n        var colors = this.renderer.setTheme(theme);\n        if (this.viewport) {\n            this.viewport.onThemeChanged(colors);\n        }\n    };\n    Terminal.prototype.bindMouse = function () {\n        var _this = this;\n        var el = this.element;\n        var self = this;\n        var pressed = 32;\n        function sendButton(ev) {\n            var button;\n            var pos;\n            button = getButton(ev);\n            pos = self.mouseHelper.getRawByteCoords(ev, self.screenElement, self.charMeasure, self.cols, self.rows);\n            if (!pos)\n                return;\n            sendEvent(button, pos);\n            switch (ev.overrideType || ev.type) {\n                case 'mousedown':\n                    pressed = button;\n                    break;\n                case 'mouseup':\n                    pressed = 32;\n                    break;\n                case 'wheel':\n                    break;\n            }\n        }\n        function sendMove(ev) {\n            var button = pressed;\n            var pos = self.mouseHelper.getRawByteCoords(ev, self.screenElement, self.charMeasure, self.cols, self.rows);\n            if (!pos)\n                return;\n            button += 32;\n            sendEvent(button, pos);\n        }\n        function encode(data, ch) {\n            if (!self.utfMouse) {\n                if (ch === 255) {\n                    data.push(0);\n                    return;\n                }\n                if (ch > 127)\n                    ch = 127;\n                data.push(ch);\n            }\n            else {\n                if (ch === 2047) {\n                    data.push(0);\n                    return;\n                }\n                if (ch < 127) {\n                    data.push(ch);\n                }\n                else {\n                    if (ch > 2047)\n                        ch = 2047;\n                    data.push(0xC0 | (ch >> 6));\n                    data.push(0x80 | (ch & 0x3F));\n                }\n            }\n        }\n        function sendEvent(button, pos) {\n            if (self._vt300Mouse) {\n                button &= 3;\n                pos.x -= 32;\n                pos.y -= 32;\n                var data_1 = EscapeSequences_1.C0.ESC + '[24';\n                if (button === 0)\n                    data_1 += '1';\n                else if (button === 1)\n                    data_1 += '3';\n                else if (button === 2)\n                    data_1 += '5';\n                else if (button === 3)\n                    return;\n                else\n                    data_1 += '0';\n                data_1 += '~[' + pos.x + ',' + pos.y + ']\\r';\n                self.handler(data_1);\n                return;\n            }\n            if (self._decLocator) {\n                button &= 3;\n                pos.x -= 32;\n                pos.y -= 32;\n                if (button === 0)\n                    button = 2;\n                else if (button === 1)\n                    button = 4;\n                else if (button === 2)\n                    button = 6;\n                else if (button === 3)\n                    button = 3;\n                self.handler(EscapeSequences_1.C0.ESC + '['\n                    + button\n                    + ';'\n                    + (button === 3 ? 4 : 0)\n                    + ';'\n                    + pos.y\n                    + ';'\n                    + pos.x\n                    + ';'\n                    + pos.page || 0\n                    + '&w');\n                return;\n            }\n            if (self.urxvtMouse) {\n                pos.x -= 32;\n                pos.y -= 32;\n                pos.x++;\n                pos.y++;\n                self.handler(EscapeSequences_1.C0.ESC + '[' + button + ';' + pos.x + ';' + pos.y + 'M');\n                return;\n            }\n            if (self.sgrMouse) {\n                pos.x -= 32;\n                pos.y -= 32;\n                self.handler(EscapeSequences_1.C0.ESC + '[<'\n                    + (((button & 3) === 3 ? button & ~3 : button) - 32)\n                    + ';'\n                    + pos.x\n                    + ';'\n                    + pos.y\n                    + ((button & 3) === 3 ? 'm' : 'M'));\n                return;\n            }\n            var data = [];\n            encode(data, button);\n            encode(data, pos.x);\n            encode(data, pos.y);\n            self.handler(EscapeSequences_1.C0.ESC + '[M' + String.fromCharCode.apply(String, data));\n        }\n        function getButton(ev) {\n            var button;\n            var shift;\n            var meta;\n            var ctrl;\n            var mod;\n            switch (ev.overrideType || ev.type) {\n                case 'mousedown':\n                    button = ev.button !== null && ev.button !== undefined\n                        ? +ev.button\n                        : ev.which !== null && ev.which !== undefined\n                            ? ev.which - 1\n                            : null;\n                    if (Browser.isMSIE) {\n                        button = button === 1 ? 0 : button === 4 ? 1 : button;\n                    }\n                    break;\n                case 'mouseup':\n                    button = 3;\n                    break;\n                case 'DOMMouseScroll':\n                    button = ev.detail < 0\n                        ? 64\n                        : 65;\n                    break;\n                case 'wheel':\n                    button = ev.deltaY < 0\n                        ? 64\n                        : 65;\n                    break;\n            }\n            shift = ev.shiftKey ? 4 : 0;\n            meta = ev.metaKey ? 8 : 0;\n            ctrl = ev.ctrlKey ? 16 : 0;\n            mod = shift | meta | ctrl;\n            if (self.vt200Mouse) {\n                mod &= ctrl;\n            }\n            else if (!self.normalMouse) {\n                mod = 0;\n            }\n            button = (32 + (mod << 2)) + button;\n            return button;\n        }\n        this.register(Lifecycle_1.addDisposableDomListener(el, 'mousedown', function (ev) {\n            ev.preventDefault();\n            _this.focus();\n            if (!_this.mouseEvents || _this.selectionManager.shouldForceSelection(ev)) {\n                return;\n            }\n            sendButton(ev);\n            if (_this.vt200Mouse) {\n                ev.overrideType = 'mouseup';\n                sendButton(ev);\n                return _this.cancel(ev);\n            }\n            var moveHandler;\n            if (_this.normalMouse) {\n                moveHandler = function (event) {\n                    if (!_this.normalMouse) {\n                        return;\n                    }\n                    sendMove(event);\n                };\n                _this._document.addEventListener('mousemove', moveHandler);\n            }\n            var handler = function (ev) {\n                if (_this.normalMouse && !_this.x10Mouse) {\n                    sendButton(ev);\n                }\n                if (moveHandler) {\n                    _this._document.removeEventListener('mousemove', moveHandler);\n                    moveHandler = null;\n                }\n                _this._document.removeEventListener('mouseup', handler);\n                return _this.cancel(ev);\n            };\n            _this._document.addEventListener('mouseup', handler);\n            return _this.cancel(ev);\n        }));\n        this.register(Lifecycle_1.addDisposableDomListener(el, 'wheel', function (ev) {\n            if (!_this.mouseEvents) {\n                if (!_this.buffer.hasScrollback) {\n                    var amount = _this.viewport.getLinesScrolled(ev);\n                    if (amount === 0) {\n                        return;\n                    }\n                    var sequence = EscapeSequences_1.C0.ESC + (_this.applicationCursor ? 'O' : '[') + (ev.deltaY < 0 ? 'A' : 'B');\n                    var data = '';\n                    for (var i = 0; i < Math.abs(amount); i++) {\n                        data += sequence;\n                    }\n                    _this.handler(data);\n                }\n                return;\n            }\n            if (_this.x10Mouse || _this._vt300Mouse || _this._decLocator)\n                return;\n            sendButton(ev);\n            ev.preventDefault();\n        }));\n        this.register(Lifecycle_1.addDisposableDomListener(el, 'wheel', function (ev) {\n            if (_this.mouseEvents)\n                return;\n            _this.viewport.onWheel(ev);\n            return _this.cancel(ev);\n        }));\n        this.register(Lifecycle_1.addDisposableDomListener(el, 'touchstart', function (ev) {\n            if (_this.mouseEvents)\n                return;\n            _this.viewport.onTouchStart(ev);\n            return _this.cancel(ev);\n        }));\n        this.register(Lifecycle_1.addDisposableDomListener(el, 'touchmove', function (ev) {\n            if (_this.mouseEvents)\n                return;\n            _this.viewport.onTouchMove(ev);\n            return _this.cancel(ev);\n        }));\n    };\n    Terminal.prototype.refresh = function (start, end) {\n        if (this.renderer) {\n            this.renderer.refreshRows(start, end);\n        }\n    };\n    Terminal.prototype._queueLinkification = function (start, end) {\n        if (this.linkifier) {\n            this.linkifier.linkifyRows(start, end);\n        }\n    };\n    Terminal.prototype.updateCursorStyle = function (ev) {\n        if (this.selectionManager && this.selectionManager.shouldColumnSelect(ev)) {\n            this.element.classList.add('column-select');\n        }\n        else {\n            this.element.classList.remove('column-select');\n        }\n    };\n    Terminal.prototype.showCursor = function () {\n        if (!this.cursorState) {\n            this.cursorState = 1;\n            this.refresh(this.buffer.y, this.buffer.y);\n        }\n    };\n    Terminal.prototype.scroll = function (isWrapped) {\n        if (isWrapped === void 0) { isWrapped = false; }\n        var newLine;\n        var useRecycling = this.options.experimentalBufferLineImpl !== 'JsArray';\n        if (useRecycling) {\n            newLine = this._blankLine;\n            if (!newLine || newLine.length !== this.cols || newLine.get(0)[Buffer_1.CHAR_DATA_ATTR_INDEX] !== this.eraseAttr()) {\n                newLine = this.buffer.getBlankLine(this.eraseAttr(), isWrapped);\n                this._blankLine = newLine;\n            }\n            newLine.isWrapped = isWrapped;\n        }\n        else {\n            newLine = this.buffer.getBlankLine(this.eraseAttr(), isWrapped);\n        }\n        var topRow = this.buffer.ybase + this.buffer.scrollTop;\n        var bottomRow = this.buffer.ybase + this.buffer.scrollBottom;\n        if (this.buffer.scrollTop === 0) {\n            var willBufferBeTrimmed = this.buffer.lines.isFull;\n            if (bottomRow === this.buffer.lines.length - 1) {\n                if (useRecycling) {\n                    if (willBufferBeTrimmed) {\n                        this.buffer.lines.recycle().copyFrom(newLine);\n                    }\n                    else {\n                        this.buffer.lines.push(newLine.clone());\n                    }\n                }\n                else {\n                    this.buffer.lines.push(newLine);\n                }\n            }\n            else {\n                this.buffer.lines.splice(bottomRow + 1, 0, (useRecycling) ? newLine.clone() : newLine);\n            }\n            if (!willBufferBeTrimmed) {\n                this.buffer.ybase++;\n                if (!this._userScrolling) {\n                    this.buffer.ydisp++;\n                }\n            }\n            else {\n                if (this._userScrolling) {\n                    this.buffer.ydisp = Math.max(this.buffer.ydisp - 1, 0);\n                }\n            }\n        }\n        else {\n            var scrollRegionHeight = bottomRow - topRow + 1;\n            this.buffer.lines.shiftElements(topRow + 1, scrollRegionHeight - 1, -1);\n            this.buffer.lines.set(bottomRow, (useRecycling) ? newLine.clone() : newLine);\n        }\n        if (!this._userScrolling) {\n            this.buffer.ydisp = this.buffer.ybase;\n        }\n        this.updateRange(this.buffer.scrollTop);\n        this.updateRange(this.buffer.scrollBottom);\n        this.emit('scroll', this.buffer.ydisp);\n    };\n    Terminal.prototype.scrollLines = function (disp, suppressScrollEvent) {\n        if (disp < 0) {\n            if (this.buffer.ydisp === 0) {\n                return;\n            }\n            this._userScrolling = true;\n        }\n        else if (disp + this.buffer.ydisp >= this.buffer.ybase) {\n            this._userScrolling = false;\n        }\n        var oldYdisp = this.buffer.ydisp;\n        this.buffer.ydisp = Math.max(Math.min(this.buffer.ydisp + disp, this.buffer.ybase), 0);\n        if (oldYdisp === this.buffer.ydisp) {\n            return;\n        }\n        if (!suppressScrollEvent) {\n            this.emit('scroll', this.buffer.ydisp);\n        }\n        this.refresh(0, this.rows - 1);\n    };\n    Terminal.prototype.scrollPages = function (pageCount) {\n        this.scrollLines(pageCount * (this.rows - 1));\n    };\n    Terminal.prototype.scrollToTop = function () {\n        this.scrollLines(-this.buffer.ydisp);\n    };\n    Terminal.prototype.scrollToBottom = function () {\n        this.scrollLines(this.buffer.ybase - this.buffer.ydisp);\n    };\n    Terminal.prototype.scrollToLine = function (line) {\n        var scrollAmount = line - this.buffer.ydisp;\n        if (scrollAmount !== 0) {\n            this.scrollLines(scrollAmount);\n        }\n    };\n    Terminal.prototype.write = function (data) {\n        var _this = this;\n        if (this._isDisposed) {\n            return;\n        }\n        if (!data) {\n            return;\n        }\n        this.writeBuffer.push(data);\n        if (this.options.useFlowControl && !this._xoffSentToCatchUp && this.writeBuffer.length >= WRITE_BUFFER_PAUSE_THRESHOLD) {\n            this.handler(EscapeSequences_1.C0.DC3);\n            this._xoffSentToCatchUp = true;\n        }\n        if (!this._writeInProgress && this.writeBuffer.length > 0) {\n            this._writeInProgress = true;\n            setTimeout(function () {\n                _this._innerWrite();\n            });\n        }\n    };\n    Terminal.prototype._innerWrite = function () {\n        var _this = this;\n        if (this._isDisposed) {\n            this.writeBuffer = [];\n        }\n        var writeBatch = this.writeBuffer.splice(0, WRITE_BATCH_SIZE);\n        while (writeBatch.length > 0) {\n            var data = writeBatch.shift();\n            if (this._xoffSentToCatchUp && writeBatch.length === 0 && this.writeBuffer.length === 0) {\n                this.handler(EscapeSequences_1.C0.DC1);\n                this._xoffSentToCatchUp = false;\n            }\n            this._refreshStart = this.buffer.y;\n            this._refreshEnd = this.buffer.y;\n            this._inputHandler.parse(data);\n            this.updateRange(this.buffer.y);\n            this.refresh(this._refreshStart, this._refreshEnd);\n        }\n        if (this.writeBuffer.length > 0) {\n            setTimeout(function () { return _this._innerWrite(); }, 0);\n        }\n        else {\n            this._writeInProgress = false;\n        }\n    };\n    Terminal.prototype.writeln = function (data) {\n        this.write(data + '\\r\\n');\n    };\n    Terminal.prototype.attachCustomKeyEventHandler = function (customKeyEventHandler) {\n        this._customKeyEventHandler = customKeyEventHandler;\n    };\n    Terminal.prototype.registerLinkMatcher = function (regex, handler, options) {\n        var matcherId = this.linkifier.registerLinkMatcher(regex, handler, options);\n        this.refresh(0, this.rows - 1);\n        return matcherId;\n    };\n    Terminal.prototype.deregisterLinkMatcher = function (matcherId) {\n        if (this.linkifier.deregisterLinkMatcher(matcherId)) {\n            this.refresh(0, this.rows - 1);\n        }\n    };\n    Terminal.prototype.registerCharacterJoiner = function (handler) {\n        var joinerId = this.renderer.registerCharacterJoiner(handler);\n        this.refresh(0, this.rows - 1);\n        return joinerId;\n    };\n    Terminal.prototype.deregisterCharacterJoiner = function (joinerId) {\n        if (this.renderer.deregisterCharacterJoiner(joinerId)) {\n            this.refresh(0, this.rows - 1);\n        }\n    };\n    Object.defineProperty(Terminal.prototype, \"markers\", {\n        get: function () {\n            return this.buffer.markers;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Terminal.prototype.addMarker = function (cursorYOffset) {\n        if (this.buffer !== this.buffers.normal) {\n            return;\n        }\n        return this.buffer.addMarker(this.buffer.ybase + this.buffer.y + cursorYOffset);\n    };\n    Terminal.prototype.hasSelection = function () {\n        return this.selectionManager ? this.selectionManager.hasSelection : false;\n    };\n    Terminal.prototype.getSelection = function () {\n        return this.selectionManager ? this.selectionManager.selectionText : '';\n    };\n    Terminal.prototype.clearSelection = function () {\n        if (this.selectionManager) {\n            this.selectionManager.clearSelection();\n        }\n    };\n    Terminal.prototype.selectAll = function () {\n        if (this.selectionManager) {\n            this.selectionManager.selectAll();\n        }\n    };\n    Terminal.prototype.selectLines = function (start, end) {\n        if (this.selectionManager) {\n            this.selectionManager.selectLines(start, end);\n        }\n    };\n    Terminal.prototype._keyDown = function (event) {\n        if (this._customKeyEventHandler && this._customKeyEventHandler(event) === false) {\n            return false;\n        }\n        if (!this._compositionHelper.keydown(event)) {\n            if (this.buffer.ybase !== this.buffer.ydisp) {\n                this.scrollToBottom();\n            }\n            return false;\n        }\n        var result = Keyboard_1.evaluateKeyboardEvent(event, this.applicationCursor, this.browser.isMac, this.options.macOptionIsMeta);\n        this.updateCursorStyle(event);\n        if (result.type === 3 || result.type === 2) {\n            var scrollCount = this.rows - 1;\n            this.scrollLines(result.type === 2 ? -scrollCount : scrollCount);\n            return this.cancel(event, true);\n        }\n        if (result.type === 1) {\n            this.selectAll();\n        }\n        if (this._isThirdLevelShift(this.browser, event)) {\n            return true;\n        }\n        if (result.cancel) {\n            this.cancel(event, true);\n        }\n        if (!result.key) {\n            return true;\n        }\n        this.emit('keydown', event);\n        this.emit('key', result.key, event);\n        this.showCursor();\n        this.handler(result.key);\n        return this.cancel(event, true);\n    };\n    Terminal.prototype._isThirdLevelShift = function (browser, ev) {\n        var thirdLevelKey = (browser.isMac && !this.options.macOptionIsMeta && ev.altKey && !ev.ctrlKey && !ev.metaKey) ||\n            (browser.isMSWindows && ev.altKey && ev.ctrlKey && !ev.metaKey);\n        if (ev.type === 'keypress') {\n            return thirdLevelKey;\n        }\n        return thirdLevelKey && (!ev.keyCode || ev.keyCode > 47);\n    };\n    Terminal.prototype.setgLevel = function (g) {\n        this.glevel = g;\n        this.charset = this.charsets[g];\n    };\n    Terminal.prototype.setgCharset = function (g, charset) {\n        this.charsets[g] = charset;\n        if (this.glevel === g) {\n            this.charset = charset;\n        }\n    };\n    Terminal.prototype._keyUp = function (ev) {\n        this.updateCursorStyle(ev);\n    };\n    Terminal.prototype._keyPress = function (ev) {\n        var key;\n        if (this._customKeyEventHandler && this._customKeyEventHandler(ev) === false) {\n            return false;\n        }\n        this.cancel(ev);\n        if (ev.charCode) {\n            key = ev.charCode;\n        }\n        else if (ev.which === null || ev.which === undefined) {\n            key = ev.keyCode;\n        }\n        else if (ev.which !== 0 && ev.charCode !== 0) {\n            key = ev.which;\n        }\n        else {\n            return false;\n        }\n        if (!key || ((ev.altKey || ev.ctrlKey || ev.metaKey) && !this._isThirdLevelShift(this.browser, ev))) {\n            return false;\n        }\n        key = String.fromCharCode(key);\n        this.emit('keypress', key, ev);\n        this.emit('key', key, ev);\n        this.showCursor();\n        this.handler(key);\n        return true;\n    };\n    Terminal.prototype.bell = function () {\n        var _this = this;\n        this.emit('bell');\n        if (this._soundBell()) {\n            this.soundManager.playBellSound();\n        }\n        if (this._visualBell()) {\n            this.element.classList.add('visual-bell-active');\n            clearTimeout(this._visualBellTimer);\n            this._visualBellTimer = window.setTimeout(function () {\n                _this.element.classList.remove('visual-bell-active');\n            }, 200);\n        }\n    };\n    Terminal.prototype.log = function (text, data) {\n        if (!this.options.debug)\n            return;\n        if (!this._context.console || !this._context.console.log)\n            return;\n        this._context.console.log(text, data);\n    };\n    Terminal.prototype.error = function (text, data) {\n        if (!this.options.debug)\n            return;\n        if (!this._context.console || !this._context.console.error)\n            return;\n        this._context.console.error(text, data);\n    };\n    Terminal.prototype.resize = function (x, y) {\n        if (isNaN(x) || isNaN(y)) {\n            return;\n        }\n        if (x === this.cols && y === this.rows) {\n            if (this.charMeasure && (!this.charMeasure.width || !this.charMeasure.height)) {\n                this.charMeasure.measure(this.options);\n            }\n            return;\n        }\n        if (x < 1)\n            x = 1;\n        if (y < 1)\n            y = 1;\n        this.buffers.resize(x, y);\n        this.cols = x;\n        this.rows = y;\n        this.buffers.setupTabStops(this.cols);\n        if (this.charMeasure) {\n            this.charMeasure.measure(this.options);\n        }\n        this.refresh(0, this.rows - 1);\n        this.emit('resize', { cols: x, rows: y });\n    };\n    Terminal.prototype.updateRange = function (y) {\n        if (y < this._refreshStart)\n            this._refreshStart = y;\n        if (y > this._refreshEnd)\n            this._refreshEnd = y;\n    };\n    Terminal.prototype.maxRange = function () {\n        this._refreshStart = 0;\n        this._refreshEnd = this.rows - 1;\n    };\n    Terminal.prototype.clear = function () {\n        if (this.buffer.ybase === 0 && this.buffer.y === 0) {\n            return;\n        }\n        this.buffer.lines.set(0, this.buffer.lines.get(this.buffer.ybase + this.buffer.y));\n        this.buffer.lines.length = 1;\n        this.buffer.ydisp = 0;\n        this.buffer.ybase = 0;\n        this.buffer.y = 0;\n        for (var i = 1; i < this.rows; i++) {\n            this.buffer.lines.push(this.buffer.getBlankLine(Buffer_1.DEFAULT_ATTR));\n        }\n        this.refresh(0, this.rows - 1);\n        this.emit('scroll', this.buffer.ydisp);\n    };\n    Terminal.prototype.ch = function (cur) {\n        if (cur) {\n            return [this.eraseAttr(), Buffer_1.NULL_CELL_CHAR, Buffer_1.NULL_CELL_WIDTH, Buffer_1.NULL_CELL_CODE];\n        }\n        return [Buffer_1.DEFAULT_ATTR, Buffer_1.NULL_CELL_CHAR, Buffer_1.NULL_CELL_WIDTH, Buffer_1.NULL_CELL_CODE];\n    };\n    Terminal.prototype.is = function (term) {\n        return (this.options.termName + '').indexOf(term) === 0;\n    };\n    Terminal.prototype.handler = function (data) {\n        if (this.options.disableStdin) {\n            return;\n        }\n        if (this.selectionManager && this.selectionManager.hasSelection) {\n            this.selectionManager.clearSelection();\n        }\n        if (this.buffer.ybase !== this.buffer.ydisp) {\n            this.scrollToBottom();\n        }\n        this.emit('data', data);\n    };\n    Terminal.prototype.handleTitle = function (title) {\n        this.emit('title', title);\n    };\n    Terminal.prototype.index = function () {\n        this.buffer.y++;\n        if (this.buffer.y > this.buffer.scrollBottom) {\n            this.buffer.y--;\n            this.scroll();\n        }\n        if (this.buffer.x >= this.cols) {\n            this.buffer.x--;\n        }\n    };\n    Terminal.prototype.reverseIndex = function () {\n        if (this.buffer.y === this.buffer.scrollTop) {\n            var scrollRegionHeight = this.buffer.scrollBottom - this.buffer.scrollTop;\n            this.buffer.lines.shiftElements(this.buffer.y + this.buffer.ybase, scrollRegionHeight, 1);\n            this.buffer.lines.set(this.buffer.y + this.buffer.ybase, this.buffer.getBlankLine(this.eraseAttr()));\n            this.updateRange(this.buffer.scrollTop);\n            this.updateRange(this.buffer.scrollBottom);\n        }\n        else {\n            this.buffer.y--;\n        }\n    };\n    Terminal.prototype.reset = function () {\n        this.options.rows = this.rows;\n        this.options.cols = this.cols;\n        var customKeyEventHandler = this._customKeyEventHandler;\n        var inputHandler = this._inputHandler;\n        var cursorState = this.cursorState;\n        this._setup();\n        this._customKeyEventHandler = customKeyEventHandler;\n        this._inputHandler = inputHandler;\n        this.cursorState = cursorState;\n        this.refresh(0, this.rows - 1);\n        if (this.viewport) {\n            this.viewport.syncScrollArea();\n        }\n    };\n    Terminal.prototype.tabSet = function () {\n        this.buffer.tabs[this.buffer.x] = true;\n    };\n    Terminal.prototype.cancel = function (ev, force) {\n        if (!this.options.cancelEvents && !force) {\n            return;\n        }\n        ev.preventDefault();\n        ev.stopPropagation();\n        return false;\n    };\n    Terminal.prototype.matchColor = function (r1, g1, b1) {\n        var hash = (r1 << 16) | (g1 << 8) | b1;\n        if (matchColorCache[hash] !== null && matchColorCache[hash] !== undefined) {\n            return matchColorCache[hash];\n        }\n        var ldiff = Infinity;\n        var li = -1;\n        var i = 0;\n        var c;\n        var r2;\n        var g2;\n        var b2;\n        var diff;\n        for (; i < ColorManager_1.DEFAULT_ANSI_COLORS.length; i++) {\n            c = ColorManager_1.DEFAULT_ANSI_COLORS[i].rgba;\n            r2 = c >>> 24;\n            g2 = c >>> 16 & 0xFF;\n            b2 = c >>> 8 & 0xFF;\n            diff = matchColorDistance(r1, g1, b1, r2, g2, b2);\n            if (diff === 0) {\n                li = i;\n                break;\n            }\n            if (diff < ldiff) {\n                ldiff = diff;\n                li = i;\n            }\n        }\n        return matchColorCache[hash] = li;\n    };\n    Terminal.prototype._visualBell = function () {\n        return false;\n    };\n    Terminal.prototype._soundBell = function () {\n        return this.options.bellStyle === 'sound';\n    };\n    return Terminal;\n}(EventEmitter_1.EventEmitter));\nexports.Terminal = Terminal;\nfunction wasModifierKeyOnlyEvent(ev) {\n    return ev.keyCode === 16 ||\n        ev.keyCode === 17 ||\n        ev.keyCode === 18;\n}\nvar matchColorCache = {};\nfunction matchColorDistance(r1, g1, b1, r2, g2, b2) {\n    return Math.pow(30 * (r1 - r2), 2)\n        + Math.pow(59 * (g1 - g2), 2)\n        + Math.pow(11 * (b1 - b2), 2);\n}\n//# sourceMappingURL=Terminal.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar EscapeSequences_1 = require(\"../common/data/EscapeSequences\");\nvar AltClickHandler = (function () {\n    function AltClickHandler(_mouseEvent, _terminal) {\n        var _a;\n        this._mouseEvent = _mouseEvent;\n        this._terminal = _terminal;\n        this._lines = this._terminal.buffer.lines;\n        this._startCol = this._terminal.buffer.x;\n        this._startRow = this._terminal.buffer.y;\n        var coordinates = this._terminal.mouseHelper.getCoords(this._mouseEvent, this._terminal.element, this._terminal.charMeasure, this._terminal.cols, this._terminal.rows, false);\n        if (coordinates) {\n            _a = coordinates.map(function (coordinate) {\n                return coordinate - 1;\n            }), this._endCol = _a[0], this._endRow = _a[1];\n        }\n    }\n    AltClickHandler.prototype.move = function () {\n        if (this._mouseEvent.altKey && this._endCol !== undefined && this._endRow !== undefined) {\n            this._terminal.handler(this._arrowSequences());\n        }\n    };\n    AltClickHandler.prototype._arrowSequences = function () {\n        if (!this._terminal.buffer.hasScrollback) {\n            return this._resetStartingRow() + this._moveToRequestedRow() + this._moveToRequestedCol();\n        }\n        return this._moveHorizontallyOnly();\n    };\n    AltClickHandler.prototype._resetStartingRow = function () {\n        if (this._moveToRequestedRow().length === 0) {\n            return '';\n        }\n        return repeat(this._bufferLine(this._startCol, this._startRow, this._startCol, this._startRow - this._wrappedRowsForRow(this._startRow), false).length, this._sequence(\"D\"));\n    };\n    AltClickHandler.prototype._moveToRequestedRow = function () {\n        var startRow = this._startRow - this._wrappedRowsForRow(this._startRow);\n        var endRow = this._endRow - this._wrappedRowsForRow(this._endRow);\n        var rowsToMove = Math.abs(startRow - endRow) - this._wrappedRowsCount();\n        return repeat(rowsToMove, this._sequence(this._verticalDirection()));\n    };\n    AltClickHandler.prototype._moveToRequestedCol = function () {\n        var startRow;\n        if (this._moveToRequestedRow().length > 0) {\n            startRow = this._endRow - this._wrappedRowsForRow(this._endRow);\n        }\n        else {\n            startRow = this._startRow;\n        }\n        var endRow = this._endRow;\n        var direction = this._horizontalDirection();\n        return repeat(this._bufferLine(this._startCol, startRow, this._endCol, endRow, direction === \"C\").length, this._sequence(direction));\n    };\n    AltClickHandler.prototype._moveHorizontallyOnly = function () {\n        var direction = this._horizontalDirection();\n        return repeat(Math.abs(this._startCol - this._endCol), this._sequence(direction));\n    };\n    AltClickHandler.prototype._wrappedRowsCount = function () {\n        var wrappedRows = 0;\n        var startRow = this._startRow - this._wrappedRowsForRow(this._startRow);\n        var endRow = this._endRow - this._wrappedRowsForRow(this._endRow);\n        for (var i = 0; i < Math.abs(startRow - endRow); i++) {\n            var direction = this._verticalDirection() === \"A\" ? -1 : 1;\n            if (this._lines.get(startRow + (direction * i)).isWrapped) {\n                wrappedRows++;\n            }\n        }\n        return wrappedRows;\n    };\n    AltClickHandler.prototype._wrappedRowsForRow = function (currentRow) {\n        var rowCount = 0;\n        var lineWraps = this._lines.get(currentRow).isWrapped;\n        while (lineWraps && currentRow >= 0 && currentRow < this._terminal.rows) {\n            rowCount++;\n            currentRow--;\n            lineWraps = this._lines.get(currentRow).isWrapped;\n        }\n        return rowCount;\n    };\n    AltClickHandler.prototype._horizontalDirection = function () {\n        var startRow;\n        if (this._moveToRequestedRow().length > 0) {\n            startRow = this._endRow - this._wrappedRowsForRow(this._endRow);\n        }\n        else {\n            startRow = this._startRow;\n        }\n        if ((this._startCol < this._endCol &&\n            startRow <= this._endRow) ||\n            (this._startCol >= this._endCol &&\n                startRow < this._endRow)) {\n            return \"C\";\n        }\n        return \"D\";\n    };\n    AltClickHandler.prototype._verticalDirection = function () {\n        if (this._startRow > this._endRow) {\n            return \"A\";\n        }\n        return \"B\";\n    };\n    AltClickHandler.prototype._bufferLine = function (startCol, startRow, endCol, endRow, forward) {\n        var currentCol = startCol;\n        var currentRow = startRow;\n        var bufferStr = '';\n        while (currentCol !== endCol || currentRow !== endRow) {\n            currentCol += forward ? 1 : -1;\n            if (forward && currentCol > this._terminal.cols - 1) {\n                bufferStr += this._terminal.buffer.translateBufferLineToString(currentRow, false, startCol, currentCol);\n                currentCol = 0;\n                startCol = 0;\n                currentRow++;\n            }\n            else if (!forward && currentCol < 0) {\n                bufferStr += this._terminal.buffer.translateBufferLineToString(currentRow, false, 0, startCol + 1);\n                currentCol = this._terminal.cols - 1;\n                startCol = currentCol;\n                currentRow--;\n            }\n        }\n        return bufferStr + this._terminal.buffer.translateBufferLineToString(currentRow, false, startCol, currentCol);\n    };\n    AltClickHandler.prototype._sequence = function (direction) {\n        var mod = this._terminal.applicationCursor ? 'O' : '[';\n        return EscapeSequences_1.C0.ESC + mod + direction;\n    };\n    return AltClickHandler;\n}());\nexports.AltClickHandler = AltClickHandler;\nfunction repeat(count, str) {\n    count = Math.floor(count);\n    var rpt = '';\n    for (var i = 0; i < count; i++) {\n        rpt += str;\n    }\n    return rpt;\n}\n//# sourceMappingURL=AltClickHandler.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Lifecycle_1 = require(\"./common/Lifecycle\");\nfunction r(low, high) {\n    var c = high - low;\n    var arr = new Array(c);\n    while (c--) {\n        arr[c] = --high;\n    }\n    return arr;\n}\nvar TransitionTable = (function () {\n    function TransitionTable(length) {\n        this.table = (typeof Uint8Array === 'undefined')\n            ? new Array(length)\n            : new Uint8Array(length);\n    }\n    TransitionTable.prototype.add = function (code, state, action, next) {\n        this.table[state << 8 | code] = ((action | 0) << 4) | ((next === undefined) ? state : next);\n    };\n    TransitionTable.prototype.addMany = function (codes, state, action, next) {\n        for (var i = 0; i < codes.length; i++) {\n            this.add(codes[i], state, action, next);\n        }\n    };\n    return TransitionTable;\n}());\nexports.TransitionTable = TransitionTable;\nvar PRINTABLES = r(0x20, 0x7f);\nvar EXECUTABLES = r(0x00, 0x18);\nEXECUTABLES.push(0x19);\nEXECUTABLES.push.apply(EXECUTABLES, r(0x1c, 0x20));\nvar DEFAULT_TRANSITION = 1 << 4 | 0;\nexports.VT500_TRANSITION_TABLE = (function () {\n    var table = new TransitionTable(4095);\n    var states = r(0, 13 + 1);\n    var state;\n    for (state in states) {\n        for (var code = 0; code < 160; ++code) {\n            table.add(code, state, 1, 0);\n        }\n    }\n    table.addMany(PRINTABLES, 0, 2, 0);\n    for (state in states) {\n        table.addMany([0x18, 0x1a, 0x99, 0x9a], state, 3, 0);\n        table.addMany(r(0x80, 0x90), state, 3, 0);\n        table.addMany(r(0x90, 0x98), state, 3, 0);\n        table.add(0x9c, state, 0, 0);\n        table.add(0x1b, state, 11, 1);\n        table.add(0x9d, state, 4, 8);\n        table.addMany([0x98, 0x9e, 0x9f], state, 0, 7);\n        table.add(0x9b, state, 11, 3);\n        table.add(0x90, state, 11, 9);\n    }\n    table.addMany(EXECUTABLES, 0, 3, 0);\n    table.addMany(EXECUTABLES, 1, 3, 1);\n    table.add(0x7f, 1, 0, 1);\n    table.addMany(EXECUTABLES, 8, 0, 8);\n    table.addMany(EXECUTABLES, 3, 3, 3);\n    table.add(0x7f, 3, 0, 3);\n    table.addMany(EXECUTABLES, 4, 3, 4);\n    table.add(0x7f, 4, 0, 4);\n    table.addMany(EXECUTABLES, 6, 3, 6);\n    table.addMany(EXECUTABLES, 5, 3, 5);\n    table.add(0x7f, 5, 0, 5);\n    table.addMany(EXECUTABLES, 2, 3, 2);\n    table.add(0x7f, 2, 0, 2);\n    table.add(0x5d, 1, 4, 8);\n    table.addMany(PRINTABLES, 8, 5, 8);\n    table.add(0x7f, 8, 5, 8);\n    table.addMany([0x9c, 0x1b, 0x18, 0x1a, 0x07], 8, 6, 0);\n    table.addMany(r(0x1c, 0x20), 8, 0, 8);\n    table.addMany([0x58, 0x5e, 0x5f], 1, 0, 7);\n    table.addMany(PRINTABLES, 7, 0, 7);\n    table.addMany(EXECUTABLES, 7, 0, 7);\n    table.add(0x9c, 7, 0, 0);\n    table.add(0x5b, 1, 11, 3);\n    table.addMany(r(0x40, 0x7f), 3, 7, 0);\n    table.addMany(r(0x30, 0x3a), 3, 8, 4);\n    table.add(0x3b, 3, 8, 4);\n    table.addMany([0x3c, 0x3d, 0x3e, 0x3f], 3, 9, 4);\n    table.addMany(r(0x30, 0x3a), 4, 8, 4);\n    table.add(0x3b, 4, 8, 4);\n    table.addMany(r(0x40, 0x7f), 4, 7, 0);\n    table.addMany([0x3a, 0x3c, 0x3d, 0x3e, 0x3f], 4, 0, 6);\n    table.addMany(r(0x20, 0x40), 6, 0, 6);\n    table.add(0x7f, 6, 0, 6);\n    table.addMany(r(0x40, 0x7f), 6, 0, 0);\n    table.add(0x3a, 3, 0, 6);\n    table.addMany(r(0x20, 0x30), 3, 9, 5);\n    table.addMany(r(0x20, 0x30), 5, 9, 5);\n    table.addMany(r(0x30, 0x40), 5, 0, 6);\n    table.addMany(r(0x40, 0x7f), 5, 7, 0);\n    table.addMany(r(0x20, 0x30), 4, 9, 5);\n    table.addMany(r(0x20, 0x30), 1, 9, 2);\n    table.addMany(r(0x20, 0x30), 2, 9, 2);\n    table.addMany(r(0x30, 0x7f), 2, 10, 0);\n    table.addMany(r(0x30, 0x50), 1, 10, 0);\n    table.addMany(r(0x51, 0x58), 1, 10, 0);\n    table.addMany([0x59, 0x5a, 0x5c], 1, 10, 0);\n    table.addMany(r(0x60, 0x7f), 1, 10, 0);\n    table.add(0x50, 1, 11, 9);\n    table.addMany(EXECUTABLES, 9, 0, 9);\n    table.add(0x7f, 9, 0, 9);\n    table.addMany(r(0x1c, 0x20), 9, 0, 9);\n    table.addMany(r(0x20, 0x30), 9, 9, 12);\n    table.add(0x3a, 9, 0, 11);\n    table.addMany(r(0x30, 0x3a), 9, 8, 10);\n    table.add(0x3b, 9, 8, 10);\n    table.addMany([0x3c, 0x3d, 0x3e, 0x3f], 9, 9, 10);\n    table.addMany(EXECUTABLES, 11, 0, 11);\n    table.addMany(r(0x20, 0x80), 11, 0, 11);\n    table.addMany(r(0x1c, 0x20), 11, 0, 11);\n    table.addMany(EXECUTABLES, 10, 0, 10);\n    table.add(0x7f, 10, 0, 10);\n    table.addMany(r(0x1c, 0x20), 10, 0, 10);\n    table.addMany(r(0x30, 0x3a), 10, 8, 10);\n    table.add(0x3b, 10, 8, 10);\n    table.addMany([0x3a, 0x3c, 0x3d, 0x3e, 0x3f], 10, 0, 11);\n    table.addMany(r(0x20, 0x30), 10, 9, 12);\n    table.addMany(EXECUTABLES, 12, 0, 12);\n    table.add(0x7f, 12, 0, 12);\n    table.addMany(r(0x1c, 0x20), 12, 0, 12);\n    table.addMany(r(0x20, 0x30), 12, 9, 12);\n    table.addMany(r(0x30, 0x40), 12, 0, 11);\n    table.addMany(r(0x40, 0x7f), 12, 12, 13);\n    table.addMany(r(0x40, 0x7f), 10, 12, 13);\n    table.addMany(r(0x40, 0x7f), 9, 12, 13);\n    table.addMany(EXECUTABLES, 13, 13, 13);\n    table.addMany(PRINTABLES, 13, 13, 13);\n    table.add(0x7f, 13, 0, 13);\n    table.addMany([0x1b, 0x9c], 13, 14, 0);\n    return table;\n})();\nvar DcsDummy = (function () {\n    function DcsDummy() {\n    }\n    DcsDummy.prototype.hook = function (collect, params, flag) { };\n    DcsDummy.prototype.put = function (data, start, end) { };\n    DcsDummy.prototype.unhook = function () { };\n    return DcsDummy;\n}());\nvar EscapeSequenceParser = (function (_super) {\n    __extends(EscapeSequenceParser, _super);\n    function EscapeSequenceParser(TRANSITIONS) {\n        if (TRANSITIONS === void 0) { TRANSITIONS = exports.VT500_TRANSITION_TABLE; }\n        var _this = _super.call(this) || this;\n        _this.TRANSITIONS = TRANSITIONS;\n        _this.initialState = 0;\n        _this.currentState = _this.initialState;\n        _this._osc = '';\n        _this._params = [0];\n        _this._collect = '';\n        _this._printHandlerFb = function (data, start, end) { };\n        _this._executeHandlerFb = function (code) { };\n        _this._csiHandlerFb = function (collect, params, flag) { };\n        _this._escHandlerFb = function (collect, flag) { };\n        _this._oscHandlerFb = function (identifier, data) { };\n        _this._dcsHandlerFb = new DcsDummy();\n        _this._errorHandlerFb = function (state) { return state; };\n        _this._printHandler = _this._printHandlerFb;\n        _this._executeHandlers = Object.create(null);\n        _this._csiHandlers = Object.create(null);\n        _this._escHandlers = Object.create(null);\n        _this._oscHandlers = Object.create(null);\n        _this._dcsHandlers = Object.create(null);\n        _this._activeDcsHandler = null;\n        _this._errorHandler = _this._errorHandlerFb;\n        _this.setEscHandler('\\\\', function () { });\n        return _this;\n    }\n    EscapeSequenceParser.prototype.dispose = function () {\n        this._printHandlerFb = null;\n        this._executeHandlerFb = null;\n        this._csiHandlerFb = null;\n        this._escHandlerFb = null;\n        this._oscHandlerFb = null;\n        this._dcsHandlerFb = null;\n        this._errorHandlerFb = null;\n        this._printHandler = null;\n        this._executeHandlers = null;\n        this._csiHandlers = null;\n        this._escHandlers = null;\n        this._oscHandlers = null;\n        this._dcsHandlers = null;\n        this._activeDcsHandler = null;\n        this._errorHandler = null;\n    };\n    EscapeSequenceParser.prototype.setPrintHandler = function (callback) {\n        this._printHandler = callback;\n    };\n    EscapeSequenceParser.prototype.clearPrintHandler = function () {\n        this._printHandler = this._printHandlerFb;\n    };\n    EscapeSequenceParser.prototype.setExecuteHandler = function (flag, callback) {\n        this._executeHandlers[flag.charCodeAt(0)] = callback;\n    };\n    EscapeSequenceParser.prototype.clearExecuteHandler = function (flag) {\n        if (this._executeHandlers[flag.charCodeAt(0)])\n            delete this._executeHandlers[flag.charCodeAt(0)];\n    };\n    EscapeSequenceParser.prototype.setExecuteHandlerFallback = function (callback) {\n        this._executeHandlerFb = callback;\n    };\n    EscapeSequenceParser.prototype.setCsiHandler = function (flag, callback) {\n        this._csiHandlers[flag.charCodeAt(0)] = callback;\n    };\n    EscapeSequenceParser.prototype.clearCsiHandler = function (flag) {\n        if (this._csiHandlers[flag.charCodeAt(0)])\n            delete this._csiHandlers[flag.charCodeAt(0)];\n    };\n    EscapeSequenceParser.prototype.setCsiHandlerFallback = function (callback) {\n        this._csiHandlerFb = callback;\n    };\n    EscapeSequenceParser.prototype.setEscHandler = function (collectAndFlag, callback) {\n        this._escHandlers[collectAndFlag] = callback;\n    };\n    EscapeSequenceParser.prototype.clearEscHandler = function (collectAndFlag) {\n        if (this._escHandlers[collectAndFlag])\n            delete this._escHandlers[collectAndFlag];\n    };\n    EscapeSequenceParser.prototype.setEscHandlerFallback = function (callback) {\n        this._escHandlerFb = callback;\n    };\n    EscapeSequenceParser.prototype.setOscHandler = function (ident, callback) {\n        this._oscHandlers[ident] = callback;\n    };\n    EscapeSequenceParser.prototype.clearOscHandler = function (ident) {\n        if (this._oscHandlers[ident])\n            delete this._oscHandlers[ident];\n    };\n    EscapeSequenceParser.prototype.setOscHandlerFallback = function (callback) {\n        this._oscHandlerFb = callback;\n    };\n    EscapeSequenceParser.prototype.setDcsHandler = function (collectAndFlag, handler) {\n        this._dcsHandlers[collectAndFlag] = handler;\n    };\n    EscapeSequenceParser.prototype.clearDcsHandler = function (collectAndFlag) {\n        if (this._dcsHandlers[collectAndFlag])\n            delete this._dcsHandlers[collectAndFlag];\n    };\n    EscapeSequenceParser.prototype.setDcsHandlerFallback = function (handler) {\n        this._dcsHandlerFb = handler;\n    };\n    EscapeSequenceParser.prototype.setErrorHandler = function (callback) {\n        this._errorHandler = callback;\n    };\n    EscapeSequenceParser.prototype.clearErrorHandler = function () {\n        this._errorHandler = this._errorHandlerFb;\n    };\n    EscapeSequenceParser.prototype.reset = function () {\n        this.currentState = this.initialState;\n        this._osc = '';\n        this._params = [0];\n        this._collect = '';\n        this._activeDcsHandler = null;\n    };\n    EscapeSequenceParser.prototype.parse = function (data) {\n        var code = 0;\n        var transition = 0;\n        var error = false;\n        var currentState = this.currentState;\n        var print = -1;\n        var dcs = -1;\n        var osc = this._osc;\n        var collect = this._collect;\n        var params = this._params;\n        var table = this.TRANSITIONS.table;\n        var dcsHandler = this._activeDcsHandler;\n        var callback = null;\n        var l = data.length;\n        for (var i = 0; i < l; ++i) {\n            code = data.charCodeAt(i);\n            if (currentState === 0 && code > 0x1f && code < 0x80) {\n                print = (~print) ? print : i;\n                do\n                    i++;\n                while (i < l && data.charCodeAt(i) > 0x1f && data.charCodeAt(i) < 0x80);\n                i--;\n                continue;\n            }\n            if (currentState === 4 && (code > 0x2f && code < 0x39)) {\n                params[params.length - 1] = params[params.length - 1] * 10 + code - 48;\n                continue;\n            }\n            transition = (code < 0xa0) ? (table[currentState << 8 | code]) : DEFAULT_TRANSITION;\n            switch (transition >> 4) {\n                case 2:\n                    print = (~print) ? print : i;\n                    break;\n                case 3:\n                    if (~print) {\n                        this._printHandler(data, print, i);\n                        print = -1;\n                    }\n                    callback = this._executeHandlers[code];\n                    if (callback)\n                        callback();\n                    else\n                        this._executeHandlerFb(code);\n                    break;\n                case 0:\n                    if (~print) {\n                        this._printHandler(data, print, i);\n                        print = -1;\n                    }\n                    else if (~dcs) {\n                        dcsHandler.put(data, dcs, i);\n                        dcs = -1;\n                    }\n                    break;\n                case 1:\n                    if (code > 0x9f) {\n                        switch (currentState) {\n                            case 0:\n                                print = (~print) ? print : i;\n                                break;\n                            case 8:\n                                osc += String.fromCharCode(code);\n                                transition |= 8;\n                                break;\n                            case 6:\n                                transition |= 6;\n                                break;\n                            case 11:\n                                transition |= 11;\n                                break;\n                            case 13:\n                                dcs = (~dcs) ? dcs : i;\n                                transition |= 13;\n                                break;\n                            default:\n                                error = true;\n                        }\n                    }\n                    else {\n                        error = true;\n                    }\n                    if (error) {\n                        var inject = this._errorHandler({\n                            position: i,\n                            code: code,\n                            currentState: currentState,\n                            print: print,\n                            dcs: dcs,\n                            osc: osc,\n                            collect: collect,\n                            params: params,\n                            abort: false\n                        });\n                        if (inject.abort)\n                            return;\n                        error = false;\n                    }\n                    break;\n                case 7:\n                    callback = this._csiHandlers[code];\n                    if (callback)\n                        callback(params, collect);\n                    else\n                        this._csiHandlerFb(collect, params, code);\n                    break;\n                case 8:\n                    if (code === 0x3b)\n                        params.push(0);\n                    else\n                        params[params.length - 1] = params[params.length - 1] * 10 + code - 48;\n                    break;\n                case 9:\n                    collect += String.fromCharCode(code);\n                    break;\n                case 10:\n                    callback = this._escHandlers[collect + String.fromCharCode(code)];\n                    if (callback)\n                        callback(collect, code);\n                    else\n                        this._escHandlerFb(collect, code);\n                    break;\n                case 11:\n                    if (~print) {\n                        this._printHandler(data, print, i);\n                        print = -1;\n                    }\n                    osc = '';\n                    params = [0];\n                    collect = '';\n                    dcs = -1;\n                    break;\n                case 12:\n                    dcsHandler = this._dcsHandlers[collect + String.fromCharCode(code)];\n                    if (!dcsHandler)\n                        dcsHandler = this._dcsHandlerFb;\n                    dcsHandler.hook(collect, params, code);\n                    break;\n                case 13:\n                    dcs = (~dcs) ? dcs : i;\n                    break;\n                case 14:\n                    if (dcsHandler) {\n                        if (~dcs)\n                            dcsHandler.put(data, dcs, i);\n                        dcsHandler.unhook();\n                        dcsHandler = null;\n                    }\n                    if (code === 0x1b)\n                        transition |= 1;\n                    osc = '';\n                    params = [0];\n                    collect = '';\n                    dcs = -1;\n                    break;\n                case 4:\n                    if (~print) {\n                        this._printHandler(data, print, i);\n                        print = -1;\n                    }\n                    osc = '';\n                    break;\n                case 5:\n                    osc += data.charAt(i);\n                    break;\n                case 6:\n                    if (osc && code !== 0x18 && code !== 0x1a) {\n                        var idx = osc.indexOf(';');\n                        if (idx === -1) {\n                            this._oscHandlerFb(-1, osc);\n                        }\n                        else {\n                            var identifier = parseInt(osc.substring(0, idx));\n                            var content = osc.substring(idx + 1);\n                            callback = this._oscHandlers[identifier];\n                            if (callback)\n                                callback(content);\n                            else\n                                this._oscHandlerFb(identifier, content);\n                        }\n                    }\n                    if (code === 0x1b)\n                        transition |= 1;\n                    osc = '';\n                    params = [0];\n                    collect = '';\n                    dcs = -1;\n                    break;\n            }\n            currentState = transition & 15;\n        }\n        if (currentState === 0 && ~print) {\n            this._printHandler(data, print, data.length);\n        }\n        else if (currentState === 13 && ~dcs && dcsHandler) {\n            dcsHandler.put(data, dcs, data.length);\n        }\n        this._osc = osc;\n        this._collect = collect;\n        this._params = params;\n        this._activeDcsHandler = dcsHandler;\n        this.currentState = currentState;\n    };\n    return EscapeSequenceParser;\n}(Lifecycle_1.Disposable));\nexports.EscapeSequenceParser = EscapeSequenceParser;\n//# sourceMappingURL=EscapeSequenceParser.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar LRUMap = (function () {\n    function LRUMap(capacity) {\n        this.capacity = capacity;\n        this._map = {};\n        this._head = null;\n        this._tail = null;\n        this._nodePool = [];\n        this.size = 0;\n    }\n    LRUMap.prototype._unlinkNode = function (node) {\n        var prev = node.prev;\n        var next = node.next;\n        if (node === this._head) {\n            this._head = next;\n        }\n        if (node === this._tail) {\n            this._tail = prev;\n        }\n        if (prev !== null) {\n            prev.next = next;\n        }\n        if (next !== null) {\n            next.prev = prev;\n        }\n    };\n    LRUMap.prototype._appendNode = function (node) {\n        var tail = this._tail;\n        if (tail !== null) {\n            tail.next = node;\n        }\n        node.prev = tail;\n        node.next = null;\n        this._tail = node;\n        if (this._head === null) {\n            this._head = node;\n        }\n    };\n    LRUMap.prototype.prealloc = function (count) {\n        var nodePool = this._nodePool;\n        for (var i = 0; i < count; i++) {\n            nodePool.push({\n                prev: null,\n                next: null,\n                key: null,\n                value: null\n            });\n        }\n    };\n    LRUMap.prototype.get = function (key) {\n        var node = this._map[key];\n        if (node !== undefined) {\n            this._unlinkNode(node);\n            this._appendNode(node);\n            return node.value;\n        }\n        return null;\n    };\n    LRUMap.prototype.peekValue = function (key) {\n        var node = this._map[key];\n        if (node !== undefined) {\n            return node.value;\n        }\n        return null;\n    };\n    LRUMap.prototype.peek = function () {\n        var head = this._head;\n        return head === null ? null : head.value;\n    };\n    LRUMap.prototype.set = function (key, value) {\n        var node = this._map[key];\n        if (node !== undefined) {\n            node = this._map[key];\n            this._unlinkNode(node);\n            node.value = value;\n        }\n        else if (this.size >= this.capacity) {\n            node = this._head;\n            this._unlinkNode(node);\n            delete this._map[node.key];\n            node.key = key;\n            node.value = value;\n            this._map[key] = node;\n        }\n        else {\n            var nodePool = this._nodePool;\n            if (nodePool.length > 0) {\n                node = nodePool.pop();\n                node.key = key;\n                node.value = value;\n            }\n            else {\n                node = {\n                    prev: null,\n                    next: null,\n                    key: key,\n                    value: value\n                };\n            }\n            this._map[key] = node;\n            this.size++;\n        }\n        this._appendNode(node);\n    };\n    return LRUMap;\n}());\nexports.default = LRUMap;\n//# sourceMappingURL=LRUMap.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar MouseZoneManager_1 = require(\"./ui/MouseZoneManager\");\nvar EventEmitter_1 = require(\"./common/EventEmitter\");\nvar Buffer_1 = require(\"./Buffer\");\nvar CharWidth_1 = require(\"./CharWidth\");\nvar Linkifier = (function (_super) {\n    __extends(Linkifier, _super);\n    function Linkifier(_terminal) {\n        var _this = _super.call(this) || this;\n        _this._terminal = _terminal;\n        _this._linkMatchers = [];\n        _this._nextLinkMatcherId = 0;\n        _this._rowsToLinkify = {\n            start: null,\n            end: null\n        };\n        return _this;\n    }\n    Linkifier.prototype.attachToDom = function (mouseZoneManager) {\n        this._mouseZoneManager = mouseZoneManager;\n    };\n    Linkifier.prototype.linkifyRows = function (start, end) {\n        var _this = this;\n        if (!this._mouseZoneManager) {\n            return;\n        }\n        if (this._rowsToLinkify.start === null) {\n            this._rowsToLinkify.start = start;\n            this._rowsToLinkify.end = end;\n        }\n        else {\n            this._rowsToLinkify.start = Math.min(this._rowsToLinkify.start, start);\n            this._rowsToLinkify.end = Math.max(this._rowsToLinkify.end, end);\n        }\n        this._mouseZoneManager.clearAll(start, end);\n        if (this._rowsTimeoutId) {\n            clearTimeout(this._rowsTimeoutId);\n        }\n        this._rowsTimeoutId = setTimeout(function () { return _this._linkifyRows(); }, Linkifier.TIME_BEFORE_LINKIFY);\n    };\n    Linkifier.prototype._linkifyRows = function () {\n        this._rowsTimeoutId = null;\n        var buffer = this._terminal.buffer;\n        var absoluteRowIndexStart = buffer.ydisp + this._rowsToLinkify.start;\n        if (absoluteRowIndexStart >= buffer.lines.length) {\n            return;\n        }\n        var absoluteRowIndexEnd = buffer.ydisp + Math.min(this._rowsToLinkify.end, this._terminal.rows) + 1;\n        var overscanLineLimit = Math.ceil(Linkifier.OVERSCAN_CHAR_LIMIT / this._terminal.cols);\n        var iterator = this._terminal.buffer.iterator(false, absoluteRowIndexStart, absoluteRowIndexEnd, overscanLineLimit, overscanLineLimit);\n        while (iterator.hasNext()) {\n            var lineData = iterator.next();\n            for (var i = 0; i < this._linkMatchers.length; i++) {\n                this._doLinkifyRow(lineData.range.first, lineData.content, this._linkMatchers[i]);\n            }\n        }\n        this._rowsToLinkify.start = null;\n        this._rowsToLinkify.end = null;\n    };\n    Linkifier.prototype.registerLinkMatcher = function (regex, handler, options) {\n        if (options === void 0) { options = {}; }\n        if (!handler) {\n            throw new Error('handler must be defined');\n        }\n        var matcher = {\n            id: this._nextLinkMatcherId++,\n            regex: regex,\n            handler: handler,\n            matchIndex: options.matchIndex,\n            validationCallback: options.validationCallback,\n            hoverTooltipCallback: options.tooltipCallback,\n            hoverLeaveCallback: options.leaveCallback,\n            willLinkActivate: options.willLinkActivate,\n            priority: options.priority || 0\n        };\n        this._addLinkMatcherToList(matcher);\n        return matcher.id;\n    };\n    Linkifier.prototype._addLinkMatcherToList = function (matcher) {\n        if (this._linkMatchers.length === 0) {\n            this._linkMatchers.push(matcher);\n            return;\n        }\n        for (var i = this._linkMatchers.length - 1; i >= 0; i--) {\n            if (matcher.priority <= this._linkMatchers[i].priority) {\n                this._linkMatchers.splice(i + 1, 0, matcher);\n                return;\n            }\n        }\n        this._linkMatchers.splice(0, 0, matcher);\n    };\n    Linkifier.prototype.deregisterLinkMatcher = function (matcherId) {\n        for (var i = 0; i < this._linkMatchers.length; i++) {\n            if (this._linkMatchers[i].id === matcherId) {\n                this._linkMatchers.splice(i, 1);\n                return true;\n            }\n        }\n        return false;\n    };\n    Linkifier.prototype._doLinkifyRow = function (rowIndex, text, matcher) {\n        var _this = this;\n        var rex = new RegExp(matcher.regex.source, matcher.regex.flags + 'g');\n        var match;\n        var stringIndex = -1;\n        var _loop_1 = function () {\n            var uri = match[typeof matcher.matchIndex !== 'number' ? 0 : matcher.matchIndex];\n            if (!uri) {\n                if (this_1._terminal.debug) {\n                    console.log({ match: match, matcher: matcher });\n                    throw new Error('match found without corresponding matchIndex');\n                }\n                return \"break\";\n            }\n            stringIndex = text.indexOf(uri, stringIndex + 1);\n            rex.lastIndex = stringIndex + uri.length;\n            var bufferIndex = this_1._terminal.buffer.stringIndexToBufferIndex(rowIndex, stringIndex);\n            var line = this_1._terminal.buffer.lines.get(bufferIndex[0]);\n            var char = line.get(bufferIndex[1]);\n            var fg;\n            if (char) {\n                var attr = char[Buffer_1.CHAR_DATA_ATTR_INDEX];\n                fg = (attr >> 9) & 0x1ff;\n            }\n            if (matcher.validationCallback) {\n                matcher.validationCallback(uri, function (isValid) {\n                    if (_this._rowsTimeoutId) {\n                        return;\n                    }\n                    if (isValid) {\n                        _this._addLink(bufferIndex[1], bufferIndex[0] - _this._terminal.buffer.ydisp, uri, matcher, fg);\n                    }\n                });\n            }\n            else {\n                this_1._addLink(bufferIndex[1], bufferIndex[0] - this_1._terminal.buffer.ydisp, uri, matcher, fg);\n            }\n        };\n        var this_1 = this;\n        while ((match = rex.exec(text)) !== null) {\n            var state_1 = _loop_1();\n            if (state_1 === \"break\")\n                break;\n        }\n    };\n    Linkifier.prototype._addLink = function (x, y, uri, matcher, fg) {\n        var _this = this;\n        var width = CharWidth_1.getStringCellWidth(uri);\n        var x1 = x % this._terminal.cols;\n        var y1 = y + Math.floor(x / this._terminal.cols);\n        var x2 = (x1 + width) % this._terminal.cols;\n        var y2 = y1 + Math.floor((x1 + width) / this._terminal.cols);\n        if (x2 === 0) {\n            x2 = this._terminal.cols;\n            y2--;\n        }\n        this._mouseZoneManager.add(new MouseZoneManager_1.MouseZone(x1 + 1, y1 + 1, x2 + 1, y2 + 1, function (e) {\n            if (matcher.handler) {\n                return matcher.handler(e, uri);\n            }\n            window.open(uri, '_blank');\n        }, function (e) {\n            _this.emit(\"linkhover\", _this._createLinkHoverEvent(x1, y1, x2, y2, fg));\n            _this._terminal.element.classList.add('xterm-cursor-pointer');\n        }, function (e) {\n            _this.emit(\"linktooltip\", _this._createLinkHoverEvent(x1, y1, x2, y2, fg));\n            if (matcher.hoverTooltipCallback) {\n                matcher.hoverTooltipCallback(e, uri);\n            }\n        }, function () {\n            _this.emit(\"linkleave\", _this._createLinkHoverEvent(x1, y1, x2, y2, fg));\n            _this._terminal.element.classList.remove('xterm-cursor-pointer');\n            if (matcher.hoverLeaveCallback) {\n                matcher.hoverLeaveCallback();\n            }\n        }, function (e) {\n            if (matcher.willLinkActivate) {\n                return matcher.willLinkActivate(e, uri);\n            }\n            return true;\n        }));\n    };\n    Linkifier.prototype._createLinkHoverEvent = function (x1, y1, x2, y2, fg) {\n        return { x1: x1, y1: y1, x2: x2, y2: y2, cols: this._terminal.cols, fg: fg };\n    };\n    Linkifier.TIME_BEFORE_LINKIFY = 200;\n    Linkifier.OVERSCAN_CHAR_LIMIT = 2000;\n    return Linkifier;\n}(EventEmitter_1.EventEmitter));\nexports.Linkifier = Linkifier;\n//# sourceMappingURL=Linkifier.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction proposeGeometry(term) {\n    if (!term.element.parentElement) {\n        return null;\n    }\n    var parentElementStyle = window.getComputedStyle(term.element.parentElement);\n    var parentElementHeight = parseInt(parentElementStyle.getPropertyValue('height'));\n    var parentElementWidth = Math.max(0, parseInt(parentElementStyle.getPropertyValue('width')));\n    var elementStyle = window.getComputedStyle(term.element);\n    var elementPadding = {\n        top: parseInt(elementStyle.getPropertyValue('padding-top')),\n        bottom: parseInt(elementStyle.getPropertyValue('padding-bottom')),\n        right: parseInt(elementStyle.getPropertyValue('padding-right')),\n        left: parseInt(elementStyle.getPropertyValue('padding-left'))\n    };\n    var elementPaddingVer = elementPadding.top + elementPadding.bottom;\n    var elementPaddingHor = elementPadding.right + elementPadding.left;\n    var availableHeight = parentElementHeight - elementPaddingVer;\n    var availableWidth = parentElementWidth - elementPaddingHor - term._core.viewport.scrollBarWidth;\n    var geometry = {\n        cols: Math.floor(availableWidth / term._core.renderer.dimensions.actualCellWidth),\n        rows: Math.floor(availableHeight / term._core.renderer.dimensions.actualCellHeight)\n    };\n    return geometry;\n}\nexports.proposeGeometry = proposeGeometry;\nfunction fit(term) {\n    var geometry = proposeGeometry(term);\n    if (geometry) {\n        if (term.rows !== geometry.rows || term.cols !== geometry.cols) {\n            term._core.renderer.clear();\n            term.resize(geometry.cols, geometry.rows);\n        }\n    }\n}\nexports.fit = fit;\nfunction apply(terminalConstructor) {\n    terminalConstructor.prototype.proposeGeometry = function () {\n        return proposeGeometry(this);\n    };\n    terminalConstructor.prototype.fit = function () {\n        fit(this);\n    };\n}\nexports.apply = apply;\n//# sourceMappingURL=fit.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DEFAULT_COLOR = 256;\nexports.INVERTED_DEFAULT_COLOR = 257;\nexports.DIM_OPACITY = 0.5;\nexports.CHAR_ATLAS_CELL_SPACING = 1;\n//# sourceMappingURL=Types.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar EventEmitter_1 = require(\"./EventEmitter\");\nvar CircularList = (function (_super) {\n    __extends(CircularList, _super);\n    function CircularList(_maxLength) {\n        var _this = _super.call(this) || this;\n        _this._maxLength = _maxLength;\n        _this._array = new Array(_this._maxLength);\n        _this._startIndex = 0;\n        _this._length = 0;\n        return _this;\n    }\n    Object.defineProperty(CircularList.prototype, \"maxLength\", {\n        get: function () {\n            return this._maxLength;\n        },\n        set: function (newMaxLength) {\n            if (this._maxLength === newMaxLength) {\n                return;\n            }\n            var newArray = new Array(newMaxLength);\n            for (var i = 0; i < Math.min(newMaxLength, this.length); i++) {\n                newArray[i] = this._array[this._getCyclicIndex(i)];\n            }\n            this._array = newArray;\n            this._maxLength = newMaxLength;\n            this._startIndex = 0;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(CircularList.prototype, \"length\", {\n        get: function () {\n            return this._length;\n        },\n        set: function (newLength) {\n            if (newLength > this._length) {\n                for (var i = this._length; i < newLength; i++) {\n                    this._array[i] = undefined;\n                }\n            }\n            this._length = newLength;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    CircularList.prototype.get = function (index) {\n        return this._array[this._getCyclicIndex(index)];\n    };\n    CircularList.prototype.set = function (index, value) {\n        this._array[this._getCyclicIndex(index)] = value;\n    };\n    CircularList.prototype.push = function (value) {\n        this._array[this._getCyclicIndex(this._length)] = value;\n        if (this._length === this._maxLength) {\n            this._startIndex = ++this._startIndex % this._maxLength;\n            this.emit('trim', 1);\n        }\n        else {\n            this._length++;\n        }\n    };\n    CircularList.prototype.recycle = function () {\n        if (this._length !== this._maxLength) {\n            throw new Error('Can only recycle when the buffer is full');\n        }\n        this._startIndex = ++this._startIndex % this._maxLength;\n        this.emit('trim', 1);\n        return this._array[this._getCyclicIndex(this._length - 1)];\n    };\n    Object.defineProperty(CircularList.prototype, \"isFull\", {\n        get: function () {\n            return this._length === this._maxLength;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    CircularList.prototype.pop = function () {\n        return this._array[this._getCyclicIndex(this._length-- - 1)];\n    };\n    CircularList.prototype.splice = function (start, deleteCount) {\n        var items = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            items[_i - 2] = arguments[_i];\n        }\n        if (deleteCount) {\n            for (var i = start; i < this._length - deleteCount; i++) {\n                this._array[this._getCyclicIndex(i)] = this._array[this._getCyclicIndex(i + deleteCount)];\n            }\n            this._length -= deleteCount;\n        }\n        if (items && items.length) {\n            for (var i = this._length - 1; i >= start; i--) {\n                this._array[this._getCyclicIndex(i + items.length)] = this._array[this._getCyclicIndex(i)];\n            }\n            for (var i = 0; i < items.length; i++) {\n                this._array[this._getCyclicIndex(start + i)] = items[i];\n            }\n            if (this._length + items.length > this._maxLength) {\n                var countToTrim = (this._length + items.length) - this._maxLength;\n                this._startIndex += countToTrim;\n                this._length = this._maxLength;\n                this.emit('trim', countToTrim);\n            }\n            else {\n                this._length += items.length;\n            }\n        }\n    };\n    CircularList.prototype.trimStart = function (count) {\n        if (count > this._length) {\n            count = this._length;\n        }\n        this._startIndex += count;\n        this._length -= count;\n        this.emit('trim', count);\n    };\n    CircularList.prototype.shiftElements = function (start, count, offset) {\n        if (count <= 0) {\n            return;\n        }\n        if (start < 0 || start >= this._length) {\n            throw new Error('start argument out of range');\n        }\n        if (start + offset < 0) {\n            throw new Error('Cannot shift elements in list beyond index 0');\n        }\n        if (offset > 0) {\n            for (var i = count - 1; i >= 0; i--) {\n                this.set(start + i + offset, this.get(start + i));\n            }\n            var expandListBy = (start + count + offset) - this._length;\n            if (expandListBy > 0) {\n                this._length += expandListBy;\n                while (this._length > this._maxLength) {\n                    this._length--;\n                    this._startIndex++;\n                    this.emit('trim', 1);\n                }\n            }\n        }\n        else {\n            for (var i = 0; i < count; i++) {\n                this.set(start + i + offset, this.get(start + i));\n            }\n        }\n    };\n    CircularList.prototype._getCyclicIndex = function (index) {\n        return (this._startIndex + index) % this._maxLength;\n    };\n    return CircularList;\n}(EventEmitter_1.EventEmitter));\nexports.CircularList = CircularList;\n//# sourceMappingURL=CircularList.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar SelectionModel = (function () {\n    function SelectionModel(_terminal) {\n        this._terminal = _terminal;\n        this.clearSelection();\n    }\n    SelectionModel.prototype.clearSelection = function () {\n        this.selectionStart = null;\n        this.selectionEnd = null;\n        this.isSelectAllActive = false;\n        this.selectionStartLength = 0;\n    };\n    Object.defineProperty(SelectionModel.prototype, \"finalSelectionStart\", {\n        get: function () {\n            if (this.isSelectAllActive) {\n                return [0, 0];\n            }\n            if (!this.selectionEnd || !this.selectionStart) {\n                return this.selectionStart;\n            }\n            return this.areSelectionValuesReversed() ? this.selectionEnd : this.selectionStart;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(SelectionModel.prototype, \"finalSelectionEnd\", {\n        get: function () {\n            if (this.isSelectAllActive) {\n                return [this._terminal.cols, this._terminal.buffer.ybase + this._terminal.rows - 1];\n            }\n            if (!this.selectionStart) {\n                return null;\n            }\n            if (!this.selectionEnd || this.areSelectionValuesReversed()) {\n                var startPlusLength = this.selectionStart[0] + this.selectionStartLength;\n                if (startPlusLength > this._terminal.cols) {\n                    return [startPlusLength % this._terminal.cols, this.selectionStart[1] + Math.floor(startPlusLength / this._terminal.cols)];\n                }\n                return [startPlusLength, this.selectionStart[1]];\n            }\n            if (this.selectionStartLength) {\n                if (this.selectionEnd[1] === this.selectionStart[1]) {\n                    return [Math.max(this.selectionStart[0] + this.selectionStartLength, this.selectionEnd[0]), this.selectionEnd[1]];\n                }\n            }\n            return this.selectionEnd;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    SelectionModel.prototype.areSelectionValuesReversed = function () {\n        var start = this.selectionStart;\n        var end = this.selectionEnd;\n        if (!start || !end) {\n            return false;\n        }\n        return start[1] > end[1] || (start[1] === end[1] && start[0] > end[0]);\n    };\n    SelectionModel.prototype.onTrim = function (amount) {\n        if (this.selectionStart) {\n            this.selectionStart[1] -= amount;\n        }\n        if (this.selectionEnd) {\n            this.selectionEnd[1] -= amount;\n        }\n        if (this.selectionEnd && this.selectionEnd[1] < 0) {\n            this.clearSelection();\n            return true;\n        }\n        if (this.selectionStart && this.selectionStart[1] < 0) {\n            this.selectionStart[1] = 0;\n        }\n        return false;\n    };\n    return SelectionModel;\n}());\nexports.SelectionModel = SelectionModel;\n//# sourceMappingURL=SelectionModel.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar DEFAULT_FOREGROUND = fromHex('#ffffff');\nvar DEFAULT_BACKGROUND = fromHex('#000000');\nvar DEFAULT_CURSOR = fromHex('#ffffff');\nvar DEFAULT_CURSOR_ACCENT = fromHex('#000000');\nvar DEFAULT_SELECTION = {\n    css: 'rgba(255, 255, 255, 0.3)',\n    rgba: 0xFFFFFF77\n};\nexports.DEFAULT_ANSI_COLORS = (function () {\n    var colors = [\n        fromHex('#2e3436'),\n        fromHex('#cc0000'),\n        fromHex('#4e9a06'),\n        fromHex('#c4a000'),\n        fromHex('#3465a4'),\n        fromHex('#75507b'),\n        fromHex('#06989a'),\n        fromHex('#d3d7cf'),\n        fromHex('#555753'),\n        fromHex('#ef2929'),\n        fromHex('#8ae234'),\n        fromHex('#fce94f'),\n        fromHex('#729fcf'),\n        fromHex('#ad7fa8'),\n        fromHex('#34e2e2'),\n        fromHex('#eeeeec')\n    ];\n    var v = [0x00, 0x5f, 0x87, 0xaf, 0xd7, 0xff];\n    for (var i = 0; i < 216; i++) {\n        var r = v[(i / 36) % 6 | 0];\n        var g = v[(i / 6) % 6 | 0];\n        var b = v[i % 6];\n        colors.push({\n            css: \"#\" + toPaddedHex(r) + toPaddedHex(g) + toPaddedHex(b),\n            rgba: ((r << 24) | (g << 16) | (b << 8) | 0xFF) >>> 0\n        });\n    }\n    for (var i = 0; i < 24; i++) {\n        var c = 8 + i * 10;\n        var ch = toPaddedHex(c);\n        colors.push({\n            css: \"#\" + ch + ch + ch,\n            rgba: ((c << 24) | (c << 16) | (c << 8) | 0xFF) >>> 0\n        });\n    }\n    return colors;\n})();\nfunction fromHex(css) {\n    return {\n        css: css,\n        rgba: parseInt(css.slice(1), 16) << 8 | 0xFF\n    };\n}\nfunction toPaddedHex(c) {\n    var s = c.toString(16);\n    return s.length < 2 ? '0' + s : s;\n}\nvar ColorManager = (function () {\n    function ColorManager(document, allowTransparency) {\n        this.allowTransparency = allowTransparency;\n        var canvas = document.createElement('canvas');\n        canvas.width = 1;\n        canvas.height = 1;\n        this._ctx = canvas.getContext('2d');\n        this._ctx.globalCompositeOperation = 'copy';\n        this._litmusColor = this._ctx.createLinearGradient(0, 0, 1, 1);\n        this.colors = {\n            foreground: DEFAULT_FOREGROUND,\n            background: DEFAULT_BACKGROUND,\n            cursor: DEFAULT_CURSOR,\n            cursorAccent: DEFAULT_CURSOR_ACCENT,\n            selection: DEFAULT_SELECTION,\n            ansi: exports.DEFAULT_ANSI_COLORS.slice()\n        };\n    }\n    ColorManager.prototype.setTheme = function (theme) {\n        this.colors.foreground = this._parseColor(theme.foreground, DEFAULT_FOREGROUND);\n        this.colors.background = this._parseColor(theme.background, DEFAULT_BACKGROUND);\n        this.colors.cursor = this._parseColor(theme.cursor, DEFAULT_CURSOR, true);\n        this.colors.cursorAccent = this._parseColor(theme.cursorAccent, DEFAULT_CURSOR_ACCENT, true);\n        this.colors.selection = this._parseColor(theme.selection, DEFAULT_SELECTION, true);\n        this.colors.ansi[0] = this._parseColor(theme.black, exports.DEFAULT_ANSI_COLORS[0]);\n        this.colors.ansi[1] = this._parseColor(theme.red, exports.DEFAULT_ANSI_COLORS[1]);\n        this.colors.ansi[2] = this._parseColor(theme.green, exports.DEFAULT_ANSI_COLORS[2]);\n        this.colors.ansi[3] = this._parseColor(theme.yellow, exports.DEFAULT_ANSI_COLORS[3]);\n        this.colors.ansi[4] = this._parseColor(theme.blue, exports.DEFAULT_ANSI_COLORS[4]);\n        this.colors.ansi[5] = this._parseColor(theme.magenta, exports.DEFAULT_ANSI_COLORS[5]);\n        this.colors.ansi[6] = this._parseColor(theme.cyan, exports.DEFAULT_ANSI_COLORS[6]);\n        this.colors.ansi[7] = this._parseColor(theme.white, exports.DEFAULT_ANSI_COLORS[7]);\n        this.colors.ansi[8] = this._parseColor(theme.brightBlack, exports.DEFAULT_ANSI_COLORS[8]);\n        this.colors.ansi[9] = this._parseColor(theme.brightRed, exports.DEFAULT_ANSI_COLORS[9]);\n        this.colors.ansi[10] = this._parseColor(theme.brightGreen, exports.DEFAULT_ANSI_COLORS[10]);\n        this.colors.ansi[11] = this._parseColor(theme.brightYellow, exports.DEFAULT_ANSI_COLORS[11]);\n        this.colors.ansi[12] = this._parseColor(theme.brightBlue, exports.DEFAULT_ANSI_COLORS[12]);\n        this.colors.ansi[13] = this._parseColor(theme.brightMagenta, exports.DEFAULT_ANSI_COLORS[13]);\n        this.colors.ansi[14] = this._parseColor(theme.brightCyan, exports.DEFAULT_ANSI_COLORS[14]);\n        this.colors.ansi[15] = this._parseColor(theme.brightWhite, exports.DEFAULT_ANSI_COLORS[15]);\n    };\n    ColorManager.prototype._parseColor = function (css, fallback, allowTransparency) {\n        if (allowTransparency === void 0) { allowTransparency = this.allowTransparency; }\n        if (!css) {\n            return fallback;\n        }\n        this._ctx.fillStyle = this._litmusColor;\n        this._ctx.fillStyle = css;\n        if (typeof this._ctx.fillStyle !== 'string') {\n            console.warn(\"Color: \" + css + \" is invalid using fallback \" + fallback.css);\n            return fallback;\n        }\n        this._ctx.fillRect(0, 0, 1, 1);\n        var data = this._ctx.getImageData(0, 0, 1, 1).data;\n        if (!allowTransparency && data[3] !== 0xFF) {\n            console.warn(\"Color: \" + css + \" is using transparency, but allowTransparency is false. \" +\n                (\"Using fallback \" + fallback.css + \".\"));\n            return fallback;\n        }\n        return {\n            css: css,\n            rgba: (data[0] << 24 | data[1] << 16 | data[2] << 8 | data[3]) >>> 0\n        };\n    };\n    return ColorManager;\n}());\nexports.ColorManager = ColorManager;\n//# sourceMappingURL=ColorManager.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar BaseRenderLayer_1 = require(\"./BaseRenderLayer\");\nvar Types_1 = require(\"./atlas/Types\");\nvar CharAtlasUtils_1 = require(\"./atlas/CharAtlasUtils\");\nvar LinkRenderLayer = (function (_super) {\n    __extends(LinkRenderLayer, _super);\n    function LinkRenderLayer(container, zIndex, colors, terminal) {\n        var _this = _super.call(this, container, 'link', zIndex, true, colors) || this;\n        _this._state = null;\n        terminal.linkifier.on(\"linkhover\", function (e) { return _this._onLinkHover(e); });\n        terminal.linkifier.on(\"linkleave\", function (e) { return _this._onLinkLeave(e); });\n        return _this;\n    }\n    LinkRenderLayer.prototype.resize = function (terminal, dim) {\n        _super.prototype.resize.call(this, terminal, dim);\n        this._state = null;\n    };\n    LinkRenderLayer.prototype.reset = function (terminal) {\n        this._clearCurrentLink();\n    };\n    LinkRenderLayer.prototype._clearCurrentLink = function () {\n        if (this._state) {\n            this.clearCells(this._state.x1, this._state.y1, this._state.cols - this._state.x1, 1);\n            var middleRowCount = this._state.y2 - this._state.y1 - 1;\n            if (middleRowCount > 0) {\n                this.clearCells(0, this._state.y1 + 1, this._state.cols, middleRowCount);\n            }\n            this.clearCells(0, this._state.y2, this._state.x2, 1);\n            this._state = null;\n        }\n    };\n    LinkRenderLayer.prototype._onLinkHover = function (e) {\n        if (e.fg === Types_1.INVERTED_DEFAULT_COLOR) {\n            this._ctx.fillStyle = this._colors.background.css;\n        }\n        else if (CharAtlasUtils_1.is256Color(e.fg)) {\n            this._ctx.fillStyle = this._colors.ansi[e.fg].css;\n        }\n        else {\n            this._ctx.fillStyle = this._colors.foreground.css;\n        }\n        if (e.y1 === e.y2) {\n            this.fillBottomLineAtCells(e.x1, e.y1, e.x2 - e.x1);\n        }\n        else {\n            this.fillBottomLineAtCells(e.x1, e.y1, e.cols - e.x1);\n            for (var y = e.y1 + 1; y < e.y2; y++) {\n                this.fillBottomLineAtCells(0, y, e.cols);\n            }\n            this.fillBottomLineAtCells(0, e.y2, e.x2);\n        }\n        this._state = e;\n    };\n    LinkRenderLayer.prototype._onLinkLeave = function (e) {\n        this._clearCurrentLink();\n    };\n    return LinkRenderLayer;\n}(BaseRenderLayer_1.BaseRenderLayer));\nexports.LinkRenderLayer = LinkRenderLayer;\n//# sourceMappingURL=LinkRenderLayer.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar EscapeSequences_1 = require(\"./common/data/EscapeSequences\");\nvar Charsets_1 = require(\"./core/data/Charsets\");\nvar Buffer_1 = require(\"./Buffer\");\nvar CharWidth_1 = require(\"./CharWidth\");\nvar EscapeSequenceParser_1 = require(\"./EscapeSequenceParser\");\nvar Lifecycle_1 = require(\"./common/Lifecycle\");\nvar GLEVEL = { '(': 0, ')': 1, '*': 2, '+': 3, '-': 1, '.': 2 };\nvar RequestTerminfo = (function () {\n    function RequestTerminfo(_terminal) {\n        this._terminal = _terminal;\n    }\n    RequestTerminfo.prototype.hook = function (collect, params, flag) {\n        this._data = '';\n    };\n    RequestTerminfo.prototype.put = function (data, start, end) {\n        this._data += data.substring(start, end);\n    };\n    RequestTerminfo.prototype.unhook = function () {\n        this._terminal.handler(EscapeSequences_1.C0.ESC + \"P0+r\" + this._data + EscapeSequences_1.C0.ESC + \"\\\\\");\n    };\n    return RequestTerminfo;\n}());\nvar DECRQSS = (function () {\n    function DECRQSS(_terminal) {\n        this._terminal = _terminal;\n    }\n    DECRQSS.prototype.hook = function (collect, params, flag) {\n        this._data = '';\n    };\n    DECRQSS.prototype.put = function (data, start, end) {\n        this._data += data.substring(start, end);\n    };\n    DECRQSS.prototype.unhook = function () {\n        switch (this._data) {\n            case '\"q':\n                return this._terminal.handler(EscapeSequences_1.C0.ESC + \"P1$r0\\\"q\" + EscapeSequences_1.C0.ESC + \"\\\\\");\n            case '\"p':\n                return this._terminal.handler(EscapeSequences_1.C0.ESC + \"P1$r61\\\"p\" + EscapeSequences_1.C0.ESC + \"\\\\\");\n            case 'r':\n                var pt = '' + (this._terminal.buffer.scrollTop + 1) +\n                    ';' + (this._terminal.buffer.scrollBottom + 1) + 'r';\n                return this._terminal.handler(EscapeSequences_1.C0.ESC + \"P1$r\" + pt + EscapeSequences_1.C0.ESC + \"\\\\\");\n            case 'm':\n                return this._terminal.handler(EscapeSequences_1.C0.ESC + \"P1$r0m\" + EscapeSequences_1.C0.ESC + \"\\\\\");\n            case ' q':\n                var STYLES = { 'block': 2, 'underline': 4, 'bar': 6 };\n                var style = STYLES[this._terminal.getOption('cursorStyle')];\n                style -= this._terminal.getOption('cursorBlink');\n                return this._terminal.handler(EscapeSequences_1.C0.ESC + \"P1$r\" + style + \" q\" + EscapeSequences_1.C0.ESC + \"\\\\\");\n            default:\n                this._terminal.error('Unknown DCS $q %s', this._data);\n                this._terminal.handler(EscapeSequences_1.C0.ESC + \"P0$r\" + this._data + EscapeSequences_1.C0.ESC + \"\\\\\");\n        }\n    };\n    return DECRQSS;\n}());\nvar InputHandler = (function (_super) {\n    __extends(InputHandler, _super);\n    function InputHandler(_terminal, _parser) {\n        if (_parser === void 0) { _parser = new EscapeSequenceParser_1.EscapeSequenceParser(); }\n        var _this = _super.call(this) || this;\n        _this._terminal = _terminal;\n        _this._parser = _parser;\n        _this.register(_this._parser);\n        _this._surrogateFirst = '';\n        _this._parser.setCsiHandlerFallback(function (collect, params, flag) {\n            _this._terminal.error('Unknown CSI code: ', { collect: collect, params: params, flag: String.fromCharCode(flag) });\n        });\n        _this._parser.setEscHandlerFallback(function (collect, flag) {\n            _this._terminal.error('Unknown ESC code: ', { collect: collect, flag: String.fromCharCode(flag) });\n        });\n        _this._parser.setExecuteHandlerFallback(function (code) {\n            _this._terminal.error('Unknown EXECUTE code: ', { code: code });\n        });\n        _this._parser.setOscHandlerFallback(function (identifier, data) {\n            _this._terminal.error('Unknown OSC code: ', { identifier: identifier, data: data });\n        });\n        _this._parser.setPrintHandler(function (data, start, end) { return _this.print(data, start, end); });\n        _this._parser.setCsiHandler('@', function (params, collect) { return _this.insertChars(params); });\n        _this._parser.setCsiHandler('A', function (params, collect) { return _this.cursorUp(params); });\n        _this._parser.setCsiHandler('B', function (params, collect) { return _this.cursorDown(params); });\n        _this._parser.setCsiHandler('C', function (params, collect) { return _this.cursorForward(params); });\n        _this._parser.setCsiHandler('D', function (params, collect) { return _this.cursorBackward(params); });\n        _this._parser.setCsiHandler('E', function (params, collect) { return _this.cursorNextLine(params); });\n        _this._parser.setCsiHandler('F', function (params, collect) { return _this.cursorPrecedingLine(params); });\n        _this._parser.setCsiHandler('G', function (params, collect) { return _this.cursorCharAbsolute(params); });\n        _this._parser.setCsiHandler('H', function (params, collect) { return _this.cursorPosition(params); });\n        _this._parser.setCsiHandler('I', function (params, collect) { return _this.cursorForwardTab(params); });\n        _this._parser.setCsiHandler('J', function (params, collect) { return _this.eraseInDisplay(params); });\n        _this._parser.setCsiHandler('K', function (params, collect) { return _this.eraseInLine(params); });\n        _this._parser.setCsiHandler('L', function (params, collect) { return _this.insertLines(params); });\n        _this._parser.setCsiHandler('M', function (params, collect) { return _this.deleteLines(params); });\n        _this._parser.setCsiHandler('P', function (params, collect) { return _this.deleteChars(params); });\n        _this._parser.setCsiHandler('S', function (params, collect) { return _this.scrollUp(params); });\n        _this._parser.setCsiHandler('T', function (params, collect) { return _this.scrollDown(params, collect); });\n        _this._parser.setCsiHandler('X', function (params, collect) { return _this.eraseChars(params); });\n        _this._parser.setCsiHandler('Z', function (params, collect) { return _this.cursorBackwardTab(params); });\n        _this._parser.setCsiHandler('`', function (params, collect) { return _this.charPosAbsolute(params); });\n        _this._parser.setCsiHandler('a', function (params, collect) { return _this.hPositionRelative(params); });\n        _this._parser.setCsiHandler('b', function (params, collect) { return _this.repeatPrecedingCharacter(params); });\n        _this._parser.setCsiHandler('c', function (params, collect) { return _this.sendDeviceAttributes(params, collect); });\n        _this._parser.setCsiHandler('d', function (params, collect) { return _this.linePosAbsolute(params); });\n        _this._parser.setCsiHandler('e', function (params, collect) { return _this.vPositionRelative(params); });\n        _this._parser.setCsiHandler('f', function (params, collect) { return _this.hVPosition(params); });\n        _this._parser.setCsiHandler('g', function (params, collect) { return _this.tabClear(params); });\n        _this._parser.setCsiHandler('h', function (params, collect) { return _this.setMode(params, collect); });\n        _this._parser.setCsiHandler('l', function (params, collect) { return _this.resetMode(params, collect); });\n        _this._parser.setCsiHandler('m', function (params, collect) { return _this.charAttributes(params); });\n        _this._parser.setCsiHandler('n', function (params, collect) { return _this.deviceStatus(params, collect); });\n        _this._parser.setCsiHandler('p', function (params, collect) { return _this.softReset(params, collect); });\n        _this._parser.setCsiHandler('q', function (params, collect) { return _this.setCursorStyle(params, collect); });\n        _this._parser.setCsiHandler('r', function (params, collect) { return _this.setScrollRegion(params, collect); });\n        _this._parser.setCsiHandler('s', function (params, collect) { return _this.saveCursor(params); });\n        _this._parser.setCsiHandler('u', function (params, collect) { return _this.restoreCursor(params); });\n        _this._parser.setExecuteHandler(EscapeSequences_1.C0.BEL, function () { return _this.bell(); });\n        _this._parser.setExecuteHandler(EscapeSequences_1.C0.LF, function () { return _this.lineFeed(); });\n        _this._parser.setExecuteHandler(EscapeSequences_1.C0.VT, function () { return _this.lineFeed(); });\n        _this._parser.setExecuteHandler(EscapeSequences_1.C0.FF, function () { return _this.lineFeed(); });\n        _this._parser.setExecuteHandler(EscapeSequences_1.C0.CR, function () { return _this.carriageReturn(); });\n        _this._parser.setExecuteHandler(EscapeSequences_1.C0.BS, function () { return _this.backspace(); });\n        _this._parser.setExecuteHandler(EscapeSequences_1.C0.HT, function () { return _this.tab(); });\n        _this._parser.setExecuteHandler(EscapeSequences_1.C0.SO, function () { return _this.shiftOut(); });\n        _this._parser.setExecuteHandler(EscapeSequences_1.C0.SI, function () { return _this.shiftIn(); });\n        _this._parser.setExecuteHandler(EscapeSequences_1.C1.IND, function () { return _this.index(); });\n        _this._parser.setExecuteHandler(EscapeSequences_1.C1.NEL, function () { return _this.nextLine(); });\n        _this._parser.setExecuteHandler(EscapeSequences_1.C1.HTS, function () { return _this.tabSet(); });\n        _this._parser.setOscHandler(0, function (data) { return _this.setTitle(data); });\n        _this._parser.setOscHandler(2, function (data) { return _this.setTitle(data); });\n        _this._parser.setEscHandler('7', function () { return _this.saveCursor([]); });\n        _this._parser.setEscHandler('8', function () { return _this.restoreCursor([]); });\n        _this._parser.setEscHandler('D', function () { return _this.index(); });\n        _this._parser.setEscHandler('E', function () { return _this.nextLine(); });\n        _this._parser.setEscHandler('H', function () { return _this.tabSet(); });\n        _this._parser.setEscHandler('M', function () { return _this.reverseIndex(); });\n        _this._parser.setEscHandler('=', function () { return _this.keypadApplicationMode(); });\n        _this._parser.setEscHandler('>', function () { return _this.keypadNumericMode(); });\n        _this._parser.setEscHandler('c', function () { return _this.reset(); });\n        _this._parser.setEscHandler('n', function () { return _this.setgLevel(2); });\n        _this._parser.setEscHandler('o', function () { return _this.setgLevel(3); });\n        _this._parser.setEscHandler('|', function () { return _this.setgLevel(3); });\n        _this._parser.setEscHandler('}', function () { return _this.setgLevel(2); });\n        _this._parser.setEscHandler('~', function () { return _this.setgLevel(1); });\n        _this._parser.setEscHandler('%@', function () { return _this.selectDefaultCharset(); });\n        _this._parser.setEscHandler('%G', function () { return _this.selectDefaultCharset(); });\n        var _loop_1 = function (flag) {\n            this_1._parser.setEscHandler('(' + flag, function () { return _this.selectCharset('(' + flag); });\n            this_1._parser.setEscHandler(')' + flag, function () { return _this.selectCharset(')' + flag); });\n            this_1._parser.setEscHandler('*' + flag, function () { return _this.selectCharset('*' + flag); });\n            this_1._parser.setEscHandler('+' + flag, function () { return _this.selectCharset('+' + flag); });\n            this_1._parser.setEscHandler('-' + flag, function () { return _this.selectCharset('-' + flag); });\n            this_1._parser.setEscHandler('.' + flag, function () { return _this.selectCharset('.' + flag); });\n            this_1._parser.setEscHandler('/' + flag, function () { return _this.selectCharset('/' + flag); });\n        };\n        var this_1 = this;\n        for (var flag in Charsets_1.CHARSETS) {\n            _loop_1(flag);\n        }\n        _this._parser.setErrorHandler(function (state) {\n            _this._terminal.error('Parsing error: ', state);\n            return state;\n        });\n        _this._parser.setDcsHandler('$q', new DECRQSS(_this._terminal));\n        _this._parser.setDcsHandler('+q', new RequestTerminfo(_this._terminal));\n        return _this;\n    }\n    InputHandler.prototype.dispose = function () {\n        _super.prototype.dispose.call(this);\n        this._terminal = null;\n    };\n    InputHandler.prototype.parse = function (data) {\n        if (!this._terminal) {\n            return;\n        }\n        var buffer = this._terminal.buffer;\n        var cursorStartX = buffer.x;\n        var cursorStartY = buffer.y;\n        if (this._terminal.debug) {\n            this._terminal.log('data: ' + data);\n        }\n        if (this._surrogateFirst) {\n            data = this._surrogateFirst + data;\n            this._surrogateFirst = '';\n        }\n        this._parser.parse(data);\n        buffer = this._terminal.buffer;\n        if (buffer.x !== cursorStartX || buffer.y !== cursorStartY) {\n            this._terminal.emit('cursormove');\n        }\n    };\n    InputHandler.prototype.print = function (data, start, end) {\n        var char;\n        var code;\n        var chWidth;\n        var buffer = this._terminal.buffer;\n        var charset = this._terminal.charset;\n        var screenReaderMode = this._terminal.options.screenReaderMode;\n        var cols = this._terminal.cols;\n        var wraparoundMode = this._terminal.wraparoundMode;\n        var insertMode = this._terminal.insertMode;\n        var curAttr = this._terminal.curAttr;\n        var bufferRow = buffer.lines.get(buffer.y + buffer.ybase);\n        this._terminal.updateRange(buffer.y);\n        for (var stringPosition = start; stringPosition < end; ++stringPosition) {\n            char = data.charAt(stringPosition);\n            code = data.charCodeAt(stringPosition);\n            if (0xD800 <= code && code <= 0xDBFF) {\n                if (++stringPosition >= end) {\n                    this._surrogateFirst = char;\n                    continue;\n                }\n                var second = data.charCodeAt(stringPosition);\n                if (0xDC00 <= second && second <= 0xDFFF) {\n                    code = (code - 0xD800) * 0x400 + second - 0xDC00 + 0x10000;\n                    char += data.charAt(stringPosition);\n                }\n                else {\n                    stringPosition--;\n                }\n            }\n            chWidth = CharWidth_1.wcwidth(code);\n            if (charset) {\n                char = charset[char] || char;\n                code = char.charCodeAt(0);\n            }\n            if (screenReaderMode) {\n                this._terminal.emit('a11y.char', char);\n            }\n            if (!chWidth && buffer.x) {\n                var chMinusOne = bufferRow.get(buffer.x - 1);\n                if (chMinusOne) {\n                    if (!chMinusOne[Buffer_1.CHAR_DATA_WIDTH_INDEX]) {\n                        var chMinusTwo = bufferRow.get(buffer.x - 2);\n                        if (chMinusTwo) {\n                            chMinusTwo[Buffer_1.CHAR_DATA_CHAR_INDEX] += char;\n                            chMinusTwo[Buffer_1.CHAR_DATA_CODE_INDEX] = code;\n                            bufferRow.set(buffer.x - 2, chMinusTwo);\n                        }\n                    }\n                    else {\n                        chMinusOne[Buffer_1.CHAR_DATA_CHAR_INDEX] += char;\n                        chMinusOne[Buffer_1.CHAR_DATA_CODE_INDEX] = code;\n                        bufferRow.set(buffer.x - 1, chMinusOne);\n                    }\n                }\n                continue;\n            }\n            if (buffer.x + chWidth - 1 >= cols) {\n                if (wraparoundMode) {\n                    buffer.x = 0;\n                    buffer.y++;\n                    if (buffer.y > buffer.scrollBottom) {\n                        buffer.y--;\n                        this._terminal.scroll(true);\n                    }\n                    else {\n                        buffer.lines.get(buffer.y).isWrapped = true;\n                    }\n                    bufferRow = buffer.lines.get(buffer.y + buffer.ybase);\n                }\n                else {\n                    if (chWidth === 2) {\n                        continue;\n                    }\n                }\n            }\n            if (insertMode) {\n                bufferRow.insertCells(buffer.x, chWidth, [curAttr, Buffer_1.NULL_CELL_CHAR, Buffer_1.NULL_CELL_WIDTH, Buffer_1.NULL_CELL_CODE]);\n                var lastCell = bufferRow.get(cols - 1);\n                if (lastCell[Buffer_1.CHAR_DATA_WIDTH_INDEX] === 2) {\n                    bufferRow.set(cols - 1, [curAttr, Buffer_1.NULL_CELL_CHAR, Buffer_1.NULL_CELL_WIDTH, Buffer_1.NULL_CELL_CODE]);\n                }\n            }\n            bufferRow.set(buffer.x++, [curAttr, char, chWidth, code]);\n            if (chWidth > 0) {\n                while (--chWidth) {\n                    bufferRow.set(buffer.x++, [curAttr, '', 0, undefined]);\n                }\n            }\n        }\n        this._terminal.updateRange(buffer.y);\n    };\n    InputHandler.prototype.bell = function () {\n        this._terminal.bell();\n    };\n    InputHandler.prototype.lineFeed = function () {\n        var buffer = this._terminal.buffer;\n        if (this._terminal.options.convertEol) {\n            buffer.x = 0;\n        }\n        buffer.y++;\n        if (buffer.y > buffer.scrollBottom) {\n            buffer.y--;\n            this._terminal.scroll();\n        }\n        if (buffer.x >= this._terminal.cols) {\n            buffer.x--;\n        }\n        this._terminal.emit('linefeed');\n    };\n    InputHandler.prototype.carriageReturn = function () {\n        this._terminal.buffer.x = 0;\n    };\n    InputHandler.prototype.backspace = function () {\n        if (this._terminal.buffer.x > 0) {\n            this._terminal.buffer.x--;\n        }\n    };\n    InputHandler.prototype.tab = function () {\n        var originalX = this._terminal.buffer.x;\n        this._terminal.buffer.x = this._terminal.buffer.nextStop();\n        if (this._terminal.options.screenReaderMode) {\n            this._terminal.emit('a11y.tab', this._terminal.buffer.x - originalX);\n        }\n    };\n    InputHandler.prototype.shiftOut = function () {\n        this._terminal.setgLevel(1);\n    };\n    InputHandler.prototype.shiftIn = function () {\n        this._terminal.setgLevel(0);\n    };\n    InputHandler.prototype.insertChars = function (params) {\n        this._terminal.buffer.lines.get(this._terminal.buffer.y + this._terminal.buffer.ybase).insertCells(this._terminal.buffer.x, params[0] || 1, [this._terminal.eraseAttr(), Buffer_1.NULL_CELL_CHAR, Buffer_1.NULL_CELL_WIDTH, Buffer_1.NULL_CELL_CODE]);\n        this._terminal.updateRange(this._terminal.buffer.y);\n    };\n    InputHandler.prototype.cursorUp = function (params) {\n        var param = params[0];\n        if (param < 1) {\n            param = 1;\n        }\n        this._terminal.buffer.y -= param;\n        if (this._terminal.buffer.y < 0) {\n            this._terminal.buffer.y = 0;\n        }\n    };\n    InputHandler.prototype.cursorDown = function (params) {\n        var param = params[0];\n        if (param < 1) {\n            param = 1;\n        }\n        this._terminal.buffer.y += param;\n        if (this._terminal.buffer.y >= this._terminal.rows) {\n            this._terminal.buffer.y = this._terminal.rows - 1;\n        }\n        if (this._terminal.buffer.x >= this._terminal.cols) {\n            this._terminal.buffer.x--;\n        }\n    };\n    InputHandler.prototype.cursorForward = function (params) {\n        var param = params[0];\n        if (param < 1) {\n            param = 1;\n        }\n        this._terminal.buffer.x += param;\n        if (this._terminal.buffer.x >= this._terminal.cols) {\n            this._terminal.buffer.x = this._terminal.cols - 1;\n        }\n    };\n    InputHandler.prototype.cursorBackward = function (params) {\n        var param = params[0];\n        if (param < 1) {\n            param = 1;\n        }\n        if (this._terminal.buffer.x >= this._terminal.cols) {\n            this._terminal.buffer.x--;\n        }\n        this._terminal.buffer.x -= param;\n        if (this._terminal.buffer.x < 0) {\n            this._terminal.buffer.x = 0;\n        }\n    };\n    InputHandler.prototype.cursorNextLine = function (params) {\n        var param = params[0];\n        if (param < 1) {\n            param = 1;\n        }\n        this._terminal.buffer.y += param;\n        if (this._terminal.buffer.y >= this._terminal.rows) {\n            this._terminal.buffer.y = this._terminal.rows - 1;\n        }\n        this._terminal.buffer.x = 0;\n    };\n    InputHandler.prototype.cursorPrecedingLine = function (params) {\n        var param = params[0];\n        if (param < 1) {\n            param = 1;\n        }\n        this._terminal.buffer.y -= param;\n        if (this._terminal.buffer.y < 0) {\n            this._terminal.buffer.y = 0;\n        }\n        this._terminal.buffer.x = 0;\n    };\n    InputHandler.prototype.cursorCharAbsolute = function (params) {\n        var param = params[0];\n        if (param < 1) {\n            param = 1;\n        }\n        this._terminal.buffer.x = param - 1;\n    };\n    InputHandler.prototype.cursorPosition = function (params) {\n        var col;\n        var row = params[0] - 1;\n        if (params.length >= 2) {\n            col = params[1] - 1;\n        }\n        else {\n            col = 0;\n        }\n        if (row < 0) {\n            row = 0;\n        }\n        else if (row >= this._terminal.rows) {\n            row = this._terminal.rows - 1;\n        }\n        if (col < 0) {\n            col = 0;\n        }\n        else if (col >= this._terminal.cols) {\n            col = this._terminal.cols - 1;\n        }\n        this._terminal.buffer.x = col;\n        this._terminal.buffer.y = row;\n    };\n    InputHandler.prototype.cursorForwardTab = function (params) {\n        var param = params[0] || 1;\n        while (param--) {\n            this._terminal.buffer.x = this._terminal.buffer.nextStop();\n        }\n    };\n    InputHandler.prototype._eraseInBufferLine = function (y, start, end, clearWrap) {\n        if (clearWrap === void 0) { clearWrap = false; }\n        var line = this._terminal.buffer.lines.get(this._terminal.buffer.ybase + y);\n        line.replaceCells(start, end, [this._terminal.eraseAttr(), Buffer_1.NULL_CELL_CHAR, Buffer_1.NULL_CELL_WIDTH, Buffer_1.NULL_CELL_CODE]);\n        if (clearWrap) {\n            line.isWrapped = false;\n        }\n    };\n    InputHandler.prototype._resetBufferLine = function (y) {\n        this._eraseInBufferLine(y, 0, this._terminal.cols, true);\n    };\n    InputHandler.prototype.eraseInDisplay = function (params) {\n        var j;\n        switch (params[0]) {\n            case 0:\n                j = this._terminal.buffer.y;\n                this._terminal.updateRange(j);\n                this._eraseInBufferLine(j++, this._terminal.buffer.x, this._terminal.cols, this._terminal.buffer.x === 0);\n                for (; j < this._terminal.rows; j++) {\n                    this._resetBufferLine(j);\n                }\n                this._terminal.updateRange(j);\n                break;\n            case 1:\n                j = this._terminal.buffer.y;\n                this._terminal.updateRange(j);\n                this._eraseInBufferLine(j, 0, this._terminal.buffer.x + 1, true);\n                if (this._terminal.buffer.x + 1 >= this._terminal.cols) {\n                    this._terminal.buffer.lines.get(j + 1).isWrapped = false;\n                }\n                while (j--) {\n                    this._resetBufferLine(j);\n                }\n                this._terminal.updateRange(0);\n                break;\n            case 2:\n                j = this._terminal.rows;\n                this._terminal.updateRange(j - 1);\n                while (j--) {\n                    this._resetBufferLine(j);\n                }\n                this._terminal.updateRange(0);\n                break;\n            case 3:\n                var scrollBackSize = this._terminal.buffer.lines.length - this._terminal.rows;\n                if (scrollBackSize > 0) {\n                    this._terminal.buffer.lines.trimStart(scrollBackSize);\n                    this._terminal.buffer.ybase = Math.max(this._terminal.buffer.ybase - scrollBackSize, 0);\n                    this._terminal.buffer.ydisp = Math.max(this._terminal.buffer.ydisp - scrollBackSize, 0);\n                    this._terminal.emit('scroll', 0);\n                }\n                break;\n        }\n    };\n    InputHandler.prototype.eraseInLine = function (params) {\n        switch (params[0]) {\n            case 0:\n                this._eraseInBufferLine(this._terminal.buffer.y, this._terminal.buffer.x, this._terminal.cols);\n                break;\n            case 1:\n                this._eraseInBufferLine(this._terminal.buffer.y, 0, this._terminal.buffer.x + 1);\n                break;\n            case 2:\n                this._eraseInBufferLine(this._terminal.buffer.y, 0, this._terminal.cols);\n                break;\n        }\n        this._terminal.updateRange(this._terminal.buffer.y);\n    };\n    InputHandler.prototype.insertLines = function (params) {\n        var param = params[0];\n        if (param < 1) {\n            param = 1;\n        }\n        var buffer = this._terminal.buffer;\n        var row = buffer.y + buffer.ybase;\n        var scrollBottomRowsOffset = this._terminal.rows - 1 - buffer.scrollBottom;\n        var scrollBottomAbsolute = this._terminal.rows - 1 + buffer.ybase - scrollBottomRowsOffset + 1;\n        while (param--) {\n            buffer.lines.splice(scrollBottomAbsolute - 1, 1);\n            buffer.lines.splice(row, 0, buffer.getBlankLine(this._terminal.eraseAttr()));\n        }\n        this._terminal.updateRange(buffer.y);\n        this._terminal.updateRange(buffer.scrollBottom);\n    };\n    InputHandler.prototype.deleteLines = function (params) {\n        var param = params[0];\n        if (param < 1) {\n            param = 1;\n        }\n        var buffer = this._terminal.buffer;\n        var row = buffer.y + buffer.ybase;\n        var j;\n        j = this._terminal.rows - 1 - buffer.scrollBottom;\n        j = this._terminal.rows - 1 + buffer.ybase - j;\n        while (param--) {\n            buffer.lines.splice(row, 1);\n            buffer.lines.splice(j, 0, buffer.getBlankLine(this._terminal.eraseAttr()));\n        }\n        this._terminal.updateRange(buffer.y);\n        this._terminal.updateRange(buffer.scrollBottom);\n    };\n    InputHandler.prototype.deleteChars = function (params) {\n        this._terminal.buffer.lines.get(this._terminal.buffer.y + this._terminal.buffer.ybase).deleteCells(this._terminal.buffer.x, params[0] || 1, [this._terminal.eraseAttr(), Buffer_1.NULL_CELL_CHAR, Buffer_1.NULL_CELL_WIDTH, Buffer_1.NULL_CELL_CODE]);\n        this._terminal.updateRange(this._terminal.buffer.y);\n    };\n    InputHandler.prototype.scrollUp = function (params) {\n        var param = params[0] || 1;\n        var buffer = this._terminal.buffer;\n        while (param--) {\n            buffer.lines.splice(buffer.ybase + buffer.scrollTop, 1);\n            buffer.lines.splice(buffer.ybase + buffer.scrollBottom, 0, buffer.getBlankLine(Buffer_1.DEFAULT_ATTR));\n        }\n        this._terminal.updateRange(buffer.scrollTop);\n        this._terminal.updateRange(buffer.scrollBottom);\n    };\n    InputHandler.prototype.scrollDown = function (params, collect) {\n        if (params.length < 2 && !collect) {\n            var param = params[0] || 1;\n            var buffer = this._terminal.buffer;\n            while (param--) {\n                buffer.lines.splice(buffer.ybase + buffer.scrollBottom, 1);\n                buffer.lines.splice(buffer.ybase + buffer.scrollBottom, 0, buffer.getBlankLine(Buffer_1.DEFAULT_ATTR));\n            }\n            this._terminal.updateRange(buffer.scrollTop);\n            this._terminal.updateRange(buffer.scrollBottom);\n        }\n    };\n    InputHandler.prototype.eraseChars = function (params) {\n        this._terminal.buffer.lines.get(this._terminal.buffer.y + this._terminal.buffer.ybase).replaceCells(this._terminal.buffer.x, this._terminal.buffer.x + (params[0] || 1), [this._terminal.eraseAttr(), Buffer_1.NULL_CELL_CHAR, Buffer_1.NULL_CELL_WIDTH, Buffer_1.NULL_CELL_CODE]);\n    };\n    InputHandler.prototype.cursorBackwardTab = function (params) {\n        var param = params[0] || 1;\n        var buffer = this._terminal.buffer;\n        while (param--) {\n            buffer.x = buffer.prevStop();\n        }\n    };\n    InputHandler.prototype.charPosAbsolute = function (params) {\n        var param = params[0];\n        if (param < 1) {\n            param = 1;\n        }\n        this._terminal.buffer.x = param - 1;\n        if (this._terminal.buffer.x >= this._terminal.cols) {\n            this._terminal.buffer.x = this._terminal.cols - 1;\n        }\n    };\n    InputHandler.prototype.hPositionRelative = function (params) {\n        var param = params[0];\n        if (param < 1) {\n            param = 1;\n        }\n        this._terminal.buffer.x += param;\n        if (this._terminal.buffer.x >= this._terminal.cols) {\n            this._terminal.buffer.x = this._terminal.cols - 1;\n        }\n    };\n    InputHandler.prototype.repeatPrecedingCharacter = function (params) {\n        var buffer = this._terminal.buffer;\n        var line = buffer.lines.get(buffer.ybase + buffer.y);\n        line.replaceCells(buffer.x, buffer.x + (params[0] || 1), line.get(buffer.x - 1) || [Buffer_1.DEFAULT_ATTR, Buffer_1.NULL_CELL_CHAR, Buffer_1.NULL_CELL_WIDTH, Buffer_1.NULL_CELL_CODE]);\n    };\n    InputHandler.prototype.sendDeviceAttributes = function (params, collect) {\n        if (params[0] > 0) {\n            return;\n        }\n        if (!collect) {\n            if (this._terminal.is('xterm') || this._terminal.is('rxvt-unicode') || this._terminal.is('screen')) {\n                this._terminal.handler(EscapeSequences_1.C0.ESC + '[?1;2c');\n            }\n            else if (this._terminal.is('linux')) {\n                this._terminal.handler(EscapeSequences_1.C0.ESC + '[?6c');\n            }\n        }\n        else if (collect === '>') {\n            if (this._terminal.is('xterm')) {\n                this._terminal.handler(EscapeSequences_1.C0.ESC + '[>0;276;0c');\n            }\n            else if (this._terminal.is('rxvt-unicode')) {\n                this._terminal.handler(EscapeSequences_1.C0.ESC + '[>85;95;0c');\n            }\n            else if (this._terminal.is('linux')) {\n                this._terminal.handler(params[0] + 'c');\n            }\n            else if (this._terminal.is('screen')) {\n                this._terminal.handler(EscapeSequences_1.C0.ESC + '[>83;40003;0c');\n            }\n        }\n    };\n    InputHandler.prototype.linePosAbsolute = function (params) {\n        var param = params[0];\n        if (param < 1) {\n            param = 1;\n        }\n        this._terminal.buffer.y = param - 1;\n        if (this._terminal.buffer.y >= this._terminal.rows) {\n            this._terminal.buffer.y = this._terminal.rows - 1;\n        }\n    };\n    InputHandler.prototype.vPositionRelative = function (params) {\n        var param = params[0];\n        if (param < 1) {\n            param = 1;\n        }\n        this._terminal.buffer.y += param;\n        if (this._terminal.buffer.y >= this._terminal.rows) {\n            this._terminal.buffer.y = this._terminal.rows - 1;\n        }\n        if (this._terminal.buffer.x >= this._terminal.cols) {\n            this._terminal.buffer.x--;\n        }\n    };\n    InputHandler.prototype.hVPosition = function (params) {\n        if (params[0] < 1)\n            params[0] = 1;\n        if (params[1] < 1)\n            params[1] = 1;\n        this._terminal.buffer.y = params[0] - 1;\n        if (this._terminal.buffer.y >= this._terminal.rows) {\n            this._terminal.buffer.y = this._terminal.rows - 1;\n        }\n        this._terminal.buffer.x = params[1] - 1;\n        if (this._terminal.buffer.x >= this._terminal.cols) {\n            this._terminal.buffer.x = this._terminal.cols - 1;\n        }\n    };\n    InputHandler.prototype.tabClear = function (params) {\n        var param = params[0];\n        if (param <= 0) {\n            delete this._terminal.buffer.tabs[this._terminal.buffer.x];\n        }\n        else if (param === 3) {\n            this._terminal.buffer.tabs = {};\n        }\n    };\n    InputHandler.prototype.setMode = function (params, collect) {\n        if (params.length > 1) {\n            for (var i = 0; i < params.length; i++) {\n                this.setMode([params[i]]);\n            }\n            return;\n        }\n        if (!collect) {\n            switch (params[0]) {\n                case 4:\n                    this._terminal.insertMode = true;\n                    break;\n                case 20:\n                    break;\n            }\n        }\n        else if (collect === '?') {\n            switch (params[0]) {\n                case 1:\n                    this._terminal.applicationCursor = true;\n                    break;\n                case 2:\n                    this._terminal.setgCharset(0, Charsets_1.DEFAULT_CHARSET);\n                    this._terminal.setgCharset(1, Charsets_1.DEFAULT_CHARSET);\n                    this._terminal.setgCharset(2, Charsets_1.DEFAULT_CHARSET);\n                    this._terminal.setgCharset(3, Charsets_1.DEFAULT_CHARSET);\n                    break;\n                case 3:\n                    this._terminal.savedCols = this._terminal.cols;\n                    this._terminal.resize(132, this._terminal.rows);\n                    break;\n                case 6:\n                    this._terminal.originMode = true;\n                    break;\n                case 7:\n                    this._terminal.wraparoundMode = true;\n                    break;\n                case 12:\n                    break;\n                case 66:\n                    this._terminal.log('Serial port requested application keypad.');\n                    this._terminal.applicationKeypad = true;\n                    if (this._terminal.viewport) {\n                        this._terminal.viewport.syncScrollArea();\n                    }\n                    break;\n                case 9:\n                case 1000:\n                case 1002:\n                case 1003:\n                    this._terminal.x10Mouse = params[0] === 9;\n                    this._terminal.vt200Mouse = params[0] === 1000;\n                    this._terminal.normalMouse = params[0] > 1000;\n                    this._terminal.mouseEvents = true;\n                    this._terminal.element.classList.add('enable-mouse-events');\n                    this._terminal.selectionManager.disable();\n                    this._terminal.log('Binding to mouse events.');\n                    break;\n                case 1004:\n                    this._terminal.sendFocus = true;\n                    break;\n                case 1005:\n                    this._terminal.utfMouse = true;\n                    break;\n                case 1006:\n                    this._terminal.sgrMouse = true;\n                    break;\n                case 1015:\n                    this._terminal.urxvtMouse = true;\n                    break;\n                case 25:\n                    this._terminal.cursorHidden = false;\n                    break;\n                case 1048:\n                    this.saveCursor(params);\n                    break;\n                case 1049:\n                    this.saveCursor(params);\n                case 47:\n                case 1047:\n                    this._terminal.buffers.activateAltBuffer(this._terminal.eraseAttr());\n                    this._terminal.refresh(0, this._terminal.rows - 1);\n                    if (this._terminal.viewport) {\n                        this._terminal.viewport.syncScrollArea();\n                    }\n                    this._terminal.showCursor();\n                    break;\n                case 2004:\n                    this._terminal.bracketedPasteMode = true;\n                    break;\n            }\n        }\n    };\n    InputHandler.prototype.resetMode = function (params, collect) {\n        if (params.length > 1) {\n            for (var i = 0; i < params.length; i++) {\n                this.resetMode([params[i]]);\n            }\n            return;\n        }\n        if (!collect) {\n            switch (params[0]) {\n                case 4:\n                    this._terminal.insertMode = false;\n                    break;\n                case 20:\n                    break;\n            }\n        }\n        else if (collect === '?') {\n            switch (params[0]) {\n                case 1:\n                    this._terminal.applicationCursor = false;\n                    break;\n                case 3:\n                    if (this._terminal.cols === 132 && this._terminal.savedCols) {\n                        this._terminal.resize(this._terminal.savedCols, this._terminal.rows);\n                    }\n                    delete this._terminal.savedCols;\n                    break;\n                case 6:\n                    this._terminal.originMode = false;\n                    break;\n                case 7:\n                    this._terminal.wraparoundMode = false;\n                    break;\n                case 12:\n                    break;\n                case 66:\n                    this._terminal.log('Switching back to normal keypad.');\n                    this._terminal.applicationKeypad = false;\n                    if (this._terminal.viewport) {\n                        this._terminal.viewport.syncScrollArea();\n                    }\n                    break;\n                case 9:\n                case 1000:\n                case 1002:\n                case 1003:\n                    this._terminal.x10Mouse = false;\n                    this._terminal.vt200Mouse = false;\n                    this._terminal.normalMouse = false;\n                    this._terminal.mouseEvents = false;\n                    this._terminal.element.classList.remove('enable-mouse-events');\n                    this._terminal.selectionManager.enable();\n                    break;\n                case 1004:\n                    this._terminal.sendFocus = false;\n                    break;\n                case 1005:\n                    this._terminal.utfMouse = false;\n                    break;\n                case 1006:\n                    this._terminal.sgrMouse = false;\n                    break;\n                case 1015:\n                    this._terminal.urxvtMouse = false;\n                    break;\n                case 25:\n                    this._terminal.cursorHidden = true;\n                    break;\n                case 1048:\n                    this.restoreCursor(params);\n                    break;\n                case 1049:\n                case 47:\n                case 1047:\n                    this._terminal.buffers.activateNormalBuffer();\n                    if (params[0] === 1049) {\n                        this.restoreCursor(params);\n                    }\n                    this._terminal.refresh(0, this._terminal.rows - 1);\n                    if (this._terminal.viewport) {\n                        this._terminal.viewport.syncScrollArea();\n                    }\n                    this._terminal.showCursor();\n                    break;\n                case 2004:\n                    this._terminal.bracketedPasteMode = false;\n                    break;\n            }\n        }\n    };\n    InputHandler.prototype.charAttributes = function (params) {\n        if (params.length === 1 && params[0] === 0) {\n            this._terminal.curAttr = Buffer_1.DEFAULT_ATTR;\n            return;\n        }\n        var l = params.length;\n        var flags = this._terminal.curAttr >> 18;\n        var fg = (this._terminal.curAttr >> 9) & 0x1ff;\n        var bg = this._terminal.curAttr & 0x1ff;\n        var p;\n        for (var i = 0; i < l; i++) {\n            p = params[i];\n            if (p >= 30 && p <= 37) {\n                fg = p - 30;\n            }\n            else if (p >= 40 && p <= 47) {\n                bg = p - 40;\n            }\n            else if (p >= 90 && p <= 97) {\n                p += 8;\n                fg = p - 90;\n            }\n            else if (p >= 100 && p <= 107) {\n                p += 8;\n                bg = p - 100;\n            }\n            else if (p === 0) {\n                flags = Buffer_1.DEFAULT_ATTR >> 18;\n                fg = (Buffer_1.DEFAULT_ATTR >> 9) & 0x1ff;\n                bg = Buffer_1.DEFAULT_ATTR & 0x1ff;\n            }\n            else if (p === 1) {\n                flags |= 1;\n            }\n            else if (p === 3) {\n                flags |= 64;\n            }\n            else if (p === 4) {\n                flags |= 2;\n            }\n            else if (p === 5) {\n                flags |= 4;\n            }\n            else if (p === 7) {\n                flags |= 8;\n            }\n            else if (p === 8) {\n                flags |= 16;\n            }\n            else if (p === 2) {\n                flags |= 32;\n            }\n            else if (p === 22) {\n                flags &= ~1;\n                flags &= ~32;\n            }\n            else if (p === 23) {\n                flags &= ~64;\n            }\n            else if (p === 24) {\n                flags &= ~2;\n            }\n            else if (p === 25) {\n                flags &= ~4;\n            }\n            else if (p === 27) {\n                flags &= ~8;\n            }\n            else if (p === 28) {\n                flags &= ~16;\n            }\n            else if (p === 39) {\n                fg = (Buffer_1.DEFAULT_ATTR >> 9) & 0x1ff;\n            }\n            else if (p === 49) {\n                bg = Buffer_1.DEFAULT_ATTR & 0x1ff;\n            }\n            else if (p === 38) {\n                if (params[i + 1] === 2) {\n                    i += 2;\n                    fg = this._terminal.matchColor(params[i] & 0xff, params[i + 1] & 0xff, params[i + 2] & 0xff);\n                    if (fg === -1)\n                        fg = 0x1ff;\n                    i += 2;\n                }\n                else if (params[i + 1] === 5) {\n                    i += 2;\n                    p = params[i] & 0xff;\n                    fg = p;\n                }\n            }\n            else if (p === 48) {\n                if (params[i + 1] === 2) {\n                    i += 2;\n                    bg = this._terminal.matchColor(params[i] & 0xff, params[i + 1] & 0xff, params[i + 2] & 0xff);\n                    if (bg === -1)\n                        bg = 0x1ff;\n                    i += 2;\n                }\n                else if (params[i + 1] === 5) {\n                    i += 2;\n                    p = params[i] & 0xff;\n                    bg = p;\n                }\n            }\n            else if (p === 100) {\n                fg = (Buffer_1.DEFAULT_ATTR >> 9) & 0x1ff;\n                bg = Buffer_1.DEFAULT_ATTR & 0x1ff;\n            }\n            else {\n                this._terminal.error('Unknown SGR attribute: %d.', p);\n            }\n        }\n        this._terminal.curAttr = (flags << 18) | (fg << 9) | bg;\n    };\n    InputHandler.prototype.deviceStatus = function (params, collect) {\n        if (!collect) {\n            switch (params[0]) {\n                case 5:\n                    this._terminal.emit('data', EscapeSequences_1.C0.ESC + \"[0n\");\n                    break;\n                case 6:\n                    var y = this._terminal.buffer.y + 1;\n                    var x = this._terminal.buffer.x + 1;\n                    this._terminal.emit('data', EscapeSequences_1.C0.ESC + \"[\" + y + \";\" + x + \"R\");\n                    break;\n            }\n        }\n        else if (collect === '?') {\n            switch (params[0]) {\n                case 6:\n                    var y = this._terminal.buffer.y + 1;\n                    var x = this._terminal.buffer.x + 1;\n                    this._terminal.emit('data', EscapeSequences_1.C0.ESC + \"[?\" + y + \";\" + x + \"R\");\n                    break;\n                case 15:\n                    break;\n                case 25:\n                    break;\n                case 26:\n                    break;\n                case 53:\n                    break;\n            }\n        }\n    };\n    InputHandler.prototype.softReset = function (params, collect) {\n        if (collect === '!') {\n            this._terminal.cursorHidden = false;\n            this._terminal.insertMode = false;\n            this._terminal.originMode = false;\n            this._terminal.wraparoundMode = true;\n            this._terminal.applicationKeypad = false;\n            if (this._terminal.viewport) {\n                this._terminal.viewport.syncScrollArea();\n            }\n            this._terminal.applicationCursor = false;\n            this._terminal.buffer.scrollTop = 0;\n            this._terminal.buffer.scrollBottom = this._terminal.rows - 1;\n            this._terminal.curAttr = Buffer_1.DEFAULT_ATTR;\n            this._terminal.buffer.x = this._terminal.buffer.y = 0;\n            this._terminal.charset = null;\n            this._terminal.glevel = 0;\n            this._terminal.charsets = [null];\n        }\n    };\n    InputHandler.prototype.setCursorStyle = function (params, collect) {\n        if (collect === ' ') {\n            var param = params[0] < 1 ? 1 : params[0];\n            switch (param) {\n                case 1:\n                case 2:\n                    this._terminal.setOption('cursorStyle', 'block');\n                    break;\n                case 3:\n                case 4:\n                    this._terminal.setOption('cursorStyle', 'underline');\n                    break;\n                case 5:\n                case 6:\n                    this._terminal.setOption('cursorStyle', 'bar');\n                    break;\n            }\n            var isBlinking = param % 2 === 1;\n            this._terminal.setOption('cursorBlink', isBlinking);\n        }\n    };\n    InputHandler.prototype.setScrollRegion = function (params, collect) {\n        if (collect)\n            return;\n        this._terminal.buffer.scrollTop = (params[0] || 1) - 1;\n        this._terminal.buffer.scrollBottom = (params[1] && params[1] <= this._terminal.rows ? params[1] : this._terminal.rows) - 1;\n        this._terminal.buffer.x = 0;\n        this._terminal.buffer.y = 0;\n    };\n    InputHandler.prototype.saveCursor = function (params) {\n        this._terminal.buffer.savedX = this._terminal.buffer.x;\n        this._terminal.buffer.savedY = this._terminal.buffer.y;\n        this._terminal.buffer.savedCurAttr = this._terminal.curAttr;\n    };\n    InputHandler.prototype.restoreCursor = function (params) {\n        this._terminal.buffer.x = this._terminal.buffer.savedX || 0;\n        this._terminal.buffer.y = this._terminal.buffer.savedY || 0;\n        this._terminal.curAttr = this._terminal.buffer.savedCurAttr || Buffer_1.DEFAULT_ATTR;\n    };\n    InputHandler.prototype.setTitle = function (data) {\n        this._terminal.handleTitle(data);\n    };\n    InputHandler.prototype.nextLine = function () {\n        this._terminal.buffer.x = 0;\n        this.index();\n    };\n    InputHandler.prototype.keypadApplicationMode = function () {\n        this._terminal.log('Serial port requested application keypad.');\n        this._terminal.applicationKeypad = true;\n        if (this._terminal.viewport) {\n            this._terminal.viewport.syncScrollArea();\n        }\n    };\n    InputHandler.prototype.keypadNumericMode = function () {\n        this._terminal.log('Switching back to normal keypad.');\n        this._terminal.applicationKeypad = false;\n        if (this._terminal.viewport) {\n            this._terminal.viewport.syncScrollArea();\n        }\n    };\n    InputHandler.prototype.selectDefaultCharset = function () {\n        this._terminal.setgLevel(0);\n        this._terminal.setgCharset(0, Charsets_1.DEFAULT_CHARSET);\n    };\n    InputHandler.prototype.selectCharset = function (collectAndFlag) {\n        if (collectAndFlag.length !== 2)\n            return this.selectDefaultCharset();\n        if (collectAndFlag[0] === '/')\n            return;\n        this._terminal.setgCharset(GLEVEL[collectAndFlag[0]], Charsets_1.CHARSETS[collectAndFlag[1]] || Charsets_1.DEFAULT_CHARSET);\n    };\n    InputHandler.prototype.index = function () {\n        this._terminal.index();\n    };\n    InputHandler.prototype.tabSet = function () {\n        this._terminal.tabSet();\n    };\n    InputHandler.prototype.reverseIndex = function () {\n        this._terminal.reverseIndex();\n    };\n    InputHandler.prototype.reset = function () {\n        this._parser.reset();\n        this._terminal.reset();\n    };\n    InputHandler.prototype.setgLevel = function (level) {\n        this._terminal.setgLevel(level);\n    };\n    return InputHandler;\n}(Lifecycle_1.Disposable));\nexports.InputHandler = InputHandler;\n//# sourceMappingURL=InputHandler.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Disposable = (function () {\n    function Disposable() {\n        this._disposables = [];\n        this._isDisposed = false;\n    }\n    Disposable.prototype.dispose = function () {\n        this._isDisposed = true;\n        this._disposables.forEach(function (d) { return d.dispose(); });\n        this._disposables.length = 0;\n    };\n    Disposable.prototype.register = function (d) {\n        this._disposables.push(d);\n    };\n    Disposable.prototype.unregister = function (d) {\n        var index = this._disposables.indexOf(d);\n        if (index !== -1) {\n            this._disposables.splice(index, 1);\n        }\n    };\n    return Disposable;\n}());\nexports.Disposable = Disposable;\n//# sourceMappingURL=Lifecycle.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar GridCache = (function () {\n    function GridCache() {\n        this.cache = [];\n    }\n    GridCache.prototype.resize = function (width, height) {\n        for (var x = 0; x < width; x++) {\n            if (this.cache.length <= x) {\n                this.cache.push([]);\n            }\n            for (var y = this.cache[x].length; y < height; y++) {\n                this.cache[x].push(null);\n            }\n            this.cache[x].length = height;\n        }\n        this.cache.length = width;\n    };\n    GridCache.prototype.clear = function () {\n        for (var x = 0; x < this.cache.length; x++) {\n            for (var y = 0; y < this.cache[x].length; y++) {\n                this.cache[x][y] = null;\n            }\n        }\n    };\n    return GridCache;\n}());\nexports.GridCache = GridCache;\n//# sourceMappingURL=GridCache.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction attach(term, socket, bidirectional, buffered) {\n    var addonTerminal = term;\n    bidirectional = (typeof bidirectional === 'undefined') ? true : bidirectional;\n    addonTerminal.__socket = socket;\n    addonTerminal.__flushBuffer = function () {\n        addonTerminal.write(addonTerminal.__attachSocketBuffer);\n        addonTerminal.__attachSocketBuffer = null;\n    };\n    addonTerminal.__pushToBuffer = function (data) {\n        if (addonTerminal.__attachSocketBuffer) {\n            addonTerminal.__attachSocketBuffer += data;\n        }\n        else {\n            addonTerminal.__attachSocketBuffer = data;\n            setTimeout(addonTerminal.__flushBuffer, 10);\n        }\n    };\n    var myTextDecoder;\n    addonTerminal.__getMessage = function (ev) {\n        var str;\n        if (typeof ev.data === 'object') {\n            if (!myTextDecoder) {\n                myTextDecoder = new TextDecoder();\n            }\n            if (ev.data instanceof ArrayBuffer) {\n                str = myTextDecoder.decode(ev.data);\n                displayData(str);\n            }\n            else {\n                var fileReader_1 = new FileReader();\n                fileReader_1.addEventListener('load', function () {\n                    str = myTextDecoder.decode(fileReader_1.result);\n                    displayData(str);\n                });\n                fileReader_1.readAsArrayBuffer(ev.data);\n            }\n        }\n        else if (typeof ev.data === 'string') {\n            displayData(ev.data);\n        }\n        else {\n            throw Error(\"Cannot handle \\\"\" + typeof ev.data + \"\\\" websocket message.\");\n        }\n    };\n    function displayData(str, data) {\n        if (buffered) {\n            addonTerminal.__pushToBuffer(str || data);\n        }\n        else {\n            addonTerminal.write(str || data);\n        }\n    }\n    addonTerminal.__sendData = function (data) {\n        if (socket.readyState !== 1) {\n            return;\n        }\n        socket.send(data);\n    };\n    addonTerminal._core.register(addSocketListener(socket, 'message', addonTerminal.__getMessage));\n    if (bidirectional) {\n        addonTerminal._core.register(addonTerminal.addDisposableListener('data', addonTerminal.__sendData));\n    }\n    addonTerminal._core.register(addSocketListener(socket, 'close', function () { return detach(addonTerminal, socket); }));\n    addonTerminal._core.register(addSocketListener(socket, 'error', function () { return detach(addonTerminal, socket); }));\n}\nexports.attach = attach;\nfunction addSocketListener(socket, type, handler) {\n    socket.addEventListener(type, handler);\n    return {\n        dispose: function () {\n            if (!handler) {\n                return;\n            }\n            socket.removeEventListener(type, handler);\n            handler = null;\n        }\n    };\n}\nfunction detach(term, socket) {\n    var addonTerminal = term;\n    addonTerminal.off('data', addonTerminal.__sendData);\n    socket = (typeof socket === 'undefined') ? addonTerminal.__socket : socket;\n    if (socket) {\n        socket.removeEventListener('message', addonTerminal.__getMessage);\n    }\n    delete addonTerminal.__socket;\n}\nexports.detach = detach;\nfunction apply(terminalConstructor) {\n    terminalConstructor.prototype.attach = function (socket, bidirectional, buffered) {\n        attach(this, socket, bidirectional, buffered);\n    };\n    terminalConstructor.prototype.detach = function (socket) {\n        detach(this, socket);\n    };\n}\nexports.apply = apply;\n//# sourceMappingURL=attach.js.map","import {get} from '@/lib/fetch.js'\r\n\r\nexport function GetPods(params) {\r\n    return get('/k8s/pods', params)\r\n}","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Buffer_1 = require(\"./Buffer\");\nvar EventEmitter_1 = require(\"./common/EventEmitter\");\nvar BufferSet = (function (_super) {\n    __extends(BufferSet, _super);\n    function BufferSet(_terminal) {\n        var _this = _super.call(this) || this;\n        _this._terminal = _terminal;\n        _this._normal = new Buffer_1.Buffer(_this._terminal, true);\n        _this._normal.fillViewportRows();\n        _this._alt = new Buffer_1.Buffer(_this._terminal, false);\n        _this._activeBuffer = _this._normal;\n        _this.setupTabStops();\n        return _this;\n    }\n    Object.defineProperty(BufferSet.prototype, \"alt\", {\n        get: function () {\n            return this._alt;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(BufferSet.prototype, \"active\", {\n        get: function () {\n            return this._activeBuffer;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(BufferSet.prototype, \"normal\", {\n        get: function () {\n            return this._normal;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    BufferSet.prototype.activateNormalBuffer = function () {\n        if (this._activeBuffer === this._normal) {\n            return;\n        }\n        this._normal.x = this._alt.x;\n        this._normal.y = this._alt.y;\n        this._alt.clear();\n        this._activeBuffer = this._normal;\n        this.emit('activate', {\n            activeBuffer: this._normal,\n            inactiveBuffer: this._alt\n        });\n    };\n    BufferSet.prototype.activateAltBuffer = function (fillAttr) {\n        if (this._activeBuffer === this._alt) {\n            return;\n        }\n        this._alt.fillViewportRows(fillAttr);\n        this._alt.x = this._normal.x;\n        this._alt.y = this._normal.y;\n        this._activeBuffer = this._alt;\n        this.emit('activate', {\n            activeBuffer: this._alt,\n            inactiveBuffer: this._normal\n        });\n    };\n    BufferSet.prototype.resize = function (newCols, newRows) {\n        this._normal.resize(newCols, newRows);\n        this._alt.resize(newCols, newRows);\n    };\n    BufferSet.prototype.setupTabStops = function (i) {\n        this._normal.setupTabStops(i);\n        this._alt.setupTabStops(i);\n    };\n    return BufferSet;\n}(EventEmitter_1.EventEmitter));\nexports.BufferSet = BufferSet;\n//# sourceMappingURL=BufferSet.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Lifecycle_1 = require(\"../common/Lifecycle\");\nvar ScreenDprMonitor = (function (_super) {\n    __extends(ScreenDprMonitor, _super);\n    function ScreenDprMonitor() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ScreenDprMonitor.prototype.setListener = function (listener) {\n        var _this = this;\n        if (this._listener) {\n            this.clearListener();\n        }\n        this._listener = listener;\n        this._outerListener = function () {\n            _this._listener(window.devicePixelRatio, _this._currentDevicePixelRatio);\n            _this._updateDpr();\n        };\n        this._updateDpr();\n    };\n    ScreenDprMonitor.prototype.dispose = function () {\n        _super.prototype.dispose.call(this);\n        this.clearListener();\n    };\n    ScreenDprMonitor.prototype._updateDpr = function () {\n        if (this._resolutionMediaMatchList) {\n            this._resolutionMediaMatchList.removeListener(this._outerListener);\n        }\n        this._currentDevicePixelRatio = window.devicePixelRatio;\n        this._resolutionMediaMatchList = window.matchMedia(\"screen and (resolution: \" + window.devicePixelRatio + \"dppx)\");\n        this._resolutionMediaMatchList.addListener(this._outerListener);\n    };\n    ScreenDprMonitor.prototype.clearListener = function () {\n        if (!this._listener) {\n            return;\n        }\n        this._resolutionMediaMatchList.removeListener(this._outerListener);\n        this._listener = null;\n        this._outerListener = null;\n    };\n    return ScreenDprMonitor;\n}(Lifecycle_1.Disposable));\nexports.ScreenDprMonitor = ScreenDprMonitor;\n//# sourceMappingURL=ScreenDprMonitor.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Lifecycle_1 = require(\"./common/Lifecycle\");\nvar Lifecycle_2 = require(\"./ui/Lifecycle\");\nvar FALLBACK_SCROLL_BAR_WIDTH = 15;\nvar Viewport = (function (_super) {\n    __extends(Viewport, _super);\n    function Viewport(_terminal, _viewportElement, _scrollArea, _charMeasure) {\n        var _this = _super.call(this) || this;\n        _this._terminal = _terminal;\n        _this._viewportElement = _viewportElement;\n        _this._scrollArea = _scrollArea;\n        _this._charMeasure = _charMeasure;\n        _this.scrollBarWidth = 0;\n        _this._currentRowHeight = 0;\n        _this._lastRecordedBufferLength = 0;\n        _this._lastRecordedViewportHeight = 0;\n        _this._lastRecordedBufferHeight = 0;\n        _this._lastScrollTop = 0;\n        _this._wheelPartialScroll = 0;\n        _this._refreshAnimationFrame = null;\n        _this._ignoreNextScrollEvent = false;\n        _this.scrollBarWidth = (_this._viewportElement.offsetWidth - _this._scrollArea.offsetWidth) || FALLBACK_SCROLL_BAR_WIDTH;\n        _this.register(Lifecycle_2.addDisposableDomListener(_this._viewportElement, 'scroll', _this._onScroll.bind(_this)));\n        setTimeout(function () { return _this.syncScrollArea(); }, 0);\n        return _this;\n    }\n    Viewport.prototype.onThemeChanged = function (colors) {\n        this._viewportElement.style.backgroundColor = colors.background.css;\n    };\n    Viewport.prototype._refresh = function () {\n        var _this = this;\n        if (this._refreshAnimationFrame === null) {\n            this._refreshAnimationFrame = requestAnimationFrame(function () { return _this._innerRefresh(); });\n        }\n    };\n    Viewport.prototype._innerRefresh = function () {\n        if (this._charMeasure.height > 0) {\n            this._currentRowHeight = this._terminal.renderer.dimensions.scaledCellHeight / window.devicePixelRatio;\n            this._lastRecordedViewportHeight = this._viewportElement.offsetHeight;\n            var newBufferHeight = Math.round(this._currentRowHeight * this._lastRecordedBufferLength) + (this._lastRecordedViewportHeight - this._terminal.renderer.dimensions.canvasHeight);\n            if (this._lastRecordedBufferHeight !== newBufferHeight) {\n                this._lastRecordedBufferHeight = newBufferHeight;\n                this._scrollArea.style.height = this._lastRecordedBufferHeight + 'px';\n            }\n        }\n        var scrollTop = this._terminal.buffer.ydisp * this._currentRowHeight;\n        if (this._viewportElement.scrollTop !== scrollTop) {\n            this._ignoreNextScrollEvent = true;\n            this._viewportElement.scrollTop = scrollTop;\n        }\n        this._refreshAnimationFrame = null;\n    };\n    Viewport.prototype.syncScrollArea = function () {\n        if (this._lastRecordedBufferLength !== this._terminal.buffer.lines.length) {\n            this._lastRecordedBufferLength = this._terminal.buffer.lines.length;\n            this._refresh();\n            return;\n        }\n        if (this._lastRecordedViewportHeight !== this._terminal.renderer.dimensions.canvasHeight) {\n            this._refresh();\n            return;\n        }\n        var newScrollTop = this._terminal.buffer.ydisp * this._currentRowHeight;\n        if (this._lastScrollTop !== newScrollTop) {\n            this._refresh();\n            return;\n        }\n        if (this._lastScrollTop !== this._viewportElement.scrollTop) {\n            this._refresh();\n            return;\n        }\n        if (this._terminal.renderer.dimensions.scaledCellHeight / window.devicePixelRatio !== this._currentRowHeight) {\n            this._refresh();\n            return;\n        }\n    };\n    Viewport.prototype._onScroll = function (ev) {\n        this._lastScrollTop = this._viewportElement.scrollTop;\n        if (!this._viewportElement.offsetParent) {\n            return;\n        }\n        if (this._ignoreNextScrollEvent) {\n            this._ignoreNextScrollEvent = false;\n            return;\n        }\n        var newRow = Math.round(this._lastScrollTop / this._currentRowHeight);\n        var diff = newRow - this._terminal.buffer.ydisp;\n        this._terminal.scrollLines(diff, true);\n    };\n    Viewport.prototype.onWheel = function (ev) {\n        var amount = this._getPixelsScrolled(ev);\n        if (amount === 0) {\n            return;\n        }\n        this._viewportElement.scrollTop += amount;\n        ev.preventDefault();\n    };\n    Viewport.prototype._getPixelsScrolled = function (ev) {\n        if (ev.deltaY === 0) {\n            return 0;\n        }\n        var amount = ev.deltaY;\n        if (ev.deltaMode === WheelEvent.DOM_DELTA_LINE) {\n            amount *= this._currentRowHeight;\n        }\n        else if (ev.deltaMode === WheelEvent.DOM_DELTA_PAGE) {\n            amount *= this._currentRowHeight * this._terminal.rows;\n        }\n        return amount;\n    };\n    Viewport.prototype.getLinesScrolled = function (ev) {\n        if (ev.deltaY === 0) {\n            return 0;\n        }\n        var amount = ev.deltaY;\n        if (ev.deltaMode === WheelEvent.DOM_DELTA_PIXEL) {\n            amount /= this._currentRowHeight + 0.0;\n            this._wheelPartialScroll += amount;\n            amount = Math.floor(Math.abs(this._wheelPartialScroll)) * (this._wheelPartialScroll > 0 ? 1 : -1);\n            this._wheelPartialScroll %= 1;\n        }\n        else if (ev.deltaMode === WheelEvent.DOM_DELTA_PAGE) {\n            amount *= this._terminal.rows;\n        }\n        return amount;\n    };\n    Viewport.prototype.onTouchStart = function (ev) {\n        this._lastTouchY = ev.touches[0].pageY;\n    };\n    Viewport.prototype.onTouchMove = function (ev) {\n        var deltaY = this._lastTouchY - ev.touches[0].pageY;\n        this._lastTouchY = ev.touches[0].pageY;\n        if (deltaY === 0) {\n            return;\n        }\n        this._viewportElement.scrollTop += deltaY;\n        ev.preventDefault();\n    };\n    return Viewport;\n}(Lifecycle_1.Disposable));\nexports.Viewport = Viewport;\n//# sourceMappingURL=Viewport.js.map","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-card',{attrs:{\"shadow\":\"never\"}},[_c('el-select',{attrs:{\"filterable\":\"\",\"placeholder\":_vm.$t('please_select_namespace')},on:{\"change\":_vm.selectedNamespace},nativeOn:{\"click\":function($event){return _vm.getNamespace($event)}},model:{value:(_vm.namespace),callback:function ($$v) {_vm.namespace=$$v},expression:\"namespace\"}},_vm._l((_vm.namespaces),function(item){return _c('el-option',{key:item,attrs:{\"label\":item,\"value\":item}})}),1),_vm._v(\" \"),_c('el-select',{attrs:{\"placeholder\":_vm.$t('please_select_pod')},on:{\"change\":_vm.selectedPod},model:{value:(_vm.pod),callback:function ($$v) {_vm.pod=$$v},expression:\"pod\"}},_vm._l((_vm.pods),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.value}})}),1),_vm._v(\" \"),_c('el-select',{attrs:{\"placeholder\":_vm.$t('please_select_container')},model:{value:(_vm.container),callback:function ($$v) {_vm.container=$$v},expression:\"container\"}},_vm._l((_vm.containers),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.value}})}),1),_vm._v(\" \"),_c('el-select',{attrs:{\"placeholder\":_vm.$t('please_select_shell')},model:{value:(_vm.shell),callback:function ($$v) {_vm.shell=$$v},expression:\"shell\"}},_vm._l((_vm.shells),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.value}})}),1),_vm._v(\" \"),_c('el-button',{nativeOn:{\"click\":function($event){return _vm.openTerminal($event)}}},[_vm._v(_vm._s(_vm.$t('enter')))])],1),_c('div',{staticStyle:{\"width\":\"100%\",\"height\":\"100%\"},attrs:{\"id\":\"terminal-container\"}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <el-card shadow=\"never\">\n      <el-select v-model=\"namespace\" @click.native=\"getNamespace\" @change=\"selectedNamespace\" filterable :placeholder=\"$t('please_select_namespace')\">\n        <el-option\n            v-for=\"item in namespaces\"\n            :label=\"item\"\n            :value=\"item\"\n            :key=\"item\"\n        ></el-option>\n      </el-select>\n      &nbsp;&nbsp;\n      <el-select :placeholder=\"$t('please_select_pod')\" v-model=\"pod\" @change=\"selectedPod\">\n        <el-option v-for=\"item in pods\" :label=\"item.label\" :value=\"item.value\" :key=\"item.value\"></el-option>\n      </el-select>\n      &nbsp;&nbsp;\n      <el-select :placeholder=\"$t('please_select_container')\" v-model=\"container\">\n        <el-option v-for=\"item in containers\" :label=\"item.label\" :value=\"item.value\" :key=\"item.value\"></el-option>\n      </el-select>\n      &nbsp;&nbsp;\n      <el-select :placeholder=\"$t('please_select_shell')\" v-model=\"shell\">\n        <el-option v-for=\"item in shells\" :label=\"item.label\" :value=\"item.value\" :key=\"item.value\"></el-option>\n      </el-select>\n      &nbsp;&nbsp;\n      <el-button @click.native=\"openTerminal\">{{ $t('enter') }}</el-button>\n    </el-card>\n    <div id=\"terminal-container\" style=\"width: 100%;height: 100%\"></div>\n  </div>\n</template>\n\n\n<script>\nimport { GetNamespace } from '@/api/namespaces'\nimport {GetPods} from \"@/api/pods\";\nimport { Terminal } from 'xterm';\nimport * as fit from 'xterm/lib/addons/fit/fit'\nimport * as attach from 'xterm/lib/addons/attach/attach'\nimport * as winptyCompat from 'xterm/lib/addons/winptyCompat/winptyCompat'\nimport * as webLinks from 'xterm/lib/addons/webLinks/webLinks'\n\nexport default {\n  data() {\n    return {\n      namespace: \"\",\n      pod: \"\",\n      container: \"\",\n      shell: \"\",\n      namespaces:[],\n      pods: [],\n      containers:[],\n      order:\"\",\n      shells : [\n        {\n          label: \"sh\",\n          value: \"sh\"\n        },\n        {\n          label: \"bash\",\n          value: \"bash\"\n        },\n        {\n          label: \"cmd\",\n          value: \"cmd\"\n        }\n      ]\n    }\n  },\n  methods: {\n    getNamespace() {\n      GetNamespace().then(res =>{\n        if (res) {\n          this.namespaces=[]\n          this.pod = \"\"\n          this.pods = []\n          this.container = \"\"\n          this.containers = []\n          this.shell = \"\"\n          const data = res.items\n          for(const key in data){\n            this.namespaces.push(data[key].metadata.name)\n          };\n          console.log(this.namespaces)\n        }\n      })\n    },\n    selectedNamespace() {\n      GetPods({namespace: this.namespace}).then(res => {\n        if (res) {\n          const pods=[]\n          this.pod = \"\"\n          this.pods = []\n          this.container = \"\"\n          this.containers = []\n          const data = res.items\n          for(const key in data){\n            const _d = {label:data[key].metadata.name, value:data[key].metadata.name}\n            pods.push(_d)\n          };\n          this.pods = pods\n          console.log(this.pods)\n        }\n      })\n    },\n    selectedPod() {\n      GetPods({namespace: this.namespace, pod: this.pod}).then(res => {\n        if (res) {\n          console.log(res)\n          const containers=[]\n          this.container = \"\"\n          this.containers = []\n          const data = res.spec.containers\n          for(const key in data){\n            const _d = {label:data[key].name, value:data[key].name}\n            containers.push(_d)\n          };\n          this.containers = containers\n          console.log(this.containers)\n        }\n      })\n    },\n    openTerminal() {\n      console.log(this.ws)\n      document.getElementById(\"terminal-container\").innerHTML=\"\";\n      document.getElementById('terminal-container').style.height = window.innerHeight + 'px';\n      document.getElementById('terminal-container').style.width = window.innerWidth + 'px';\n      const url = \"ws://\"+window.location.host+\"/api/k8s/terminal?namespace=\"+this.namespace+\"&pods=\"+this.pod+\"&container=\"+this.container+\"&shell=\"+this.shell;\n\n      // xterm配置自适应大小插件\n      Terminal.applyAddon(fit);\n      Terminal.applyAddon(attach)\n\n      // 这俩插件不知道干嘛的, 用总比不用好\n      Terminal.applyAddon(winptyCompat)\n      Terminal.applyAddon(webLinks)\n\n      // 创建终端\n      const term = new Terminal({\n        cursorBlink: true\n      });\n      term.open(document.getElementById(\"terminal-container\"));\n      // 使用fit插件自适应terminal size\n      term.fit();\n      term.winptyCompatInit()\n      term.webLinksInit()\n\n      // 取得输入焦点\n      term.focus();\n\n      // 连接websocket\n      const ws = new WebSocket(url);\n\n      ws.onopen = function(event) {\n        console.log(event)\n        console.log(\"onopen\")\n      }\n      ws.onclose = function(event) {\n        console.log(event)\n        console.log(\"onclose\")\n      }\n      ws.onmessage = function(event) {\n        console.log(event)\n        // 服务端ssh输出, 写到web shell展示\n        term.write(event.data)\n      }\n      ws.onerror = function(event) {\n        console.log(event)\n        console.log(\"onerror\")\n      }\n\n      // 当浏览器窗口变化时, 重新适配终端\n      window.addEventListener(\"resize\", function () {\n        term.fit()\n        // 把web终端的尺寸term.rows和term.cols发给服务端, 通知sshd调整输出宽度\n        const msg = {type: \"resize\", rows: term.rows, cols: term.cols}\n        ws.send(JSON.stringify(msg))\n\n        // console.log(term.rows + \",\" + term.cols)\n      })\n\n      // 当向web终端敲入字符时候的回调\n      term.on('data', function(input) {\n        // 写给服务端, 由服务端发给container\n        const msg = {type: \"input\", input: input}\n        ws.send(JSON.stringify(msg))\n      })\n      // 向web终端敲入回车时候的回调\n\n    }\n  }\n}\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./terminal.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./terminal.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./terminal.vue?vue&type=template&id=c157671c&\"\nimport script from \"./terminal.vue?vue&type=script&lang=js&\"\nexport * from \"./terminal.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}