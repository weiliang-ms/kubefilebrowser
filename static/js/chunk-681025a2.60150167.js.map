{"version":3,"sources":["webpack:///./node_modules/xterm/lib/addons/winptyCompat/winptyCompat.js","webpack:///./node_modules/xterm/lib/addons/webLinks/webLinks.js","webpack:///./node_modules/xterm/lib/addons/fit/fit.js","webpack:///./node_modules/xterm/lib/addons/attach/attach.js","webpack:///./src/api/pods.js","webpack:///./src/view/terminal.vue?31d6","webpack:///src/view/terminal.vue","webpack:///./src/view/terminal.vue?928b","webpack:///./src/view/terminal.vue"],"names":["Object","defineProperty","exports","value","CHAR_DATA_CODE_INDEX","NULL_CELL_CODE","winptyCompatInit","terminal","addonTerminal","isWindows","indexOf","navigator","platform","on","line","_core","buffer","lines","get","ybase","y","lastChar","cols","nextLine","isWrapped","apply","terminalConstructor","prototype","this","protocolClause","domainCharacterSet","negatedDomainCharacterSet","domainBodyClause","tldClause","ipClause","localHostClause","portClause","hostClause","pathClause","queryStringHashFragmentCharacterSet","queryStringClause","hashFragmentClause","negatedPathCharacterSet","bodyClause","start","end","strictUrlRegex","RegExp","handleLink","event","uri","window","open","webLinksInit","term","handler","options","matchIndex","registerLinkMatcher","proposeGeometry","element","parentElement","parentElementStyle","getComputedStyle","parentElementHeight","parseInt","getPropertyValue","parentElementWidth","Math","max","elementStyle","elementPadding","top","bottom","right","left","elementPaddingVer","elementPaddingHor","availableHeight","availableWidth","viewport","scrollBarWidth","geometry","floor","renderer","dimensions","actualCellWidth","rows","actualCellHeight","fit","clear","resize","attach","socket","bidirectional","buffered","myTextDecoder","displayData","str","data","__pushToBuffer","write","__socket","__flushBuffer","__attachSocketBuffer","setTimeout","__getMessage","ev","TextDecoder","ArrayBuffer","decode","fileReader_1","FileReader","addEventListener","result","readAsArrayBuffer","Error","__sendData","readyState","send","register","addSocketListener","addDisposableListener","detach","type","dispose","removeEventListener","off","GetPods","params","render","_vm","_h","$createElement","_c","_self","attrs","$t","selectedNamespace","nativeOn","$event","getNamespace","model","callback","$$v","namespace","expression","_l","item","key","_v","selectedPod","pod","label","container","shell","openTerminal","_s","staticStyle","staticRenderFns","namespaces","pods","containers","shells","methods","res","items","push","metadata","name","console","log","_d","spec","ws","document","getElementById","innerHTML","style","height","innerHeight","width","innerWidth","url","Terminal","cursorBlink","focus","WebSocket","onopen","onclose","onmessage","onerror","msg","JSON","stringify","component"],"mappings":"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","file":"js/chunk-681025a2.60150167.js","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar CHAR_DATA_CODE_INDEX = 3;\nvar NULL_CELL_CODE = 32;\nfunction winptyCompatInit(terminal) {\n    var addonTerminal = terminal;\n    var isWindows = ['Windows', 'Win16', 'Win32', 'WinCE'].indexOf(navigator.platform) >= 0;\n    if (!isWindows) {\n        return;\n    }\n    addonTerminal.on('linefeed', function () {\n        var line = addonTerminal._core.buffer.lines.get(addonTerminal._core.buffer.ybase + addonTerminal._core.buffer.y - 1);\n        var lastChar = line.get(addonTerminal.cols - 1);\n        if (lastChar[CHAR_DATA_CODE_INDEX] !== NULL_CELL_CODE) {\n            var nextLine = addonTerminal._core.buffer.lines.get(addonTerminal._core.buffer.ybase + addonTerminal._core.buffer.y);\n            nextLine.isWrapped = true;\n        }\n    });\n}\nexports.winptyCompatInit = winptyCompatInit;\nfunction apply(terminalConstructor) {\n    terminalConstructor.prototype.winptyCompatInit = function () {\n        winptyCompatInit(this);\n    };\n}\nexports.apply = apply;\n//# sourceMappingURL=winptyCompat.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar protocolClause = '(https?:\\\\/\\\\/)';\nvar domainCharacterSet = '[\\\\da-z\\\\.-]+';\nvar negatedDomainCharacterSet = '[^\\\\da-z\\\\.-]+';\nvar domainBodyClause = '(' + domainCharacterSet + ')';\nvar tldClause = '([a-z\\\\.]{2,6})';\nvar ipClause = '((\\\\d{1,3}\\\\.){3}\\\\d{1,3})';\nvar localHostClause = '(localhost)';\nvar portClause = '(:\\\\d{1,5})';\nvar hostClause = '((' + domainBodyClause + '\\\\.' + tldClause + ')|' + ipClause + '|' + localHostClause + ')' + portClause + '?';\nvar pathClause = '(\\\\/[\\\\/\\\\w\\\\.\\\\-%~:]*)*([^:\\\\s])';\nvar queryStringHashFragmentCharacterSet = '[0-9\\\\w\\\\[\\\\]\\\\(\\\\)\\\\/\\\\?\\\\!#@$%&\\'*+,:;~\\\\=\\\\.\\\\-]*';\nvar queryStringClause = '(\\\\?' + queryStringHashFragmentCharacterSet + ')?';\nvar hashFragmentClause = '(#' + queryStringHashFragmentCharacterSet + ')?';\nvar negatedPathCharacterSet = '[^\\\\/\\\\w\\\\.\\\\-%]+';\nvar bodyClause = hostClause + pathClause + queryStringClause + hashFragmentClause;\nvar start = '(?:^|' + negatedDomainCharacterSet + ')(';\nvar end = ')($|' + negatedPathCharacterSet + ')';\nvar strictUrlRegex = new RegExp(start + protocolClause + bodyClause + end);\nfunction handleLink(event, uri) {\n    window.open(uri, '_blank');\n}\nfunction webLinksInit(term, handler, options) {\n    if (handler === void 0) { handler = handleLink; }\n    if (options === void 0) { options = {}; }\n    options.matchIndex = 1;\n    term.registerLinkMatcher(strictUrlRegex, handler, options);\n}\nexports.webLinksInit = webLinksInit;\nfunction apply(terminalConstructor) {\n    terminalConstructor.prototype.webLinksInit = function (handler, options) {\n        webLinksInit(this, handler, options);\n    };\n}\nexports.apply = apply;\n//# sourceMappingURL=webLinks.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction proposeGeometry(term) {\n    if (!term.element.parentElement) {\n        return null;\n    }\n    var parentElementStyle = window.getComputedStyle(term.element.parentElement);\n    var parentElementHeight = parseInt(parentElementStyle.getPropertyValue('height'));\n    var parentElementWidth = Math.max(0, parseInt(parentElementStyle.getPropertyValue('width')));\n    var elementStyle = window.getComputedStyle(term.element);\n    var elementPadding = {\n        top: parseInt(elementStyle.getPropertyValue('padding-top')),\n        bottom: parseInt(elementStyle.getPropertyValue('padding-bottom')),\n        right: parseInt(elementStyle.getPropertyValue('padding-right')),\n        left: parseInt(elementStyle.getPropertyValue('padding-left'))\n    };\n    var elementPaddingVer = elementPadding.top + elementPadding.bottom;\n    var elementPaddingHor = elementPadding.right + elementPadding.left;\n    var availableHeight = parentElementHeight - elementPaddingVer;\n    var availableWidth = parentElementWidth - elementPaddingHor - term._core.viewport.scrollBarWidth;\n    var geometry = {\n        cols: Math.floor(availableWidth / term._core.renderer.dimensions.actualCellWidth),\n        rows: Math.floor(availableHeight / term._core.renderer.dimensions.actualCellHeight)\n    };\n    return geometry;\n}\nexports.proposeGeometry = proposeGeometry;\nfunction fit(term) {\n    var geometry = proposeGeometry(term);\n    if (geometry) {\n        if (term.rows !== geometry.rows || term.cols !== geometry.cols) {\n            term._core.renderer.clear();\n            term.resize(geometry.cols, geometry.rows);\n        }\n    }\n}\nexports.fit = fit;\nfunction apply(terminalConstructor) {\n    terminalConstructor.prototype.proposeGeometry = function () {\n        return proposeGeometry(this);\n    };\n    terminalConstructor.prototype.fit = function () {\n        fit(this);\n    };\n}\nexports.apply = apply;\n//# sourceMappingURL=fit.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction attach(term, socket, bidirectional, buffered) {\n    var addonTerminal = term;\n    bidirectional = (typeof bidirectional === 'undefined') ? true : bidirectional;\n    addonTerminal.__socket = socket;\n    addonTerminal.__flushBuffer = function () {\n        addonTerminal.write(addonTerminal.__attachSocketBuffer);\n        addonTerminal.__attachSocketBuffer = null;\n    };\n    addonTerminal.__pushToBuffer = function (data) {\n        if (addonTerminal.__attachSocketBuffer) {\n            addonTerminal.__attachSocketBuffer += data;\n        }\n        else {\n            addonTerminal.__attachSocketBuffer = data;\n            setTimeout(addonTerminal.__flushBuffer, 10);\n        }\n    };\n    var myTextDecoder;\n    addonTerminal.__getMessage = function (ev) {\n        var str;\n        if (typeof ev.data === 'object') {\n            if (!myTextDecoder) {\n                myTextDecoder = new TextDecoder();\n            }\n            if (ev.data instanceof ArrayBuffer) {\n                str = myTextDecoder.decode(ev.data);\n                displayData(str);\n            }\n            else {\n                var fileReader_1 = new FileReader();\n                fileReader_1.addEventListener('load', function () {\n                    str = myTextDecoder.decode(fileReader_1.result);\n                    displayData(str);\n                });\n                fileReader_1.readAsArrayBuffer(ev.data);\n            }\n        }\n        else if (typeof ev.data === 'string') {\n            displayData(ev.data);\n        }\n        else {\n            throw Error(\"Cannot handle \\\"\" + typeof ev.data + \"\\\" websocket message.\");\n        }\n    };\n    function displayData(str, data) {\n        if (buffered) {\n            addonTerminal.__pushToBuffer(str || data);\n        }\n        else {\n            addonTerminal.write(str || data);\n        }\n    }\n    addonTerminal.__sendData = function (data) {\n        if (socket.readyState !== 1) {\n            return;\n        }\n        socket.send(data);\n    };\n    addonTerminal._core.register(addSocketListener(socket, 'message', addonTerminal.__getMessage));\n    if (bidirectional) {\n        addonTerminal._core.register(addonTerminal.addDisposableListener('data', addonTerminal.__sendData));\n    }\n    addonTerminal._core.register(addSocketListener(socket, 'close', function () { return detach(addonTerminal, socket); }));\n    addonTerminal._core.register(addSocketListener(socket, 'error', function () { return detach(addonTerminal, socket); }));\n}\nexports.attach = attach;\nfunction addSocketListener(socket, type, handler) {\n    socket.addEventListener(type, handler);\n    return {\n        dispose: function () {\n            if (!handler) {\n                return;\n            }\n            socket.removeEventListener(type, handler);\n            handler = null;\n        }\n    };\n}\nfunction detach(term, socket) {\n    var addonTerminal = term;\n    addonTerminal.off('data', addonTerminal.__sendData);\n    socket = (typeof socket === 'undefined') ? addonTerminal.__socket : socket;\n    if (socket) {\n        socket.removeEventListener('message', addonTerminal.__getMessage);\n    }\n    delete addonTerminal.__socket;\n}\nexports.detach = detach;\nfunction apply(terminalConstructor) {\n    terminalConstructor.prototype.attach = function (socket, bidirectional, buffered) {\n        attach(this, socket, bidirectional, buffered);\n    };\n    terminalConstructor.prototype.detach = function (socket) {\n        detach(this, socket);\n    };\n}\nexports.apply = apply;\n//# sourceMappingURL=attach.js.map","import {get} from '@/lib/fetch.js'\r\n\r\nexport function GetPods(params) {\r\n    return get('/k8s/pods', params)\r\n}","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-card',{attrs:{\"shadow\":\"never\"}},[_c('el-select',{attrs:{\"filterable\":\"\",\"placeholder\":_vm.$t('please_select_namespace')},on:{\"change\":_vm.selectedNamespace},nativeOn:{\"click\":function($event){return _vm.getNamespace($event)}},model:{value:(_vm.namespace),callback:function ($$v) {_vm.namespace=$$v},expression:\"namespace\"}},_vm._l((_vm.namespaces),function(item){return _c('el-option',{key:item,attrs:{\"label\":item,\"value\":item}})}),1),_vm._v(\" \"),_c('el-select',{attrs:{\"placeholder\":_vm.$t('please_select_pod')},on:{\"change\":_vm.selectedPod},model:{value:(_vm.pod),callback:function ($$v) {_vm.pod=$$v},expression:\"pod\"}},_vm._l((_vm.pods),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.value}})}),1),_vm._v(\" \"),_c('el-select',{attrs:{\"placeholder\":_vm.$t('please_select_container')},model:{value:(_vm.container),callback:function ($$v) {_vm.container=$$v},expression:\"container\"}},_vm._l((_vm.containers),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.value}})}),1),_vm._v(\" \"),_c('el-select',{attrs:{\"placeholder\":_vm.$t('please_select_shell')},model:{value:(_vm.shell),callback:function ($$v) {_vm.shell=$$v},expression:\"shell\"}},_vm._l((_vm.shells),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.value}})}),1),_vm._v(\" \"),_c('el-button',{nativeOn:{\"click\":function($event){return _vm.openTerminal($event)}}},[_vm._v(_vm._s(_vm.$t('enter')))])],1),_c('div',{staticStyle:{\"width\":\"100%\",\"height\":\"100%\"},attrs:{\"id\":\"terminal-container\"}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <el-card shadow=\"never\">\n      <el-select v-model=\"namespace\" @click.native=\"getNamespace\" @change=\"selectedNamespace\" filterable :placeholder=\"$t('please_select_namespace')\">\n        <el-option\n            v-for=\"item in namespaces\"\n            :label=\"item\"\n            :value=\"item\"\n            :key=\"item\"\n        ></el-option>\n      </el-select>\n      &nbsp;&nbsp;\n      <el-select :placeholder=\"$t('please_select_pod')\" v-model=\"pod\" @change=\"selectedPod\">\n        <el-option v-for=\"item in pods\" :label=\"item.label\" :value=\"item.value\" :key=\"item.value\"></el-option>\n      </el-select>\n      &nbsp;&nbsp;\n      <el-select :placeholder=\"$t('please_select_container')\" v-model=\"container\">\n        <el-option v-for=\"item in containers\" :label=\"item.label\" :value=\"item.value\" :key=\"item.value\"></el-option>\n      </el-select>\n      &nbsp;&nbsp;\n      <el-select :placeholder=\"$t('please_select_shell')\" v-model=\"shell\">\n        <el-option v-for=\"item in shells\" :label=\"item.label\" :value=\"item.value\" :key=\"item.value\"></el-option>\n      </el-select>\n      &nbsp;&nbsp;\n      <el-button @click.native=\"openTerminal\">{{ $t('enter') }}</el-button>\n    </el-card>\n    <div id=\"terminal-container\" style=\"width: 100%;height: 100%\"></div>\n  </div>\n</template>\n\n\n<script>\nimport { GetNamespace } from '@/api/namespaces'\nimport {GetPods} from \"@/api/pods\";\nimport { Terminal } from 'xterm';\nimport * as fit from 'xterm/lib/addons/fit/fit'\nimport * as attach from 'xterm/lib/addons/attach/attach'\nimport * as winptyCompat from 'xterm/lib/addons/winptyCompat/winptyCompat'\nimport * as webLinks from 'xterm/lib/addons/webLinks/webLinks'\n\nexport default {\n  data() {\n    return {\n      namespace: \"\",\n      pod: \"\",\n      container: \"\",\n      shell: \"\",\n      namespaces:[],\n      pods: [],\n      containers:[],\n      shells : [\n        {\n          label: \"sh\",\n          value: \"sh\"\n        },\n        {\n          label: \"bash\",\n          value: \"bash\"\n        },\n        {\n          label: \"cmd\",\n          value: \"cmd\"\n        }\n      ]\n    }\n  },\n  methods: {\n    getNamespace() {\n      GetNamespace().then(res =>{\n        if (res) {\n          this.namespaces=[]\n          this.pod = \"\"\n          this.pods = []\n          this.container = \"\"\n          this.containers = []\n          this.shell = \"\"\n          var data = res.items\n          for(var key in data){\n            this.namespaces.push(data[key].metadata.name)\n          };\n          console.log(this.namespaces)\n        }\n      })\n    },\n    selectedNamespace() {\n      GetPods({namespace: this.namespace}).then(res => {\n        if (res) {\n          var pods=[]\n          this.pod = \"\"\n          this.pods = []\n          this.container = \"\"\n          this.containers = []\n          var data = res.items\n          for(var key in data){\n            var _d = {label:data[key].metadata.name, value:data[key].metadata.name}\n            pods.push(_d)\n          };\n          this.pods = pods\n          console.log(this.pods)\n        }\n      })\n    },\n    selectedPod() {\n      GetPods({namespace: this.namespace, pod: this.pod}).then(res => {\n        if (res) {\n          console.log(res)\n          var containers=[]\n          this.container = \"\"\n          this.containers = []\n          var data = res.spec.containers\n          for(var key in data){\n            var _d = {label:data[key].name, value:data[key].name}\n            containers.push(_d)\n          };\n          this.containers = containers\n          console.log(this.containers)\n        }\n      })\n    },\n    openTerminal() {\n      console.log(this.ws)\n      document.getElementById(\"terminal-container\").innerHTML=\"\";\n      document.getElementById('terminal-container').style.height = window.innerHeight + 'px';\n      document.getElementById('terminal-container').style.width = window.innerWidth + 'px';\n      var url = \"ws://\"+window.location.host+\"/api/k8s/terminal?namespace=\"+this.namespace+\"&pods=\"+this.pod+\"&container=\"+this.container+\"&shell=\"+this.shell;\n\n      // xterm配置自适应大小插件\n      Terminal.applyAddon(fit);\n      Terminal.applyAddon(attach)\n\n      // 这俩插件不知道干嘛的, 用总比不用好\n      Terminal.applyAddon(winptyCompat)\n      Terminal.applyAddon(webLinks)\n\n      // 创建终端\n      var term = new Terminal({\n        cursorBlink: true\n      });\n      term.open(document.getElementById(\"terminal-container\"));\n      // 使用fit插件自适应terminal size\n      term.fit();\n      term.winptyCompatInit()\n      term.webLinksInit()\n\n      // 取得输入焦点\n      term.focus();\n\n      // 连接websocket\n      var ws = new WebSocket(url);\n\n      ws.onopen = function(event) {\n        console.log(event)\n        console.log(\"onopen\")\n      }\n      ws.onclose = function(event) {\n        console.log(event)\n        console.log(\"onclose\")\n      }\n      ws.onmessage = function(event) {\n        console.log(event)\n        // 服务端ssh输出, 写到web shell展示\n        term.write(event.data)\n      }\n      ws.onerror = function(event) {\n        console.log(event)\n        console.log(\"onerror\")\n      }\n\n      // 当浏览器窗口变化时, 重新适配终端\n      window.addEventListener(\"resize\", function () {\n        term.fit()\n        // 把web终端的尺寸term.rows和term.cols发给服务端, 通知sshd调整输出宽度\n        var msg = {type: \"resize\", rows: term.rows, cols: term.cols}\n        ws.send(JSON.stringify(msg))\n\n        // console.log(term.rows + \",\" + term.cols)\n      })\n\n      // 当向web终端敲入字符时候的回调\n      term.on('data', function(input) {\n        // 写给服务端, 由服务端发给container\n        var msg = {type: \"input\", input: input}\n        ws.send(JSON.stringify(msg))\n      })\n    }\n  }\n}\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./terminal.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./terminal.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./terminal.vue?vue&type=template&id=301d7e29&\"\nimport script from \"./terminal.vue?vue&type=script&lang=js&\"\nexport * from \"./terminal.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}