{"version":3,"sources":["webpack:///./src/view/bulk_upload_pod.vue?d767","webpack:///./src/api/multiupload.js","webpack:///src/view/bulk_upload_pod.vue","webpack:///./src/view/bulk_upload_pod.vue?88ec","webpack:///./src/view/bulk_upload_pod.vue","webpack:///./src/view/bulk_upload_pod.vue?26a3","webpack:///./src/api/pods.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","staticStyle","$t","on","selectedNamespace","nativeOn","$event","getNamespace","model","value","callback","$$v","namespace","expression","_l","item","key","pod","label","destPath","staticClass","_v","_s","slot","uploadFileOrDir","staticRenderFns","MultiUpload","data","params","headers","post","namespaces","pods","fileList","methods","res","items","push","metadata","name","console","log","_d","e","files","target","length","formData","FormData","i","append","pod_name","dest_path","undefined","failure","alert","success","err","info","message","watch","index","component","GetPods","get"],"mappings":"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","file":"js/chunk-9cdd0272.d795746a.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-card',{attrs:{\"shadow\":\"never\"}},[_c('div',[_c('el-select',{staticStyle:{\"width\":\"100%\"},attrs:{\"filterable\":\"\",\"placeholder\":_vm.$t('please_select_namespace')},on:{\"change\":_vm.selectedNamespace},nativeOn:{\"click\":function($event){return _vm.getNamespace($event)}},model:{value:(_vm.namespace),callback:function ($$v) {_vm.namespace=$$v},expression:\"namespace\"}},_vm._l((_vm.namespaces),function(item){return _c('el-option',{key:item,attrs:{\"label\":item,\"value\":item}})}),1)],1),_c('div',{staticStyle:{\"margin-top\":\"15px\"}},[_c('el-select',{staticStyle:{\"width\":\"100%\"},attrs:{\"placeholder\":_vm.$t('please_select_pod'),\"filterable\":\"\",\"multiple\":\"\"},model:{value:(_vm.pod),callback:function ($$v) {_vm.pod=$$v},expression:\"pod\"}},[_c('el-option',{attrs:{\"label\":_vm.$t('check_all'),\"value\":\"all\"}}),_vm._l((_vm.pods),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.value}})})],2)],1),_c('div',{staticStyle:{\"margin-top\":\"15px\"}},[_c('el-input',{staticStyle:{\"width\":\"100%\",\"height\":\"40px\"},attrs:{\"autocomplete\":\"off\",\"placeholder\":_vm.$t('please_input_dest_path')},model:{value:(_vm.destPath),callback:function ($$v) {_vm.destPath=$$v},expression:\"destPath\"}})],1),_c('div',{staticStyle:{\"margin-top\":\"15px\"}},[_c('el-dropdown',{staticClass:\"avatar-container\",staticStyle:{\"height\":\"36px\",\"float\":\"right\",\"margin-bottom\":\"10px\"},attrs:{\"type\":\"success\",\"trigger\":\"click\"}},[_c('div',{staticClass:\"avatar-wrapper\"},[_c('el-button',{staticClass:\"el-icon-upload\",staticStyle:{\"width\":\"90px\",\"height\":\"30px\",\"margin-right\":\"6px\",\"padding-top\":\"7px\",\"padding-left\":\"14px\"},attrs:{\"type\":\"success\",\"round\":\"\",\"size\":\"medium\"}},[_vm._v(\" \"+_vm._s(_vm.$t('upload'))+\" \"),_c('i',{staticClass:\"el-icon-caret-bottom\"})])],1),_c('el-dropdown-menu',{attrs:{\"slot\":\"dropdown\"},slot:\"dropdown\"},[_c('el-dropdown-item',[_c('span',{staticClass:\"fake-file-btn\"},[_vm._v(\" \"+_vm._s(_vm.$t('upload_file'))+\" \"),_c('input',{staticStyle:{\"display\":\"block\"},attrs:{\"type\":\"file\",\"name\":\"files\",\"multiple\":\"true\"},on:{\"change\":function($event){return _vm.uploadFileOrDir($event)}}})])]),_c('el-dropdown-item',{attrs:{\"divided\":\"\"}},[_c('span',{staticClass:\"fake-file-btn\"},[_vm._v(\" \"+_vm._s(_vm.$t('upload_dir'))+\" \"),_c('input',{staticStyle:{\"display\":\"block\"},attrs:{\"type\":\"file\",\"name\":\"files\",\"webkitdirectory\":\"\",\"mozdirectory\":\"\",\"accept\":\"*/*\"},on:{\"change\":function($event){return _vm.uploadFileOrDir($event)}}})])])],1)],1)],1)])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import {post} from '../lib/fetch.js'\r\n\r\nexport function MultiUpload(data, params, headers) {\r\n    return post('/k8s/multi_upload', data, params, headers)\r\n}","<template>\r\n  <div>\r\n    <el-card shadow=\"never\">\r\n      <div>\r\n        <el-select style=\"width: 100%\" v-model=\"namespace\" @click.native=\"getNamespace\" @change=\"selectedNamespace\" filterable :placeholder=\"$t('please_select_namespace')\">\r\n          <el-option\r\n              v-for=\"item in namespaces\"\r\n              :label=\"item\"\r\n              :value=\"item\"\r\n              :key=\"item\"\r\n          ></el-option>\r\n        </el-select>\r\n      </div>\r\n      <div style=\"margin-top: 15px\">\r\n        <el-select style=\"width: 100%\" :placeholder=\"$t('please_select_pod')\" filterable multiple v-model=\"pod\">\r\n          <el-option :label=\"$t('check_all')\" value=\"all\"></el-option>\r\n          <el-option v-for=\"item in pods\" :label=\"item.label\" :value=\"item.value\" :key=\"item.value\"></el-option>\r\n        </el-select>\r\n      </div>\r\n      <div style=\"margin-top: 15px\">\r\n        <el-input v-model=\"destPath\" style=\"width: 100%;height: 40px\" autocomplete=\"off\" :placeholder=\"$t('please_input_dest_path')\"></el-input>\r\n      </div>\r\n      <div style=\"margin-top: 15px\">\r\n        <el-dropdown  type=\"success\" class=\"avatar-container\" trigger=\"click\" style=\"height: 36px;float: right;margin-bottom: 10px;\">\r\n          <div class=\"avatar-wrapper\">\r\n            <el-button style=\"width: 90px; height: 30px; margin-right: 6px; padding-top: 7px; padding-left: 14px;\" type=\"success\" round class=\"el-icon-upload\" size=\"medium\">\r\n              {{ $t('upload') }}\r\n              <i class=\"el-icon-caret-bottom\" />\r\n            </el-button>\r\n          </div>\r\n          <el-dropdown-menu slot=\"dropdown\">\r\n            <el-dropdown-item>\r\n                <span class=\"fake-file-btn\">\r\n                  {{ $t('upload_file') }}\r\n                  <input type=\"file\" style=\"display:block;\" v-on:change=\"uploadFileOrDir($event)\" name=\"files\" multiple=\"true\">\r\n                </span>\r\n            </el-dropdown-item>\r\n            <el-dropdown-item divided>\r\n                <span class=\"fake-file-btn\">\r\n                  {{ $t('upload_dir') }}\r\n                  <input type=\"file\" style=\"display:block;\" v-on:change=\"uploadFileOrDir($event)\" name=\"files\" webkitdirectory mozdirectory accept=\"*/*\">\r\n                </span>\r\n            </el-dropdown-item>\r\n          </el-dropdown-menu>\r\n        </el-dropdown>\r\n      </div>\r\n    </el-card>\r\n  </div>\r\n</template>\r\n\r\n<style>\r\n.fake-file-btn {\r\n}\r\n.fake-file-btn:active {\r\n  box-shadow: 0 1px 5px 1px rgba(0, 255, 255, 0.3) inset;\r\n}\r\n.fake-file-btn input[type=file] {\r\n  position: absolute;\r\n  font-size: 100px;\r\n  right: 0;\r\n  top: 0;\r\n  opacity: 0;\r\n  filter: alpha(opacity=0);\r\n  cursor: pointer\r\n}\r\n</style>\r\n\r\n<script>\r\nimport { GetNamespace } from '../api/namespaces'\r\nimport {GetPods} from \"../api/pods\"\r\nimport {MultiUpload} from \"../api/multiupload\"\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      namespace: \"\",\r\n      pod: [],\r\n      namespaces:[],\r\n      pods: [],\r\n      destPath:\"\",\r\n      fileList:[],\r\n    }\r\n  },\r\n  methods: {\r\n    getNamespace() {\r\n      GetNamespace().then(res => {\r\n        if (res) {\r\n          this.namespaces = []\r\n          this.pod = []\r\n          this.pods = []\r\n          const data = res.items;\r\n          for (const key in data) {\r\n            this.namespaces.push(data[key].metadata.name)\r\n          }\r\n          console.log(this.namespaces)\r\n        }\r\n      })\r\n    },\r\n    selectedNamespace() {\r\n      GetPods({namespace: this.namespace}).then(res => {\r\n        if (res) {\r\n          const pods = [];\r\n          this.pod = []\r\n          this.pods = []\r\n          const data = res.items;\r\n          for (const key in data) {\r\n            const _d = {label: data[key].metadata.name, value: data[key].metadata.name}\r\n            pods.push(_d)\r\n          }\r\n          this.pods = pods\r\n          console.log(this.pods)\r\n        }\r\n      })\r\n    },\r\n    uploadFileOrDir(e) {\r\n      const files = e.target.files;\r\n      if (files.length === 0 ) {\r\n        e.target.value = \"\"\r\n        return\r\n      }\r\n      let pod = this.pod\r\n      if (pod[0] === \"all\") {\r\n        pod = this.pods\r\n      }\r\n      const formData = new FormData();\r\n      //追加文件数据\r\n      for (let i = 0; i < files.length; i++) {\r\n        formData.append(\"files\", files[i]);\r\n      }\r\n      MultiUpload(formData, {\r\n        namespace:this.namespace,\r\n        pod_name:pod,\r\n        dest_path:this.destPath},{\"Content-Type\":\"multipart/form-data\"}).then((res) => {\r\n        if (res.failure !== undefined) {\r\n          alert(res.failure)\r\n        }else {\r\n          alert(res.success)\r\n        }\r\n      }, (err) => {\r\n        alert(err.info.message)\r\n      })\r\n      e.target.value = \"\"\r\n    },\r\n  },\r\n  watch:{\r\n    pod:function(val,oldVal){\r\n      let index =  val.indexOf('all'),oldIndex =  oldVal.indexOf('all');\r\n      if(index!==-1 && oldIndex===-1 && val.length>1)\r\n        this.pod=['all'];\r\n      else if(index!==-1 && oldIndex!==-1 && val.length>1)\r\n        this.pod.splice(val.indexOf('all'),1)\r\n    }\r\n  }\r\n}\r\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./bulk_upload_pod.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./bulk_upload_pod.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./bulk_upload_pod.vue?vue&type=template&id=ca61e04e&\"\nimport script from \"./bulk_upload_pod.vue?vue&type=script&lang=js&\"\nexport * from \"./bulk_upload_pod.vue?vue&type=script&lang=js&\"\nimport style0 from \"./bulk_upload_pod.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./bulk_upload_pod.vue?vue&type=style&index=0&lang=css&\"","import {get} from '../lib/fetch.js'\r\n\r\nexport function GetPods(params) {\r\n    return get('/k8s/pods', params)\r\n}"],"sourceRoot":""}