{"version":3,"sources":["webpack:///./src/view/bulk_upload_pod.vue?781f","webpack:///./src/api/multiupload.js","webpack:///src/view/bulk_upload_pod.vue","webpack:///./src/view/bulk_upload_pod.vue?88ec","webpack:///./src/view/bulk_upload_pod.vue","webpack:///./src/api/pods.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","$t","on","selectedNamespace","nativeOn","$event","getNamespace","model","value","callback","$$v","namespace","expression","_l","item","key","_v","pod","label","staticStyle","destPath","fileList","fileChange","fileRemove","staticClass","_s","submitUpload","staticRenderFns","MultiUpload","data","params","headers","post","namespaces","pods","methods","res","items","push","metadata","name","console","log","_d","file","formData","FormData","forEach","append","raw","pod_name","dest_path","undefined","failure","alert","success","err","info","message","watch","index","component","GetPods","get"],"mappings":"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","file":"js/chunk-c5b10266.3a8758c5.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-card',{attrs:{\"shadow\":\"never\"}},[_c('div',[_c('el-select',{attrs:{\"filterable\":\"\",\"placeholder\":_vm.$t('please_select_namespace')},on:{\"change\":_vm.selectedNamespace},nativeOn:{\"click\":function($event){return _vm.getNamespace($event)}},model:{value:(_vm.namespace),callback:function ($$v) {_vm.namespace=$$v},expression:\"namespace\"}},_vm._l((_vm.namespaces),function(item){return _c('el-option',{key:item,attrs:{\"label\":item,\"value\":item}})}),1),_vm._v(\" \"),_c('el-select',{attrs:{\"placeholder\":_vm.$t('please_select_pod'),\"filterable\":\"\",\"multiple\":\"\"},model:{value:(_vm.pod),callback:function ($$v) {_vm.pod=$$v},expression:\"pod\"}},[_c('el-option',{attrs:{\"label\":_vm.$t('check_all'),\"value\":\"all\"}}),_vm._l((_vm.pods),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.value}})})],2),_vm._v(\" \"),_c('el-input',{staticStyle:{\"width\":\"193px\",\"height\":\"40px\"},attrs:{\"autocomplete\":\"off\",\"placeholder\":_vm.$t('please_input_dest_path')},model:{value:(_vm.destPath),callback:function ($$v) {_vm.destPath=$$v},expression:\"destPath\"}})],1),_vm._v(\" \"),_c('div',[_c('el-upload',{staticStyle:{\"display\":\"inline-block\"},attrs:{\"action\":\"\",\"multiple\":\"\",\"file-list\":_vm.fileList,\"show-file-list\":false,\"on-change\":_vm.fileChange,\"on-remove\":_vm.fileRemove,\"auto-upload\":false}},[_c('el-button',{attrs:{\"type\":\"primary\",\"plain\":\"\"}},[_c('i',{staticClass:\"el-icon-upload el-icon--right\"}),_vm._v(_vm._s(_vm.$t('select_file')))])],1),_c('el-button',{staticStyle:{\"margin-left\":\"10px\",\"vertical-align\":\"top\"},attrs:{\"type\":\"success\",\"plain\":\"\"},on:{\"click\":_vm.submitUpload}},[_vm._v(_vm._s(_vm.$t('upload_all')))])],1)])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import {post} from '../lib/fetch.js'\r\n\r\nexport function MultiUpload(data, params, headers) {\r\n    return post('/k8s/multi_upload', data, params, headers)\r\n}","<template>\n  <div>\n    <el-card shadow=\"never\">\n      <div>\n        <el-select v-model=\"namespace\" @click.native=\"getNamespace\" @change=\"selectedNamespace\" filterable :placeholder=\"$t('please_select_namespace')\">\n          <el-option\n              v-for=\"item in namespaces\"\n              :label=\"item\"\n              :value=\"item\"\n              :key=\"item\"\n          ></el-option>\n        </el-select>\n        &nbsp;&nbsp;\n        <el-select :placeholder=\"$t('please_select_pod')\" filterable multiple v-model=\"pod\">\n          <el-option :label=\"$t('check_all')\" value=\"all\"></el-option>\n          <el-option v-for=\"item in pods\" :label=\"item.label\" :value=\"item.value\" :key=\"item.value\"></el-option>\n        </el-select>\n        &nbsp;&nbsp;\n        <el-input v-model=\"destPath\" style=\"width: 193px;height: 40px\" autocomplete=\"off\" :placeholder=\"$t('please_input_dest_path')\"></el-input>\n      </div>\n      &nbsp;&nbsp;\n      <div>\n        <el-upload\n            action=\"\"\n            multiple\n            :file-list=\"fileList\"\n            :show-file-list=\"false\"\n            :on-change=\"fileChange\"\n            :on-remove=\"fileRemove\"\n            :auto-upload=\"false\"\n            style=\"display: inline-block\">\n          <el-button type=\"primary\" plain><i class=\"el-icon-upload el-icon--right\"></i>{{$t('select_file')}}</el-button>\n        </el-upload>\n        <el-button style=\"margin-left: 10px;vertical-align: top;\" type=\"success\" plain @click=\"submitUpload\">{{$t('upload_all')}}</el-button>\n      </div>\n    </el-card>\n  </div>\n</template>\n\n<script>\nimport { GetNamespace } from '../api/namespaces'\nimport {GetPods} from \"../api/pods\"\nimport {MultiUpload} from \"../api/multiupload\"\n\nexport default {\n  data() {\n    return {\n      namespace: \"\",\n      pod: [],\n      namespaces:[],\n      pods: [],\n      destPath:\"\",\n      fileList:[],\n    }\n  },\n  methods: {\n    getNamespace() {\n      GetNamespace().then(res => {\n        if (res) {\n          this.namespaces = []\n          this.pod = []\n          this.pods = []\n          const data = res.items;\n          for (const key in data) {\n            this.namespaces.push(data[key].metadata.name)\n          }\n          console.log(this.namespaces)\n        }\n      })\n    },\n    selectedNamespace() {\n      GetPods({namespace: this.namespace}).then(res => {\n        if (res) {\n          const pods = [];\n          this.pod = []\n          this.pods = []\n          const data = res.items;\n          for (const key in data) {\n            const _d = {label: data[key].metadata.name, value: data[key].metadata.name}\n            pods.push(_d)\n          }\n          this.pods = pods\n          console.log(this.pods)\n        }\n      })\n    },\n    fileChange(file, fileList) {\n      this.fileList = fileList\n    },\n    fileRemove(file, fileList) {\n      this.fileList = fileList\n    },\n    submitUpload(){\n      console.log(\"this.fileList\", this.fileList)\n      let formData = new FormData\n      this.fileList.forEach(file => {\n        formData.append(\"files\", file.raw)\n      })\n      var pod = this.pod[0]\n      if (this.pod[0] === \"all\") {\n        pod = \"\"\n        for (const key in this.pods) {\n          pod.push(this.pods[key].value)\n        }\n      }else {\n        for (const  key in this.pod) {\n          pod.push(this.pod[key].value)\n        }\n      }\n      MultiUpload(formData, {\n        namespace:this.namespace,\n        pod_name:pod,\n        dest_path:this.destPath\n      },{\"Content-Type\":\"multipart/form-data\"}).then(res => {\n        if (res.failure !== undefined) {\n          alert(res.failure)\n        }else {\n          alert(res.success)\n        }\n      }, (err) =>{\n        alert(err.info.message)\n      })\n    },\n  },\n  watch:{\n    pod:function(val,oldVal){\n      let index =  val.indexOf('all'),oldIndex =  oldVal.indexOf('all');\n      if(index!==-1 && oldIndex===-1 && val.length>1)\n        this.pod=['all'];\n      else if(index!==-1 && oldIndex!==-1 && val.length>1)\n        this.pod.splice(val.indexOf('all'),1)\n    }\n  }\n}\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./bulk_upload_pod.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./bulk_upload_pod.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./bulk_upload_pod.vue?vue&type=template&id=31c45a4f&\"\nimport script from \"./bulk_upload_pod.vue?vue&type=script&lang=js&\"\nexport * from \"./bulk_upload_pod.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import {get} from '../lib/fetch.js'\r\n\r\nexport function GetPods(params) {\r\n    return get('/k8s/pods', params)\r\n}"],"sourceRoot":""}